"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/particles-bg";
exports.ids = ["vendor-chunks/particles-bg"];
exports.modules = {

/***/ "(ssr)/./node_modules/particles-bg/dist/index.es.js":
/*!****************************************************!*\
  !*** ./node_modules/particles-bg/dist/index.es.js ***!
  \****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var raf_manager__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! raf-manager */ \"(ssr)/./node_modules/raf-manager/build/RAFManager.min.js\");\n/* harmony import */ var raf_manager__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(raf_manager__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var proton_engine__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! proton-engine */ \"(ssr)/./node_modules/proton-engine/build/proton.min.js\");\n/* harmony import */ var proton_engine__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(proton_engine__WEBPACK_IMPORTED_MODULE_2__);\n\n\n\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) {\n  return typeof obj;\n} : function (obj) {\n  return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n};\n\nvar classCallCheck = function (instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n};\n\nvar createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nvar inherits = function (subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n};\n\nvar possibleConstructorReturn = function (self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n};\n\n// Code source from here, thanks author\n// https://github.com/drawcall/Proton/blob/gh-pages/source/src/utils/Rand.js\nvar Rand = function () {\n    function Rand() {\n        classCallCheck(this, Rand);\n\n        this.list = [];\n    }\n\n    createClass(Rand, [{\n        key: \"set\",\n        value: function set$$1(probability, target) {\n            this.list.push({\n                probability: probability,\n                target: target,\n                a: 0,\n                b: 1\n            });\n\n            this.calculation();\n        }\n    }, {\n        key: \"calculation\",\n        value: function calculation() {\n            var total = 0;\n            for (var i = 0; i < this.list.length; i++) {\n                total += this.list[i].probability;\n            }\n\n            for (var _i = 0; _i < this.list.length; _i++) {\n                var obj = this.list[_i];\n                var val = obj.probability / total;\n\n                obj.a = _i === 0 ? 0 : this.list[_i - 1].b;\n                obj.b = obj.a + val;\n            }\n        }\n    }, {\n        key: \"getResult\",\n        value: function getResult() {\n            var val = Math.random();\n            for (var i = 0; i < this.list.length; i++) {\n                var obj = this.list[i];\n\n                if (val <= obj.b && val > obj.a) {\n                    return obj.target;\n                }\n            }\n\n            return this.list[0].target;\n        }\n    }]);\n    return Rand;\n}();\n\nvar Canvas = function (_React$Component) {\n  inherits(Canvas, _React$Component);\n\n  function Canvas(props) {\n    classCallCheck(this, Canvas);\n\n    var _this = possibleConstructorReturn(this, (Canvas.__proto__ || Object.getPrototypeOf(Canvas)).call(this, props));\n\n    _this._iid = 0;\n    _this._oid = 0;\n    _this.size = { width: 0, height: 0 };\n    _this.canvasRef = react__WEBPACK_IMPORTED_MODULE_0___default().createRef();\n    return _this;\n  }\n\n  createClass(Canvas, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      this._oid = setTimeout(function () {\n        _this2.initCanvas();\n        _this2.resize = _this2.resize.bind(_this2);\n        window.addEventListener(\"resize\", _this2.resize);\n      }, 100);\n\n      var canvas = this.getCanvas();\n      this.props.onCanvasDidMount && this.props.onCanvasDidMount(canvas);\n    }\n  }, {\n    key: \"initCanvas\",\n    value: function initCanvas() {\n      var canvas = this.getCanvas();\n\n      if (this.props.globalCompositeOperation) {\n        var context = canvas.getContext(\"2d\");\n        context.globalCompositeOperation = this.props.globalCompositeOperation;\n      }\n\n      var _setCanvasSize = this.setCanvasSize(canvas),\n          width = _setCanvasSize.width,\n          height = _setCanvasSize.height;\n\n      this.heartbeatDetectionCanvasSize(canvas);\n      this.props.onCanvasInited(canvas, width, height);\n    }\n  }, {\n    key: \"getCanvas\",\n    value: function getCanvas() {\n      var canvas = this.canvasRef.current;\n      return canvas;\n    }\n  }, {\n    key: \"heartbeatDetectionCanvasSize\",\n    value: function heartbeatDetectionCanvasSize(canvas) {\n      var _this3 = this;\n\n      this._iid = setInterval(function () {\n        if (_this3.canvasRef.current) {\n          var newHeight = _this3.canvasRef.current.clientHeight;\n          if (newHeight !== _this3.size.height) {\n            var _setCanvasSize2 = _this3.setCanvasSize(canvas),\n                width = _setCanvasSize2.width,\n                height = _setCanvasSize2.height;\n\n            _this3.props.onResize && _this3.props.onResize(width, height);\n          }\n        }\n      }, 1000 / 10);\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      try {\n        window.removeEventListener(\"resize\", this.resize);\n        clearInterval(this._iid);\n        clearTimeout(this._oid);\n      } catch (e) {}\n    }\n  }, {\n    key: \"resize\",\n    value: function resize() {\n      var canvas = this.getCanvas();\n\n      var _setCanvasSize3 = this.setCanvasSize(canvas),\n          width = _setCanvasSize3.width,\n          height = _setCanvasSize3.height;\n\n      this.props.onResize && this.props.onResize(width, height);\n    }\n  }, {\n    key: \"setCanvasSize\",\n    value: function setCanvasSize(canvas) {\n      var width = this.canvasRef.current.clientWidth;\n      var height = this.canvasRef.current.clientHeight;\n\n      this.size.width = width;\n      this.size.height = height;\n      canvas.width = width;\n      canvas.height = height;\n      return { width: width, height: height };\n    }\n  }, {\n    key: \"handleWaypointEnter\",\n    value: function handleWaypointEnter() {\n      raf_manager__WEBPACK_IMPORTED_MODULE_1___default().start();\n    }\n  }, {\n    key: \"handleWaypointLeave\",\n    value: function handleWaypointLeave() {\n      raf_manager__WEBPACK_IMPORTED_MODULE_1___default().stop();\n    }\n  }, {\n    key: \"getStyle\",\n    value: function getStyle() {\n      var bg = this.props.bg;\n\n      var style = { width: \"100%\", height: \"100%\" };\n\n      if (bg === true) {\n        style = Object.assign(style, {\n          position: \"absolute\",\n          zIndex: -1,\n          top: 0,\n          left: 0\n        });\n      } else if (bg && (typeof bg === \"undefined\" ? \"undefined\" : _typeof(bg)) === \"object\") {\n        style = Object.assign(style, bg);\n      }\n\n      return style;\n    }\n  }, {\n    key: \"handleMouseDown\",\n    value: function handleMouseDown(e) {\n      this.props.onMouseDown && this.props.onMouseDown(e);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"canvas\", { className: \"particles-bg-canvas-self\",\n        ref: this.canvasRef,\n        onMouseDown: this.handleMouseDown.bind(this),\n        style: this.getStyle()\n      });\n    }\n  }]);\n  return Canvas;\n}((react__WEBPACK_IMPORTED_MODULE_0___default().Component));\n\nfunction hexToRgb(hex) {\n    var result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\n    return result ? {\n        r: parseInt(result[1], 16),\n        g: parseInt(result[2], 16),\n        b: parseInt(result[3], 16)\n    } : {};\n}\n\nfunction getColor(color, a) {\n    var c = void 0;\n    if (color) {\n        c = hexToRgb(color);\n        return \"rgba(\" + c.r + \",\" + c.g + \",\" + c.b + \", \" + a + \")\";\n    } else {\n        return null;\n    }\n}\n\nvar Ball = function (_React$Component) {\n  inherits(Ball, _React$Component);\n\n  function Ball(props) {\n    classCallCheck(this, Ball);\n\n    var _this = possibleConstructorReturn(this, (Ball.__proto__ || Object.getPrototypeOf(Ball)).call(this, props));\n\n    _this.renderProton = _this.renderProton.bind(_this);\n    return _this;\n  }\n\n  createClass(Ball, [{\n    key: \"onCanvasInited\",\n    value: function onCanvasInited(canvas, width, height) {\n      this.createProton(canvas, width, height);\n      this.createMiniEmitter(canvas);\n      raf_manager__WEBPACK_IMPORTED_MODULE_1___default().add(this.renderProton);\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      try {\n        raf_manager__WEBPACK_IMPORTED_MODULE_1___default().remove(this.renderProton);\n        this.proton.destroy();\n      } catch (e) {}\n    }\n  }, {\n    key: \"onResize\",\n    value: function onResize() {}\n  }, {\n    key: \"createProton\",\n    value: function createProton(canvas, width, height) {\n      var _this2 = this;\n\n      var context = canvas.getContext(\"2d\");\n      this.proton = new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default())();\n\n      var emitter = new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Emitter)();\n      emitter.rate = new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Rate)(this.props.num ? new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Span)(this.props.num) : new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Span)(4, 9), new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Span)(0.8, 1.3));\n\n      emitter.addInitialize(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Mass)(1));\n      emitter.addInitialize(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Radius)(1, 50));\n      emitter.addInitialize(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Life)(5, 6));\n      emitter.addInitialize(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Velocity)(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Span)(5, 8), new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Span)(30, 70), \"polar\"));\n\n      emitter.addBehaviour(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Alpha)(1, 0));\n      emitter.addBehaviour(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Color)([\"#36aaf3\", \"#fd769c\", \"#94ff22\", \"#ffa545\", \"#ffffff\"]));\n      emitter.addBehaviour(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Scale)(0.7, 1));\n      emitter.addBehaviour(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Gravity)(3));\n      emitter.addBehaviour(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Collision)(emitter));\n      emitter.addBehaviour(this.customDeadBehaviour(canvas));\n      emitter.addBehaviour(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().CrossZone)(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().RectZone)(0, 0, canvas.width, canvas.height), \"bound\"));\n\n      emitter.p.x = Math.min(500, Math.max(canvas.width / 2 - 400, 50));\n      emitter.p.y = canvas.height / 2 + 50;\n      emitter.emit();\n      this.proton.addEmitter(emitter);\n\n      var renderer = new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().CanvasRenderer)(canvas);\n      renderer.onProtonUpdate = function () {\n        context.fillStyle = getColor(_this2.props.color, 0.2) || \"rgba(255, 255, 255, 0.2)\";\n        context.fillRect(0, 0, canvas.width, canvas.height);\n      };\n      this.proton.addRenderer(renderer);\n    }\n  }, {\n    key: \"customDeadBehaviour\",\n    value: function customDeadBehaviour(canvas) {\n      var _this3 = this;\n\n      return {\n        initialize: function initialize(particle) {},\n        applyBehaviour: function applyBehaviour(particle) {\n          if (particle.p.y + particle.radius >= canvas.height) {\n            if (particle.radius > 9) {\n              _this3.miniEmitteing(particle);\n              particle.dead = true;\n            }\n          }\n        }\n      };\n    }\n  }, {\n    key: \"createMiniEmitter\",\n    value: function createMiniEmitter(canvas) {\n      var miniEmitter = new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Emitter)();\n      miniEmitter.rate = new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Rate)(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Span)(3, 6), new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Span)(1, 2));\n\n      miniEmitter.addInitialize(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Mass)(1));\n      miniEmitter.radiusInitialize = new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Radius)();\n      miniEmitter.addInitialize(miniEmitter.radiusInitialize);\n      miniEmitter.addInitialize(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Life)(0.5, 1));\n      miniEmitter.addInitialize(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().V)(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Span)(1.5, 3), new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Span)(0, 70, true), \"polar\"));\n\n      miniEmitter.colorBehaviour = new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Color)(\"#ffffff\");\n      miniEmitter.addBehaviour(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Alpha)(1, 0));\n      miniEmitter.addBehaviour(miniEmitter.colorBehaviour);\n      miniEmitter.addBehaviour(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Gravity)(4));\n      miniEmitter.addBehaviour(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Collision)(miniEmitter));\n      miniEmitter.addBehaviour(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().CrossZone)(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().RectZone)(0, 0, canvas.width, canvas.height), \"bound\"));\n      this.proton.addEmitter(miniEmitter);\n\n      this.miniEmitter = miniEmitter;\n    }\n  }, {\n    key: \"miniEmitteing\",\n    value: function miniEmitteing(particle) {\n      var miniEmitter = this.miniEmitter;\n      miniEmitter.radiusInitialize.reset(particle.radius * 0.05, particle.radius * 0.2);\n      miniEmitter.colorBehaviour.reset(particle.color);\n      miniEmitter.p.x = particle.p.x;\n      miniEmitter.p.y = particle.p.y;\n      miniEmitter.emit(\"once\");\n    }\n  }, {\n    key: \"renderProton\",\n    value: function renderProton() {\n      this.proton && this.proton.update();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return react__WEBPACK_IMPORTED_MODULE_0___default().createElement(Canvas, { bg: this.props.bg,\n        globalCompositeOperation: \"darker\",\n        onCanvasInited: this.onCanvasInited.bind(this),\n        onResize: this.onResize.bind(this)\n      });\n    }\n  }]);\n  return Ball;\n}((react__WEBPACK_IMPORTED_MODULE_0___default().Component));\n\nvar Color = function (_React$Component) {\n  inherits(Color, _React$Component);\n\n  function Color(props) {\n    classCallCheck(this, Color);\n\n    var _this = possibleConstructorReturn(this, (Color.__proto__ || Object.getPrototypeOf(Color)).call(this, props));\n\n    _this.colors = [\"#529B88\", \"#CDD180\", \"#FFFA32\", \"#FB6255\", \"#FB4A53\", \"#FF4E50\", \"#F9D423\"];\n    _this.renderProton = _this.renderProton.bind(_this);\n    return _this;\n  }\n\n  createClass(Color, [{\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      try {\n        raf_manager__WEBPACK_IMPORTED_MODULE_1___default().remove(this.renderProton);\n        this.proton.destroy();\n      } catch (e) {}\n    }\n  }, {\n    key: \"onCanvasInited\",\n    value: function onCanvasInited(canvas, width, height) {\n      this.createProton(canvas, width, height);\n      raf_manager__WEBPACK_IMPORTED_MODULE_1___default().add(this.renderProton);\n    }\n  }, {\n    key: \"onResize\",\n    value: function onResize() {}\n  }, {\n    key: \"createProton\",\n    value: function createProton(canvas, width, height) {\n      this.proton = new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default())();\n      var emitter = new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Emitter)();\n      emitter.rate = new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Rate)(this.props.num ? new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Span)(this.props.num) : new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Span)(5, 8), new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Span)(0.1, 0.25));\n\n      emitter.addInitialize(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Mass)(1));\n      emitter.addInitialize(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Radius)(20, 200));\n      emitter.addInitialize(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Life)(2, 4));\n      emitter.addInitialize(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Position)(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().RectZone)(0, 0, width, height)));\n\n      emitter.addBehaviour(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Alpha)(0, 1, Infinity, (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().easeOutCubic)));\n      emitter.addBehaviour(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Scale)(1, 0, Infinity, (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().easeOutCubic)));\n      emitter.addBehaviour(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Color)(this.colors, \"random\"));\n\n      emitter.emit();\n      this.proton.addEmitter(emitter);\n\n      var renderer = new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().CanvasRenderer)(canvas);\n      this.proton.addRenderer(renderer);\n    }\n  }, {\n    key: \"renderProton\",\n    value: function renderProton() {\n      this.proton && this.proton.update();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return react__WEBPACK_IMPORTED_MODULE_0___default().createElement(Canvas, { bg: this.props.bg,\n        globalCompositeOperation: \"darker\",\n        onCanvasInited: this.onCanvasInited.bind(this),\n        onResize: this.onResize.bind(this)\n      });\n    }\n  }]);\n  return Color;\n}((react__WEBPACK_IMPORTED_MODULE_0___default().Component));\n\nvar Color$1 = function (_React$Component) {\n    inherits(Color, _React$Component);\n\n    function Color(props) {\n        classCallCheck(this, Color);\n\n        var _this = possibleConstructorReturn(this, (Color.__proto__ || Object.getPrototypeOf(Color)).call(this, props));\n\n        _this.colors = [\"#529B88\", \"#CDD180\", \"#FFFA32\", \"#FB6255\", \"#FB4A53\", \"#FF4E50\", \"#F9D423\"];\n        _this.renderProton = _this.renderProton.bind(_this);\n        return _this;\n    }\n\n    createClass(Color, [{\n        key: \"componentWillUnmount\",\n        value: function componentWillUnmount() {\n            try {\n                raf_manager__WEBPACK_IMPORTED_MODULE_1___default().remove(this.renderProton);\n                this.proton.destroy();\n            } catch (e) {}\n        }\n    }, {\n        key: \"onCanvasInited\",\n        value: function onCanvasInited(canvas, width, height) {\n            this.createProton(canvas, width, height);\n            raf_manager__WEBPACK_IMPORTED_MODULE_1___default().add(this.renderProton);\n        }\n    }, {\n        key: \"onResize\",\n        value: function onResize(width, height) {\n            this.crossZoneBehaviour.zone.width = width;\n            this.crossZoneBehaviour.zone.height = height;\n            this.proton.renderers[0].resize(width, height);        }\n    }, {\n        key: \"getProp\",\n        value: function getProp(key, defaultVal) {\n            var config = this.props.config || {};\n            var val = config[key] || defaultVal;\n            if (Array.isArray(val)) {\n                return new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Span)(val[0], val[1]);\n            } else {\n                return val;\n            }\n        }\n    }, {\n        key: \"getArrProp\",\n        value: function getArrProp(key, defaultVal) {\n            var config = this.props.config || {};\n            var val = config[key] || defaultVal;\n            if (!val) return null;\n\n            if (Array.isArray(val)) {\n                return val;\n            } else {\n                return [val, val];\n            }\n        }\n    }, {\n        key: \"createProton\",\n        value: function createProton(canvas, width, height) {\n            var num = this.getProp(\"num\", [5, 8]);\n            var rps = this.getProp(\"rps\", [0.1, 0.2]);\n            var mass = this.getProp(\"mass\", 1);\n            var radius = this.getProp(\"radius\", [10, 30]);\n            var life = this.getProp(\"life\", [2, 3]);\n            var body = this.getProp(\"body\");\n            var position = this.getProp(\"position\");\n            var v = this.getProp(\"v\", [2, 3]);\n            var tha = this.getProp(\"tha\", [-15, 15]);\n            var alpha = this.getArrProp(\"alpha\");\n            var scale = this.getArrProp(\"scale\");\n            var color = this.getArrProp(\"color\");\n            var cross = this.getProp(\"cross\", \"dead\");\n            var random = this.getProp(\"random\");\n            var rotate = this.getArrProp(\"rotate\");\n            var g = this.getProp(\"g\");\n            var f = this.getArrProp(\"f\");\n            var emitterV = this.getProp(\"emitter\");\n\n            this.proton = new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default())();\n            var emitter = void 0;\n            if (emitterV === \"follow\") {\n                emitter = new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().FollowEmitter)();\n            } else {\n                emitter = new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Emitter)();\n            }\n            emitter.rate = new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Rate)(num, rps);\n\n            emitter.addInitialize(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Mass)(mass));\n            emitter.addInitialize(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Radius)(radius));\n            emitter.addInitialize(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Life)(life));\n            emitter.addInitialize(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Velocity)(v, tha, \"polar\"));\n            if (body) emitter.addInitialize(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Body)(body));\n\n            var pos = void 0;\n            if (position === \"all\" || position === \"screen\") {\n                pos = new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Position)(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().RectZone)(0, 0, canvas.width, canvas.height));\n            } else if ((typeof position === \"undefined\" ? \"undefined\" : _typeof(position)) === \"object\") {\n                pos = new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Position)(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().RectZone)(position.x, position.y, position.width, position.height));\n            } else {\n                emitter.p.x = canvas.width / 2;\n                emitter.p.y = canvas.height / 2;\n            }\n\n            emitter.addInitialize(pos);\n\n            /// behaviour\n            var alphaB = alpha ? new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Alpha)(alpha[0], alpha[1]) : new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Alpha)(0, 1);\n            var scaleB = scale ? new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Scale)(scale[0], scale[1]) : new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Scale)(1, 0.2);\n            var colorB = color ? new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Color)(color[0], color[1]) : new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Color)(this.colors);\n\n            emitter.addBehaviour(alphaB);\n            emitter.addBehaviour(scaleB);\n            if (!body) emitter.addBehaviour(colorB);\n\n            if (rotate) {\n                if (rotate[0] === true || rotate[0] === \"rotate\") {\n                    emitter.addBehaviour(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Rotate)());\n                } else {\n                    emitter.addBehaviour(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Rotate)(rotate[0], rotate[1]));\n                }\n            }\n\n            var zone = new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().RectZone)(0, 0, canvas.width, canvas.height);\n            var crossZoneBehaviour = new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().CrossZone)(zone, cross);\n            emitter.addBehaviour(crossZoneBehaviour);\n\n            random && emitter.addBehaviour(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().RandomDrift)(random, random, 0.05));\n            g && emitter.addBehaviour(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().G)(g));\n            f && emitter.addBehaviour(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().F)(f[0], f[1]));\n\n            emitter.emit();\n            this.proton.addEmitter(emitter);\n\n            var renderer = this.createRenderer(canvas);\n            this.proton.addRenderer(renderer);\n\n            this.emitter = emitter;\n            this.crossZoneBehaviour = crossZoneBehaviour;\n        }\n    }, {\n        key: \"createRenderer\",\n        value: function createRenderer(canvas) {\n            var width = canvas.width;\n            var height = canvas.height;\n            var context = canvas.getContext(\"2d\");\n            var renderer = new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().CanvasRenderer)(canvas);\n\n            var onUpdate = this.getProp(\"onUpdate\");\n            if (onUpdate) {\n                renderer.onProtonUpdate = function () {\n                    onUpdate(context, width, height);\n                };\n            }\n\n            var onParticleCreated = this.getProp(\"onParticleCreated\");\n            if (onParticleCreated) {\n                renderer.onParticleCreated = function (particle) {\n                    onParticleCreated(context, particle);\n                };\n            }\n\n            var onParticleUpdate = this.getProp(\"onParticleUpdate\");\n            if (onParticleUpdate) {\n                renderer.onParticleUpdate = function (particle) {\n                    onParticleUpdate(context, particle);\n                };\n            }\n\n            return renderer;\n        }\n    }, {\n        key: \"renderProton\",\n        value: function renderProton() {\n            this.proton && this.proton.update();\n        }\n    }, {\n        key: \"handleMouseDown\",\n        value: function handleMouseDown(e) {\n            var onMouseDown = this.getProp(\"onMouseDown\");\n            if (onMouseDown) {\n                onMouseDown(e);\n            }\n        }\n    }, {\n        key: \"render\",\n        value: function render() {\n            var globalCompositeOperation = this.props.globalCompositeOperation || this.props.operation || \"source-over\";\n\n            return react__WEBPACK_IMPORTED_MODULE_0___default().createElement(Canvas, {\n                bg: this.props.bg,\n                onMouseDown: this.handleMouseDown.bind(this),\n                globalCompositeOperation: globalCompositeOperation,\n                onCanvasInited: this.onCanvasInited.bind(this),\n                onResize: this.onResize.bind(this)\n            });\n        }\n    }]);\n    return Color;\n}((react__WEBPACK_IMPORTED_MODULE_0___default().Component));\n\nvar Lines = function (_React$Component) {\n  inherits(Lines, _React$Component);\n\n  function Lines(props) {\n    classCallCheck(this, Lines);\n\n    var _this = possibleConstructorReturn(this, (Lines.__proto__ || Object.getPrototypeOf(Lines)).call(this, props));\n\n    _this.renderProton = _this.renderProton.bind(_this);\n    return _this;\n  }\n\n  createClass(Lines, [{\n    key: \"onCanvasDidMount\",\n    value: function onCanvasDidMount(canvas) {\n      if (this.props.color) {\n        canvas.style.backgroundColor = this.props.color;\n      }\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      try {\n        raf_manager__WEBPACK_IMPORTED_MODULE_1___default().remove(this.renderProton);\n        this.proton.destroy();\n      } catch (e) {}\n    }\n  }, {\n    key: \"onCanvasInited\",\n    value: function onCanvasInited(canvas, width, height) {\n      this.createProton(canvas, width, height);\n      raf_manager__WEBPACK_IMPORTED_MODULE_1___default().add(this.renderProton);\n    }\n  }, {\n    key: \"onResize\",\n    value: function onResize(width, height) {\n      this.crossZoneBehaviour.zone.width = width;\n      this.crossZoneBehaviour.zone.height = height;\n      this.proton.renderers[0].resize(width, height);\n    }\n  }, {\n    key: \"createProton\",\n    value: function createProton(canvas, width, height) {\n      this.proton = new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default())();\n\n      var emitter = new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Emitter)();\n      emitter.damping = 0.008;\n      emitter.rate = new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Rate)(this.props.num ? this.props.num : 250);\n      emitter.addInitialize(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Mass)(1));\n      emitter.addInitialize(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Radius)(4));\n      emitter.addInitialize(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Velocity)(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Span)(1.5), new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Span)(0, 360), \"polar\"));\n      var mouseObj = {\n        x: width / 2,\n        y: height / 2\n      };\n\n      var attractionBehaviour = new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Attraction)(mouseObj, 0, 0);\n      var crossZoneBehaviour = new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().CrossZone)(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().RectZone)(0, 0, canvas.width, canvas.height), \"cross\");\n      emitter.addBehaviour(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Color)(\"random\"));\n      emitter.addBehaviour(attractionBehaviour, crossZoneBehaviour);\n      emitter.addBehaviour(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().RandomDrift)(10, 10, 0.05));\n      emitter.p.x = canvas.width / 2;\n      emitter.p.y = canvas.height / 2;\n      emitter.emit(\"once\");\n\n      this.proton.addEmitter(emitter);\n      this.proton.addRenderer(this.createRenderer(canvas));\n      this.crossZoneBehaviour = crossZoneBehaviour;\n    }\n  }, {\n    key: \"createRenderer\",\n    value: function createRenderer(canvas) {\n      var _this2 = this;\n\n      var context = canvas.getContext(\"2d\");\n      var renderer = new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().CanvasRenderer)(canvas);\n      renderer.onProtonUpdate = function () {\n        context.fillStyle = getColor(_this2.props.color, 0.02) || \"rgba(0, 0, 0, 0.02)\";\n        context.fillRect(0, 0, canvas.width, canvas.height);\n      };\n\n      renderer.onParticleUpdate = function (particle) {\n        context.beginPath();\n        context.strokeStyle = particle.color;\n        context.lineWidth = 1;\n        context.moveTo(particle.old.p.x, particle.old.p.y);\n        context.lineTo(particle.p.x, particle.p.y);\n        context.closePath();\n        context.stroke();\n      };\n\n      return renderer;\n    }\n  }, {\n    key: \"renderProton\",\n    value: function renderProton() {\n      this.proton && this.proton.update();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return react__WEBPACK_IMPORTED_MODULE_0___default().createElement(Canvas, { bg: this.props.bg,\n        globalCompositeOperation: \"darker\",\n        onCanvasDidMount: this.onCanvasDidMount.bind(this),\n        onCanvasInited: this.onCanvasInited.bind(this),\n        onResize: this.onResize.bind(this)\n      });\n    }\n  }]);\n  return Lines;\n}((react__WEBPACK_IMPORTED_MODULE_0___default().Component));\n\nvar Thick = function (_React$Component) {\n  inherits(Thick, _React$Component);\n\n  function Thick(props) {\n    classCallCheck(this, Thick);\n\n    var _this = possibleConstructorReturn(this, (Thick.__proto__ || Object.getPrototypeOf(Thick)).call(this, props));\n\n    _this.hue = 0;\n    _this.index = 0;\n    _this.colorTemplate = \"hsla(hue,80%,50%, 0.75)\";\n    _this.renderProton = _this.renderProton.bind(_this);\n    return _this;\n  }\n\n  createClass(Thick, [{\n    key: \"onCanvasDidMount\",\n    value: function onCanvasDidMount(canvas) {\n      if (this.props.color) {\n        canvas.style.backgroundColor = this.props.color;\n      }\n    }\n  }, {\n    key: \"onCanvasInited\",\n    value: function onCanvasInited(canvas, width, height) {\n      this.canvas = canvas;\n      this.createProton(canvas, width, height);\n      raf_manager__WEBPACK_IMPORTED_MODULE_1___default().add(this.renderProton);\n    }\n  }, {\n    key: \"onResize\",\n    value: function onResize(width, height) {\n      this.crossZoneBehaviour.zone.width = width;\n      this.crossZoneBehaviour.zone.height = height;\n      this.proton.renderers[0].resize(width, height);\n    }\n  }, {\n    key: \"createProton\",\n    value: function createProton(canvas, width, height) {\n      this.proton = new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default())();\n\n      var emitter = new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Emitter)();\n      emitter.damping = 0.008;\n      emitter.rate = new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Rate)(this.props.num ? this.props.num : 150);\n\n      // Initialize\n      emitter.addInitialize(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Mass)(1));\n      emitter.addInitialize(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Radius)(8));\n      emitter.addInitialize(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().V)(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Span)(0.1, 0.5), new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Span)(0, 360), \"polar\"));\n      emitter.addInitialize(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Position)(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().CircleZone)(canvas.width / 2, canvas.height / 2, 100)));\n\n      // Behaviour\n      var crossZoneBehaviour = new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().CrossZone)(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().RectZone)(0, 0, canvas.width, canvas.height), \"cross\");\n      emitter.addBehaviour(crossZoneBehaviour);\n      this.repulsion = new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Repulsion)({\n        x: canvas.width / 2,\n        y: canvas.height / 2 - 100\n      }, 3, 300);\n\n      this.attraction = new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Attraction)({\n        x: canvas.width / 2,\n        y: canvas.height / 2\n      }, 3, 200);\n      emitter.addBehaviour(this.attraction, this.repulsion);\n      emitter.addBehaviour(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Color)(\"random\"));\n      emitter.addBehaviour(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().RandomDrift)(20, 15, 0.15));\n\n      emitter.emit(\"once\");\n      this.proton.addEmitter(emitter);\n      this.proton.addRenderer(this.createRenderer(canvas));\n      this.crossZoneBehaviour = crossZoneBehaviour;\n    }\n  }, {\n    key: \"createRenderer\",\n    value: function createRenderer(canvas) {\n      var _this2 = this;\n\n      var context = canvas.getContext(\"2d\");\n      var renderer = new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().CanvasRenderer)(canvas);\n\n      renderer.onProtonUpdate = function () {\n        _this2.hue += 1;\n        context.fillStyle = getColor(_this2.props.color, 0.02) || \"rgba(0, 0, 0, 0.02)\";\n        context.fillRect(0, 0, canvas.width, canvas.height);\n      };\n\n      renderer.onParticleCreated = function (particle) {\n        particle.data.begin = proton_engine__WEBPACK_IMPORTED_MODULE_2___default().MathUtil.randomAToB(1, 120);\n        particle.data.tha = proton_engine__WEBPACK_IMPORTED_MODULE_2___default().MathUtil.randomAToB(0, Math.PI * 2);\n      };\n\n      renderer.onParticleUpdate = function (particle) {\n        var hue = particle.data.begin + _this2.hue;\n        particle.color = _this2.colorTemplate.replace(\"hue\", hue % 360);\n\n        var ratio = 3 / 4;\n        var radius = particle.radius * (1 - ratio) * Math.cos(particle.data.tha += 0.01) + particle.radius * ratio;\n\n        context.beginPath();\n        context.fillStyle = particle.color;\n        context.arc(particle.p.x, particle.p.y, radius, 0, Math.PI * 2, true);\n        context.closePath();\n        context.fill();\n      };\n\n      return renderer;\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      try {\n        raf_manager__WEBPACK_IMPORTED_MODULE_1___default().remove(this.renderProton);\n        this.proton.destroy();\n      } catch (e) {}\n    }\n  }, {\n    key: \"renderProton\",\n    value: function renderProton() {\n      var canvas = this.canvas;\n      this.proton.update();\n      if (this.index % 200 === 0) {\n        this.attraction.targetPosition.x = Math.random() * canvas.width;\n        this.attraction.targetPosition.y = Math.random() * canvas.height;\n\n        this.repulsion.targetPosition.x = Math.random() * canvas.width;\n        this.repulsion.targetPosition.y = Math.random() * canvas.height;\n      }\n\n      this.index++;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return react__WEBPACK_IMPORTED_MODULE_0___default().createElement(Canvas, { bg: this.props.bg,\n        onCanvasDidMount: this.onCanvasDidMount.bind(this),\n        onCanvasInited: this.onCanvasInited.bind(this),\n        onResize: this.onResize.bind(this)\n      });\n    }\n  }]);\n  return Thick;\n}((react__WEBPACK_IMPORTED_MODULE_0___default().Component));\n\nvar Square = function (_React$Component) {\n  inherits(Square, _React$Component);\n\n  function Square(props) {\n    classCallCheck(this, Square);\n\n    var _this = possibleConstructorReturn(this, (Square.__proto__ || Object.getPrototypeOf(Square)).call(this, props));\n\n    _this.colors = [\"#fad390\", \"#81ecec\", \"#ffffff\", \"#badc58\", \"#f9ca24\", \"#FEA47F\"];\n    _this.renderProton = _this.renderProton.bind(_this);\n    return _this;\n  }\n\n  createClass(Square, [{\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      try {\n        raf_manager__WEBPACK_IMPORTED_MODULE_1___default().remove(this.renderProton);\n        this.proton.destroy();\n      } catch (e) {}\n    }\n  }, {\n    key: \"onCanvasDidMount\",\n    value: function onCanvasDidMount(canvas) {}\n  }, {\n    key: \"onCanvasInited\",\n    value: function onCanvasInited(canvas, width, height) {\n      this.createProton(canvas, width, height);\n      raf_manager__WEBPACK_IMPORTED_MODULE_1___default().add(this.renderProton);\n    }\n  }, {\n    key: \"onResize\",\n    value: function onResize(width, height) {\n      var dis = 150;\n      this.crossZoneBehaviour.zone.width = width + 2 * dis;\n      this.crossZoneBehaviour.zone.height = height + 2 * dis;\n      this.proton.renderers[0].resize(width, height);\n    }\n  }, {\n    key: \"createProton\",\n    value: function createProton(canvas, width, height) {\n      this.proton = new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default())();\n      var emitter = new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Emitter)();\n      emitter.rate = new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Rate)(this.props.num ? this.props.num : 50);\n      emitter.damping = 0;\n\n      emitter.addInitialize(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Mass)(1));\n      emitter.addInitialize(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Radius)(4, 70));\n      emitter.addInitialize(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Velocity)(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Span)(2, 10), new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Span)(0), \"polar\"));\n      emitter.addInitialize(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Position)(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().LineZone)(0, canvas.height, canvas.width, canvas.height)));\n\n      var dis = 150;\n      var crossZoneBehaviour = new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().CrossZone)(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().RectZone)(0 - dis, 0 - dis, canvas.width + 2 * dis, canvas.height + 2 * dis), \"cross\");\n      emitter.addBehaviour(crossZoneBehaviour);\n      emitter.addBehaviour(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Alpha)(proton_engine__WEBPACK_IMPORTED_MODULE_2___default().getSpan(0.1, 0.55)));\n      emitter.addBehaviour(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Color)(this.colors));\n\n      emitter.emit(\"once\");\n      this.proton.addEmitter(emitter);\n      var renderer = this.createRenderer(canvas);\n      this.proton.addRenderer(renderer);\n\n      this.crossZoneBehaviour = crossZoneBehaviour;\n      emitter.preEmit(2);\n    }\n  }, {\n    key: \"createRenderer\",\n    value: function createRenderer(canvas) {\n      var context = canvas.getContext(\"2d\");\n      var renderer = new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().CustomRenderer)();\n\n      renderer.onProtonUpdate = function () {\n        context.clearRect(0, 0, canvas.width, canvas.height);\n      };\n\n      renderer.onParticleCreated = function (particle) {\n        var w = particle.radius || 60;\n        var h = proton_engine__WEBPACK_IMPORTED_MODULE_2___default().MathUtil.randomAToB(100, 200, \"int\");\n        particle.data.w = w;\n        particle.data.h = h;\n      };\n\n      renderer.onParticleUpdate = function (particle) {\n        var w = particle.data.w;\n        var h = particle.data.h;\n        context.save();\n        context.globalAlpha = particle.alpha;\n        context.fillStyle = particle.color;\n\n        context.translate(particle.p.x, particle.p.y);\n        context.rotate(proton_engine__WEBPACK_IMPORTED_MODULE_2___default().MathUtil.degreeTransform(particle.rotation));\n        context.translate(-particle.p.x, -particle.p.y);\n\n        context.beginPath();\n        context.rect(particle.p.x - w / 2, particle.p.y - h / 2, w, h);\n\n        context.closePath();\n        context.fill();\n        context.globalAlpha = 1;\n        context.restore();\n      };\n\n      return renderer;\n    }\n  }, {\n    key: \"renderProton\",\n    value: function renderProton() {\n      this.proton && this.proton.update();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return react__WEBPACK_IMPORTED_MODULE_0___default().createElement(Canvas, { bg: this.props.bg,\n        globalCompositeOperation: \"lighter\",\n        onCanvasDidMount: this.onCanvasDidMount.bind(this),\n        onCanvasInited: this.onCanvasInited.bind(this),\n        onResize: this.onResize.bind(this)\n      });\n    }\n  }]);\n  return Square;\n}((react__WEBPACK_IMPORTED_MODULE_0___default().Component));\n\nvar Cobweb = function (_React$Component) {\n  inherits(Cobweb, _React$Component);\n\n  function Cobweb(props) {\n    classCallCheck(this, Cobweb);\n\n    var _this = possibleConstructorReturn(this, (Cobweb.__proto__ || Object.getPrototypeOf(Cobweb)).call(this, props));\n\n    _this.renderProton = _this.renderProton.bind(_this);\n    return _this;\n  }\n\n  createClass(Cobweb, [{\n    key: \"onCanvasInited\",\n    value: function onCanvasInited(canvas, width, height) {\n      this.createProton(canvas, width, height);\n      raf_manager__WEBPACK_IMPORTED_MODULE_1___default().add(this.renderProton);\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      try {\n        raf_manager__WEBPACK_IMPORTED_MODULE_1___default().remove(this.renderProton);\n        this.proton.destroy();\n      } catch (e) {}\n    }\n  }, {\n    key: \"onResize\",\n    value: function onResize(width, height) {\n      this.crossZoneBehaviour.zone.width = width;\n      this.crossZoneBehaviour.zone.height = height;\n      this.proton.renderers[0].resize(width, height);\n    }\n  }, {\n    key: \"createProton\",\n    value: function createProton(canvas, width, height) {\n      this.proton = new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default())();\n\n      var emitter = new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Emitter)();\n      emitter.rate = new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Rate)(this.props.num ? new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Span)(this.props.num) : new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Span)(100), new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Span)(0.05, 0.2));\n\n      emitter.addInitialize(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Mass)(1));\n      emitter.addInitialize(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Radius)(1, 4));\n      emitter.addInitialize(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Life)(Infinity));\n\n      var pointZone = new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Position)(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().RectZone)(0, 0, width, height));\n      emitter.addInitialize(pointZone);\n      emitter.addInitialize(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Velocity)(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Span)(0.3, 0.6), new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Span)(0, 360), \"polar\"));\n\n      emitter.addBehaviour(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Alpha)(proton_engine__WEBPACK_IMPORTED_MODULE_2___default().getSpan(0.2, 0.9)));\n      emitter.addBehaviour(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Color)(this.props.color || \"#333\"));\n      this.crossZoneBehaviour = new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().CrossZone)(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().RectZone)(0, 0, width, height), \"cross\");\n      emitter.addBehaviour(this.crossZoneBehaviour);\n\n      emitter.emit(\"once\");\n      emitter.damping = 0;\n      this.proton.addEmitter(emitter);\n      this.proton.addRenderer(this.createRenderer(canvas, emitter));\n    }\n  }, {\n    key: \"createRenderer\",\n    value: function createRenderer(canvas, emitter) {\n      var _this2 = this;\n\n      var context = canvas.getContext(\"2d\");\n      var renderer = new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().CanvasRenderer)(canvas);\n      var R = 140;\n\n      renderer.onProtonUpdateAfter = function () {\n        var particles = emitter.particles;\n\n        for (var i = 0; i < particles.length; i++) {\n          for (var j = i + 1; j < particles.length; j++) {\n            var pA = particles[i];\n            var pB = particles[j];\n            var dis = pA.p.distanceTo(pB.p);\n\n            if (dis < R) {\n              var alpha = (1 - dis / R) * 0.5;\n              context.strokeStyle = getColor(_this2.props.color, alpha) || \"rgba(3, 3, 3, \" + alpha + \")\";\n              context.beginPath();\n              context.moveTo(pA.p.x, pA.p.y);\n              context.lineTo(pB.p.x, pB.p.y);\n              context.closePath();\n              context.stroke();\n            }\n          }\n        }\n      };\n\n      return renderer;\n    }\n  }, {\n    key: \"renderProton\",\n    value: function renderProton() {\n      this.proton && this.proton.update();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return react__WEBPACK_IMPORTED_MODULE_0___default().createElement(Canvas, { bg: this.props.bg,\n        globalCompositeOperation: \"darker\",\n        onCanvasInited: this.onCanvasInited.bind(this),\n        onResize: this.onResize.bind(this)\n      });\n    }\n  }]);\n  return Cobweb;\n}((react__WEBPACK_IMPORTED_MODULE_0___default().Component));\n\nvar Circle = function (_React$Component) {\n  inherits(Circle, _React$Component);\n\n  function Circle(props) {\n    classCallCheck(this, Circle);\n\n    var _this = possibleConstructorReturn(this, (Circle.__proto__ || Object.getPrototypeOf(Circle)).call(this, props));\n\n    _this.colors = [\"#74b9ff\", \"#e84393\", \"#6c5ce7\", \"#00b894\", \"#fdcb6e\", \"#006266\", \"#1B1464\"];\n\n    _this.renderProton = _this.renderProton.bind(_this);\n    return _this;\n  }\n\n  createClass(Circle, [{\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      try {\n        raf_manager__WEBPACK_IMPORTED_MODULE_1___default().remove(this.renderProton);\n        this.proton.destroy();\n      } catch (e) {}\n    }\n  }, {\n    key: \"onCanvasInited\",\n    value: function onCanvasInited(canvas, width, height) {\n      this.createProton(canvas, width, height);\n      raf_manager__WEBPACK_IMPORTED_MODULE_1___default().add(this.renderProton);\n    }\n  }, {\n    key: \"onResize\",\n    value: function onResize(width, height) {\n      this.crossZoneBehaviour.zone.width = width;\n      this.crossZoneBehaviour.zone.height = height;\n      this.proton.renderers[0].resize(width, height);\n    }\n  }, {\n    key: \"createProton\",\n    value: function createProton(canvas, width, height) {\n      this.proton = new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default())();\n\n      var emitter = new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Emitter)();\n      emitter.rate = new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Rate)(this.props.num || 20);\n      emitter.damping = 0.008;\n\n      emitter.addInitialize(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Mass)(1));\n      emitter.addInitialize(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Radius)(30, 600));\n      emitter.addInitialize(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Velocity)(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Span)(0.5), new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Span)(0, 360), \"polar\"));\n      emitter.addInitialize(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Position)(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().RectZone)(0, 0, canvas.width, canvas.height)));\n\n      var crossZoneBehaviour = new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().CrossZone)(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().RectZone)(0, 0, canvas.width, canvas.height), \"cross\");\n      emitter.addBehaviour(crossZoneBehaviour);\n      emitter.addBehaviour(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Alpha)(proton_engine__WEBPACK_IMPORTED_MODULE_2___default().getSpan(0.35, 0.55)));\n      emitter.addBehaviour(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Color)(this.getColor()));\n      emitter.addBehaviour(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().RandomDrift)(50, 50, 0.5));\n\n      emitter.emit(\"once\");\n      this.proton.addEmitter(emitter);\n\n      var renderer = new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().CanvasRenderer)(canvas);\n      this.proton.addRenderer(renderer);\n\n      this.crossZoneBehaviour = crossZoneBehaviour;\n    }\n  }, {\n    key: \"getColor\",\n    value: function getColor() {\n      var c = this.colors;\n      if (this.props.color) {\n        if (Array.isArray(this.props.color)) {\n          c = this.props.color;\n        } else {\n          c = [this.props.color];\n        }\n      }\n\n      return c;\n    }\n  }, {\n    key: \"renderProton\",\n    value: function renderProton() {\n      this.proton && this.proton.update();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return react__WEBPACK_IMPORTED_MODULE_0___default().createElement(Canvas, { bg: this.props.bg,\n        globalCompositeOperation: \"darken\",\n        onCanvasInited: this.onCanvasInited.bind(this),\n        onResize: this.onResize.bind(this)\n      });\n    }\n  }]);\n  return Circle;\n}((react__WEBPACK_IMPORTED_MODULE_0___default().Component));\n\nvar Tadpole = function (_React$Component) {\n  inherits(Tadpole, _React$Component);\n\n  function Tadpole(props) {\n    classCallCheck(this, Tadpole);\n\n    var _this = possibleConstructorReturn(this, (Tadpole.__proto__ || Object.getPrototypeOf(Tadpole)).call(this, props));\n\n    _this.renderProton = _this.renderProton.bind(_this);\n    return _this;\n  }\n\n  createClass(Tadpole, [{\n    key: \"onCanvasDidMount\",\n    value: function onCanvasDidMount(canvas) {}\n  }, {\n    key: \"onCanvasInited\",\n    value: function onCanvasInited(canvas, width, height) {\n      this.createProton(canvas, width, height);\n      this.renderProton();\n    }\n  }, {\n    key: \"onResize\",\n    value: function onResize(width, height) {\n      this.crossZoneBehaviour.zone.width = width;\n      this.crossZoneBehaviour.zone.height = height;\n      this.proton.renderers[0].resize(width, height);\n    }\n  }, {\n    key: \"createProton\",\n    value: function createProton(canvas, width, height) {\n      this.proton = new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default())();\n\n      var emitter = new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Emitter)();\n      emitter.damping = 0.008;\n      emitter.rate = new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Rate)(this.props.num ? this.props.num : 50);\n      emitter.addInitialize(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Mass)(1));\n      emitter.addInitialize(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Radius)(5, 9));\n      emitter.addInitialize(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Velocity)(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Span)(1.5), new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Span)(0, 360), \"polar\"));\n      emitter.addInitialize(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Position)(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().RectZone)(0, 0, width, height)));\n\n      var mouseInfo = {\n        x: width / 2,\n        y: height / 2\n      };\n\n      var attractionBehaviour = new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Attraction)(mouseInfo, 0, 0);\n      var crossZoneBehaviour = new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().CrossZone)(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().RectZone)(0, 0, canvas.width, canvas.height), \"bound\");\n      emitter.addBehaviour(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Color)(this.props.color || \"#bbb\"));\n      //emitter.addBehaviour(new Proton.Alpha(new Proton.Span(0.5, 1)));\n      emitter.addBehaviour(attractionBehaviour, crossZoneBehaviour);\n      emitter.addBehaviour(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().RandomDrift)(15, 15, 0.05));\n      emitter.emit(\"once\");\n\n      this.proton.addEmitter(emitter);\n      this.proton.addRenderer(this.createRenderer(canvas));\n      this.crossZoneBehaviour = crossZoneBehaviour;\n    }\n  }, {\n    key: \"createRenderer\",\n    value: function createRenderer(canvas) {\n      var jointCount = 10;\n      var delayTime = 8;\n      var context = canvas.getContext(\"2d\");\n      var renderer = new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().CanvasRenderer)(canvas);\n\n      renderer.onProtonUpdate = function () {\n        context.clearRect(0, 0, canvas.width, canvas.height);\n      };\n\n      renderer.onParticleCreated = function (particle) {\n        particle.data.points = [];\n        particle.data.index = 0;\n      };\n\n      renderer.onParticleUpdate = function (particle) {\n        drawTadpoleTail(particle);\n        if (particle.data.index % delayTime === 0) fillPointsData(particle);\n        drawTadpoleHead(particle);\n        particle.data.index++;\n      };\n\n      var fillPointsData = function fillPointsData(particle) {\n        particle.data.points.unshift(particle.p.y);\n        particle.data.points.unshift(particle.p.x);\n\n        if (particle.data.points.length > jointCount) {\n          particle.data.points.pop();\n          particle.data.points.pop();\n        }\n      };\n\n      var drawTadpoleHead = function drawTadpoleHead(particle) {\n        context.fillStyle = particle.color;\n        context.beginPath();\n        context.arc(particle.p.x, particle.p.y, particle.radius, 0, Math.PI * 2, true);\n        context.closePath();\n        context.fill();\n      };\n\n      var drawTadpoleTail = function drawTadpoleTail(particle) {\n        context.beginPath();\n        context.strokeStyle = particle.color;\n\n        context.moveTo(particle.p.x, particle.p.y);\n\n        var l = particle.data.points.length;\n        for (var i = 0; i < l; i += 2) {\n          var x = particle.data.points[i];\n          var y = particle.data.points[i + 1];\n\n          context.lineWidth = linearEvaluation(i, l);\n          context.lineTo(x, y);\n          context.stroke();\n        }\n      };\n\n      var linearEvaluation = function linearEvaluation(i, l) {\n        if (l <= 2) return 1;\n\n        var max = 6;\n        var A = (max - 1) / (2 / l - 1);\n        var B = 1 - A;\n        var X = (i + 2) / l;\n        var val = A * X + B;\n        val = val >> 0;\n\n        return val;\n      };\n\n      return renderer;\n    }\n  }, {\n    key: \"renderProton\",\n    value: function renderProton() {\n      var _this2 = this;\n\n      raf_manager__WEBPACK_IMPORTED_MODULE_1___default().add(function () {\n        _this2.proton.update();\n        //this.proton.stats.update();\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return react__WEBPACK_IMPORTED_MODULE_0___default().createElement(Canvas, { bg: this.props.bg,\n        globalCompositeOperation: \"darker\",\n        onCanvasDidMount: this.onCanvasDidMount.bind(this),\n        onCanvasInited: this.onCanvasInited.bind(this),\n        onResize: this.onResize.bind(this)\n      });\n    }\n  }]);\n  return Tadpole;\n}((react__WEBPACK_IMPORTED_MODULE_0___default().Component));\n\nvar COLOR = [\"#f6b93b\", \"#18dcff\", \"#cd84f1\", \"#ED4C67\", \"#ffffff\", \"#b71540\", \"#32ff7e\", \"#ff3838\"];\n\nvar Polygon = function (_React$Component) {\n  inherits(Polygon, _React$Component);\n\n  function Polygon(props) {\n    classCallCheck(this, Polygon);\n\n    var _this = possibleConstructorReturn(this, (Polygon.__proto__ || Object.getPrototypeOf(Polygon)).call(this, props));\n\n    _this.renderProton = _this.renderProton.bind(_this);\n    return _this;\n  }\n\n  createClass(Polygon, [{\n    key: \"onCanvasInited\",\n    value: function onCanvasInited(canvas, width, height) {\n      this.createProton(canvas);\n      this.createEmitter({\n        canvas: canvas,\n        x: width / 2,\n        y: height / 2,\n        mainEmitter: true,\n        zone: \"bound\"\n      });\n\n      raf_manager__WEBPACK_IMPORTED_MODULE_1___default().add(this.renderProton);\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      try {\n        raf_manager__WEBPACK_IMPORTED_MODULE_1___default().remove(this.renderProton);\n        this.proton.destroy();\n      } catch (e) {}\n    }\n  }, {\n    key: \"onResize\",\n    value: function onResize() {}\n  }, {\n    key: \"createProton\",\n    value: function createProton(canvas) {\n      this.proton = new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default())();\n      var renderer = this.createRenderer(canvas);\n      this.proton.addRenderer(renderer);\n    }\n  }, {\n    key: \"createRenderer\",\n    value: function createRenderer(canvas) {\n      var context = canvas.getContext(\"2d\");\n      var renderer = new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().CustomRenderer)();\n\n      renderer.onProtonUpdate = function () {\n        context.clearRect(0, 0, canvas.width, canvas.height);\n      };\n\n      renderer.onParticleCreated = function (particle) {\n        particle.data.count = proton_engine__WEBPACK_IMPORTED_MODULE_2___default().MathUtil.randomAToB(3, 10, true);\n      };\n\n      renderer.onParticleUpdate = function (particle) {\n        context.save();\n        context.globalAlpha = particle.alpha;\n        context.fillStyle = particle.color;\n\n        context.translate(particle.p.x, particle.p.y);\n        context.rotate(proton_engine__WEBPACK_IMPORTED_MODULE_2___default().MathUtil.degreeTransform(particle.rotation));\n        context.translate(-particle.p.x, -particle.p.y);\n\n        context.beginPath();\n        drawPolygon(particle, particle.data.count);\n\n        context.closePath();\n        context.fill();\n        context.globalAlpha = 1;\n        context.restore();\n      };\n\n      renderer.onParticleDead = function (particle) {};\n\n      var drawPolygon = function drawPolygon(particle, count) {\n        if (count >= 7) {\n          context.arc(particle.p.x, particle.p.y, particle.radius, 0, Math.PI * 2, true);\n        } else {\n          var radius = particle.radius;\n\n          for (var i = 0; i <= count; i++) {\n            var x = particle.p.x + radius * Math.cos(Math.PI / 180 * 360 / count * i);\n            var y = particle.p.y + radius * Math.sin(Math.PI / 180 * 360 / count * i);\n\n            if (i === 0) context.moveTo(x, y);else context.lineTo(x, y);\n          }\n        }\n      };\n\n      return renderer;\n    }\n  }, {\n    key: \"createEmitter\",\n    value: function createEmitter(_ref) {\n      var mainEmitter = _ref.mainEmitter,\n          canvas = _ref.canvas,\n          x = _ref.x,\n          y = _ref.y,\n          radius = _ref.radius,\n          _ref$color = _ref.color,\n          color = _ref$color === undefined ? COLOR : _ref$color,\n          _ref$zone = _ref.zone,\n          zone = _ref$zone === undefined ? \"dead\" : _ref$zone,\n          _ref$once = _ref.once,\n          once = _ref$once === undefined ? \"all\" : _ref$once,\n          _ref$alpha = _ref.alpha,\n          alpha = _ref$alpha === undefined ? 0.85 : _ref$alpha,\n          _ref$gravity = _ref.gravity,\n          gravity = _ref$gravity === undefined ? 3.5 : _ref$gravity;\n\n      var emitter = this.proton.pool.get((proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Emitter));\n\n      if (!emitter.completed) {\n        emitter.rate = new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Rate)(this.props.num ? new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Span)(this.props.num) : new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Span)(4, 9), new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Span)(1.6, 2.2));\n\n        var radiusInit = mainEmitter ? new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Radius)(10, 110) : new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Radius)(3, radius);\n        emitter.addInitialize(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Mass)(1));\n        emitter.addInitialize(radiusInit);\n        emitter.addInitialize(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Life)(3, 6));\n        emitter.addInitialize(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Velocity)(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Span)(4, 6), new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Span)(-90, 90), \"polar\"));\n\n        emitter.addBehaviour(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Alpha)(alpha, 0.2));\n        emitter.addBehaviour(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Color)(color));\n        emitter.addBehaviour(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Scale)(1, 0.3));\n        emitter.addBehaviour(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Rotate)());\n        emitter.addBehaviour(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Gravity)(gravity));\n\n        emitter.addBehaviour(this.customDeadBehaviour(canvas));\n        emitter.addBehaviour(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().CrossZone)(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().RectZone)(0, 0, canvas.width, canvas.height), zone));\n      }\n\n      emitter.p.x = x;\n      emitter.p.y = y;\n      if (once === \"once\") emitter.emit(\"once\");else emitter.emit();\n\n      this.proton.addEmitter(emitter);\n      //this.expireEmitter(emitter);\n    }\n  }, {\n    key: \"expireEmitter\",\n    value: function expireEmitter(emitter) {\n      var _this2 = this;\n\n      setTimeout(function () {\n        emitter.completed = true;\n        _this2.proton.pool.expire(emitter);\n        _this2.proton.removeEmitter(emitter);\n      }, 500);\n    }\n  }, {\n    key: \"customDeadBehaviour\",\n    value: function customDeadBehaviour(canvas) {\n      var _this3 = this;\n\n      return {\n        initialize: function initialize(particle) {\n          particle.data = particle.data || {};\n          particle.data.oldRadius = particle.radius;\n          particle.data.emitterCount = 0;\n        },\n        applyBehaviour: function applyBehaviour(particle) {\n          if (particle.radius < 5) return;\n          if (particle.data.emitterCount >= 2) return;\n\n          if (particle.radius <= 1 / 3 * particle.data.oldRadius) {\n            particle.data.emitterCount++;\n            _this3.createEmitter({\n              canvas: canvas,\n              x: particle.p.x,\n              y: particle.p.y,\n              radius: particle.radius * (1 / 2),\n              alpha: 0.5,\n              gravity: 5,\n              color: particle.color,\n              once: \"once\"\n            });\n          }\n        }\n      };\n    }\n  }, {\n    key: \"renderProton\",\n    value: function renderProton() {\n      this.proton && this.proton.update();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return react__WEBPACK_IMPORTED_MODULE_0___default().createElement(Canvas, { bg: this.props.bg,\n        globalCompositeOperation: \"darker\",\n        onCanvasInited: this.onCanvasInited.bind(this),\n        onResize: this.onResize.bind(this)\n      });\n    }\n  }]);\n  return Polygon;\n}((react__WEBPACK_IMPORTED_MODULE_0___default().Component));\n\nvar Fountain = function (_React$Component) {\n  inherits(Fountain, _React$Component);\n\n  function Fountain(props) {\n    classCallCheck(this, Fountain);\n\n    var _this = possibleConstructorReturn(this, (Fountain.__proto__ || Object.getPrototypeOf(Fountain)).call(this, props));\n\n    _this.colors = [\"#529B88\", \"#CDD180\", \"#FFFA32\", \"#FB6255\", \"#FB4A53\", \"#FF4E50\", \"#F9D423\"];\n    _this.renderProton = _this.renderProton.bind(_this);\n    return _this;\n  }\n\n  createClass(Fountain, [{\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      try {\n        raf_manager__WEBPACK_IMPORTED_MODULE_1___default().remove(this.renderProton);\n        this.proton.destroy();\n      } catch (e) {}\n    }\n  }, {\n    key: \"onCanvasInited\",\n    value: function onCanvasInited(canvas, width, height) {\n      this.createProton(canvas, width, height);\n      raf_manager__WEBPACK_IMPORTED_MODULE_1___default().add(this.renderProton);\n    }\n  }, {\n    key: \"onResize\",\n    value: function onResize() {}\n  }, {\n    key: \"createProton\",\n    value: function createProton(canvas, width, height) {\n      this.proton = new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default())();\n      var emitter = new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Emitter)();\n      emitter.rate = new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Rate)(this.props.num ? new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Span)(this.props.num) : new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Span)(4, 8), new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Span)(0.1, 0.25));\n\n      emitter.addInitialize(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Mass)(1));\n      emitter.addInitialize(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Radius)(20, 200));\n      emitter.addInitialize(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Life)(2, 4));\n      emitter.addInitialize(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Velocity)(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Span)(4, 7), new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Span)(0, 360), \"polar\"));\n      emitter.addInitialize(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Position)(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().CircleZone)(width / 2, height / 2, 100)));\n\n      emitter.addBehaviour(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Alpha)(1, 0));\n      emitter.addBehaviour(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Scale)(0.2, 1));\n      emitter.addBehaviour(this.createCustomBehaviour());\n      emitter.addBehaviour(new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Color)(this.colors, \"random\"));\n      emitter.emit();\n      this.proton.addEmitter(emitter);\n\n      var renderer = new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().CanvasRenderer)(canvas);\n      this.proton.addRenderer(renderer);\n    }\n  }, {\n    key: \"createCustomBehaviour\",\n    value: function createCustomBehaviour() {\n      var f = 10 * 100;\n      return {\n        initialize: function initialize(particle) {\n          particle.f = new (proton_engine__WEBPACK_IMPORTED_MODULE_2___default().Vector2D)(0, 0);\n        },\n        applyBehaviour: function applyBehaviour(particle) {\n          var length = particle.v.length() / 1000;\n          var gradient = particle.v.getGradient();\n          gradient += 3.14 / 2;\n\n          particle.f.x = f * length * Math.cos(gradient);\n          particle.f.y = f * length * Math.sin(gradient);\n          particle.a.add(particle.f);\n        }\n      };\n    }\n  }, {\n    key: \"renderProton\",\n    value: function renderProton() {\n      this.proton && this.proton.update();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return react__WEBPACK_IMPORTED_MODULE_0___default().createElement(Canvas, { bg: this.props.bg,\n        globalCompositeOperation: \"xor\",\n        onCanvasInited: this.onCanvasInited.bind(this),\n        onResize: this.onResize.bind(this)\n      });\n    }\n  }]);\n  return Fountain;\n}((react__WEBPACK_IMPORTED_MODULE_0___default().Component));\n\nvar ParticlesBg = function (_Component) {\n  inherits(ParticlesBg, _Component);\n\n  function ParticlesBg(props) {\n    classCallCheck(this, ParticlesBg);\n    return possibleConstructorReturn(this, (ParticlesBg.__proto__ || Object.getPrototypeOf(ParticlesBg)).call(this, props));\n  }\n\n  createClass(ParticlesBg, [{\n    key: \"getRandom\",\n    value: function getRandom() {\n      var _props = this.props,\n          num = _props.num,\n          bg = _props.bg,\n          color = _props.color;\n\n      // Code source from here, thanks author\n      // https://github.com/drawcall/Proton/blob/gh-pages/source/src/utils/Rand.js\n\n      if (!this.random) {\n        this.random = new Rand();\n        this.random.set(0.25, react__WEBPACK_IMPORTED_MODULE_0___default().createElement(Color, { num: num, bg: bg, color: color }));\n        this.random.set(0.2, react__WEBPACK_IMPORTED_MODULE_0___default().createElement(Ball, { num: num, bg: bg, color: color }));\n        this.random.set(0.2, react__WEBPACK_IMPORTED_MODULE_0___default().createElement(Lines, { num: num, bg: bg, color: color }));\n        this.random.set(0.16, react__WEBPACK_IMPORTED_MODULE_0___default().createElement(Thick, { num: num, bg: bg, color: color }));\n        this.random.set(0.18, react__WEBPACK_IMPORTED_MODULE_0___default().createElement(Circle, { num: num, bg: bg, color: color }));\n        this.random.set(0.04, react__WEBPACK_IMPORTED_MODULE_0___default().createElement(Cobweb, { num: num, bg: bg, color: color }));\n        this.random.set(0.1, react__WEBPACK_IMPORTED_MODULE_0___default().createElement(Polygon, { num: num, bg: bg, color: color }));\n        this.random.set(0.08, react__WEBPACK_IMPORTED_MODULE_0___default().createElement(Square, { num: num, bg: bg, color: color }));\n        this.random.set(0.18, react__WEBPACK_IMPORTED_MODULE_0___default().createElement(Tadpole, { num: num, bg: bg, color: color }));\n        this.random.set(0.15, react__WEBPACK_IMPORTED_MODULE_0___default().createElement(Fountain, { num: num, bg: bg, color: color }));\n      }\n      return this.random.getResult();\n    }\n  }, {\n    key: \"getBgParticles\",\n    value: function getBgParticles() {\n      var _props2 = this.props,\n          type = _props2.type,\n          num = _props2.num,\n          bg = _props2.bg,\n          color = _props2.color,\n          config = _props2.config;\n\n\n      var particles = void 0;\n      switch (String(type).toLowerCase()) {\n        case \"color\":\n          particles = react__WEBPACK_IMPORTED_MODULE_0___default().createElement(Color, { num: num, bg: bg, color: color });\n          break;\n        case \"ball\":\n          particles = react__WEBPACK_IMPORTED_MODULE_0___default().createElement(Ball, { num: num, bg: bg, color: color });\n          break;\n        case \"lines\":\n          particles = react__WEBPACK_IMPORTED_MODULE_0___default().createElement(Lines, { num: num, bg: bg, color: color });\n          break;\n        case \"thick\":\n          particles = react__WEBPACK_IMPORTED_MODULE_0___default().createElement(Thick, { num: num, bg: bg, color: color });\n          break;\n        case \"circle\":\n          particles = react__WEBPACK_IMPORTED_MODULE_0___default().createElement(Circle, { num: num, bg: bg, color: color });\n          break;\n        case \"cobweb\":\n          particles = react__WEBPACK_IMPORTED_MODULE_0___default().createElement(Cobweb, { num: num, bg: bg, color: color });\n          break;\n        case \"polygon\":\n          particles = react__WEBPACK_IMPORTED_MODULE_0___default().createElement(Polygon, { num: num, bg: bg, color: color });\n          break;\n        case \"square\":\n          particles = react__WEBPACK_IMPORTED_MODULE_0___default().createElement(Square, { num: num, bg: bg, color: color });\n          break;\n        case \"tadpole\":\n          particles = react__WEBPACK_IMPORTED_MODULE_0___default().createElement(Tadpole, { num: num, bg: bg, color: color });\n          break;\n        case \"fountain\":\n          particles = react__WEBPACK_IMPORTED_MODULE_0___default().createElement(Fountain, { num: num, bg: bg, color: color });\n          break;\n        case \"custom\":\n          particles = react__WEBPACK_IMPORTED_MODULE_0___default().createElement(Color$1, { bg: bg, config: config });\n          break;\n        case \"random\":\n          particles = this.getRandom(num);\n          break;\n\n        default:\n          particles = react__WEBPACK_IMPORTED_MODULE_0___default().createElement(Color, { num: num, bg: bg, color: color });\n          break;\n      }\n\n      return particles;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var particles = this.getBgParticles();\n      return react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\n        (react__WEBPACK_IMPORTED_MODULE_0___default().Fragment),\n        null,\n        particles\n      );\n    }\n  }]);\n  return ParticlesBg;\n}(react__WEBPACK_IMPORTED_MODULE_0__.Component);\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (ParticlesBg);\n//# sourceMappingURL=index.es.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvcGFydGljbGVzLWJnL2Rpc3QvaW5kZXguZXMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUF5QztBQUNKO0FBQ0Y7O0FBRW5DO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxvQkFBb0Isa0JBQWtCO0FBQ3RDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7O0FBRWI7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSw0QkFBNEIsc0JBQXNCO0FBQ2xEO0FBQ0E7O0FBRUEsNkJBQTZCLHVCQUF1QjtBQUNwRDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLDRCQUE0QixzQkFBc0I7QUFDbEQ7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLENBQUM7O0FBRUQ7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQSxtQkFBbUI7QUFDbkIsc0JBQXNCLHNEQUFlO0FBQ3JDO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPOztBQUVQO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWU7QUFDZjtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0EsTUFBTSx3REFBZ0I7QUFDdEI7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBLE1BQU0sdURBQWU7QUFDckI7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBOztBQUVBLG9CQUFvQjs7QUFFcEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULFFBQVE7QUFDUjtBQUNBOztBQUVBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBLGFBQWEsMERBQW1CLGFBQWE7QUFDN0M7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0EsR0FBRztBQUNIO0FBQ0EsQ0FBQyxDQUFDLHdEQUFlOztBQUVqQjtBQUNBLDhCQUE4QixFQUFFLFVBQVUsRUFBRSxVQUFVLEVBQUU7QUFDeEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTSxzREFBYztBQUNwQjtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxRQUFRLHlEQUFpQjtBQUN6QjtBQUNBLFFBQVE7QUFDUjtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLHdCQUF3QixzREFBTTs7QUFFOUIsd0JBQXdCLDhEQUFjO0FBQ3RDLHlCQUF5QiwyREFBVyxzQkFBc0IsMkRBQVcsdUJBQXVCLDJEQUFXLFlBQVksMkRBQVc7O0FBRTlILGdDQUFnQywyREFBVztBQUMzQyxnQ0FBZ0MsNkRBQWE7QUFDN0MsZ0NBQWdDLDJEQUFXO0FBQzNDLGdDQUFnQywrREFBZSxLQUFLLDJEQUFXLFlBQVksMkRBQVc7O0FBRXRGLCtCQUErQiw0REFBWTtBQUMzQywrQkFBK0IsNERBQVk7QUFDM0MsK0JBQStCLDREQUFZO0FBQzNDLCtCQUErQiw4REFBYztBQUM3QywrQkFBK0IsZ0VBQWdCO0FBQy9DO0FBQ0EsK0JBQStCLGdFQUFnQixLQUFLLCtEQUFlOztBQUVuRTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSx5QkFBeUIscUVBQXFCO0FBQzlDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxvREFBb0Q7QUFDcEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBLDRCQUE0Qiw4REFBYztBQUMxQyw2QkFBNkIsMkRBQVcsS0FBSywyREFBVyxZQUFZLDJEQUFXOztBQUUvRSxvQ0FBb0MsMkRBQVc7QUFDL0MseUNBQXlDLDZEQUFhO0FBQ3REO0FBQ0Esb0NBQW9DLDJEQUFXO0FBQy9DLG9DQUFvQyx3REFBUSxLQUFLLDJEQUFXLGNBQWMsMkRBQVc7O0FBRXJGLHVDQUF1Qyw0REFBWTtBQUNuRCxtQ0FBbUMsNERBQVk7QUFDL0M7QUFDQSxtQ0FBbUMsOERBQWM7QUFDakQsbUNBQW1DLGdFQUFnQjtBQUNuRCxtQ0FBbUMsZ0VBQWdCLEtBQUssK0RBQWU7QUFDdkU7O0FBRUE7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBLGFBQWEsMERBQW1CLFdBQVc7QUFDM0M7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0EsR0FBRztBQUNIO0FBQ0EsQ0FBQyxDQUFDLHdEQUFlOztBQUVqQjtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRLHlEQUFpQjtBQUN6QjtBQUNBLFFBQVE7QUFDUjtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxNQUFNLHNEQUFjO0FBQ3BCO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBLHdCQUF3QixzREFBTTtBQUM5Qix3QkFBd0IsOERBQWM7QUFDdEMseUJBQXlCLDJEQUFXLHNCQUFzQiwyREFBVyx1QkFBdUIsMkRBQVcsWUFBWSwyREFBVzs7QUFFOUgsZ0NBQWdDLDJEQUFXO0FBQzNDLGdDQUFnQyw2REFBYTtBQUM3QyxnQ0FBZ0MsMkRBQVc7QUFDM0MsZ0NBQWdDLCtEQUFlLEtBQUssK0RBQWU7O0FBRW5FLCtCQUErQiw0REFBWSxpQkFBaUIsbUVBQW1CO0FBQy9FLCtCQUErQiw0REFBWSxpQkFBaUIsbUVBQW1CO0FBQy9FLCtCQUErQiw0REFBWTs7QUFFM0M7QUFDQTs7QUFFQSx5QkFBeUIscUVBQXFCO0FBQzlDO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBLGFBQWEsMERBQW1CLFdBQVc7QUFDM0M7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0EsR0FBRztBQUNIO0FBQ0EsQ0FBQyxDQUFDLHdEQUFlOztBQUVqQjtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IseURBQWlCO0FBQ2pDO0FBQ0EsY0FBYztBQUNkO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLFlBQVksc0RBQWM7QUFDMUI7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCLDJEQUFXO0FBQ3RDLGNBQWM7QUFDZDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsY0FBYztBQUNkO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLDhCQUE4QixzREFBTTtBQUNwQztBQUNBO0FBQ0EsOEJBQThCLG9FQUFvQjtBQUNsRCxjQUFjO0FBQ2QsOEJBQThCLDhEQUFjO0FBQzVDO0FBQ0EsK0JBQStCLDJEQUFXOztBQUUxQyxzQ0FBc0MsMkRBQVc7QUFDakQsc0NBQXNDLDZEQUFhO0FBQ25ELHNDQUFzQywyREFBVztBQUNqRCxzQ0FBc0MsK0RBQWU7QUFDckQsZ0RBQWdELDJEQUFXOztBQUUzRDtBQUNBO0FBQ0EsMEJBQTBCLCtEQUFlLEtBQUssK0RBQWU7QUFDN0QsY0FBYztBQUNkLDBCQUEwQiwrREFBZSxLQUFLLCtEQUFlO0FBQzdELGNBQWM7QUFDZDtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQSxxQ0FBcUMsNERBQVksMkJBQTJCLDREQUFZO0FBQ3hGLHFDQUFxQyw0REFBWSwyQkFBMkIsNERBQVk7QUFDeEYscUNBQXFDLDREQUFZLDJCQUEyQiw0REFBWTs7QUFFeEY7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSw2Q0FBNkMsNkRBQWE7QUFDMUQsa0JBQWtCO0FBQ2xCLDZDQUE2Qyw2REFBYTtBQUMxRDtBQUNBOztBQUVBLDJCQUEyQiwrREFBZTtBQUMxQyx5Q0FBeUMsZ0VBQWdCO0FBQ3pEOztBQUVBLCtDQUErQyxrRUFBa0I7QUFDakUsMENBQTBDLHdEQUFRO0FBQ2xELDBDQUEwQyx3REFBUTs7QUFFbEQ7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0JBQStCLHFFQUFxQjs7QUFFcEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7O0FBRUEsbUJBQW1CLDBEQUFtQjtBQUN0QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0EsS0FBSztBQUNMO0FBQ0EsQ0FBQyxDQUFDLHdEQUFlOztBQUVqQjtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLFFBQVEseURBQWlCO0FBQ3pCO0FBQ0EsUUFBUTtBQUNSO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLE1BQU0sc0RBQWM7QUFDcEI7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSx3QkFBd0Isc0RBQU07O0FBRTlCLHdCQUF3Qiw4REFBYztBQUN0QztBQUNBLHlCQUF5QiwyREFBVztBQUNwQyxnQ0FBZ0MsMkRBQVc7QUFDM0MsZ0NBQWdDLDZEQUFhO0FBQzdDLGdDQUFnQywrREFBZSxLQUFLLDJEQUFXLFdBQVcsMkRBQVc7QUFDckY7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsb0NBQW9DLGlFQUFpQjtBQUNyRCxtQ0FBbUMsZ0VBQWdCLEtBQUssK0RBQWU7QUFDdkUsK0JBQStCLDREQUFZO0FBQzNDO0FBQ0EsK0JBQStCLGtFQUFrQjtBQUNqRDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBOztBQUVBO0FBQ0EseUJBQXlCLHFFQUFxQjtBQUM5QztBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0EsYUFBYSwwREFBbUIsV0FBVztBQUMzQztBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBLEdBQUc7QUFDSDtBQUNBLENBQUMsQ0FBQyx3REFBZTs7QUFFakI7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU0sc0RBQWM7QUFDcEI7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSx3QkFBd0Isc0RBQU07O0FBRTlCLHdCQUF3Qiw4REFBYztBQUN0QztBQUNBLHlCQUF5QiwyREFBVzs7QUFFcEM7QUFDQSxnQ0FBZ0MsMkRBQVc7QUFDM0MsZ0NBQWdDLDZEQUFhO0FBQzdDLGdDQUFnQyx3REFBUSxLQUFLLDJEQUFXLGdCQUFnQiwyREFBVztBQUNuRixnQ0FBZ0MsK0RBQWUsS0FBSyxpRUFBaUI7O0FBRXJFO0FBQ0EsbUNBQW1DLGdFQUFnQixLQUFLLCtEQUFlO0FBQ3ZFO0FBQ0EsMkJBQTJCLGdFQUFnQjtBQUMzQztBQUNBO0FBQ0EsT0FBTzs7QUFFUCw0QkFBNEIsaUVBQWlCO0FBQzdDO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQSwrQkFBK0IsNERBQVk7QUFDM0MsK0JBQStCLGtFQUFrQjs7QUFFakQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7O0FBRUE7QUFDQSx5QkFBeUIscUVBQXFCOztBQUU5QztBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsOEJBQThCLDZEQUFlO0FBQzdDLDRCQUE0Qiw2REFBZTtBQUMzQzs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxRQUFRLHlEQUFpQjtBQUN6QjtBQUNBLFFBQVE7QUFDUjtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0EsYUFBYSwwREFBbUIsV0FBVztBQUMzQztBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQSxHQUFHO0FBQ0g7QUFDQSxDQUFDLENBQUMsd0RBQWU7O0FBRWpCO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVEseURBQWlCO0FBQ3pCO0FBQ0EsUUFBUTtBQUNSO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsTUFBTSxzREFBYztBQUNwQjtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0Esd0JBQXdCLHNEQUFNO0FBQzlCLHdCQUF3Qiw4REFBYztBQUN0Qyx5QkFBeUIsMkRBQVc7QUFDcEM7O0FBRUEsZ0NBQWdDLDJEQUFXO0FBQzNDLGdDQUFnQyw2REFBYTtBQUM3QyxnQ0FBZ0MsK0RBQWUsS0FBSywyREFBVyxhQUFhLDJEQUFXO0FBQ3ZGLGdDQUFnQywrREFBZSxLQUFLLCtEQUFlOztBQUVuRTtBQUNBLG1DQUFtQyxnRUFBZ0IsS0FBSywrREFBZTtBQUN2RTtBQUNBLCtCQUErQiw0REFBWSxDQUFDLDREQUFjO0FBQzFELCtCQUErQiw0REFBWTs7QUFFM0M7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QixxRUFBcUI7O0FBRTlDO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsZ0JBQWdCLDZEQUFlO0FBQy9CO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSx1QkFBdUIsNkRBQWU7QUFDdEM7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBLGFBQWEsMERBQW1CLFdBQVc7QUFDM0M7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQSxHQUFHO0FBQ0g7QUFDQSxDQUFDLENBQUMsd0RBQWU7O0FBRWpCO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNLHNEQUFjO0FBQ3BCO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLFFBQVEseURBQWlCO0FBQ3pCO0FBQ0EsUUFBUTtBQUNSO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0Esd0JBQXdCLHNEQUFNOztBQUU5Qix3QkFBd0IsOERBQWM7QUFDdEMseUJBQXlCLDJEQUFXLHNCQUFzQiwyREFBVyx1QkFBdUIsMkRBQVcsV0FBVywyREFBVzs7QUFFN0gsZ0NBQWdDLDJEQUFXO0FBQzNDLGdDQUFnQyw2REFBYTtBQUM3QyxnQ0FBZ0MsMkRBQVc7O0FBRTNDLDBCQUEwQiwrREFBZSxLQUFLLCtEQUFlO0FBQzdEO0FBQ0EsZ0NBQWdDLCtEQUFlLEtBQUssMkRBQVcsZ0JBQWdCLDJEQUFXOztBQUUxRiwrQkFBK0IsNERBQVksQ0FBQyw0REFBYztBQUMxRCwrQkFBK0IsNERBQVk7QUFDM0Msb0NBQW9DLGdFQUFnQixLQUFLLCtEQUFlO0FBQ3hFOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBOztBQUVBO0FBQ0EseUJBQXlCLHFFQUFxQjtBQUM5Qzs7QUFFQTtBQUNBOztBQUVBLHdCQUF3QixzQkFBc0I7QUFDOUMsOEJBQThCLHNCQUFzQjtBQUNwRDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBLGFBQWEsMERBQW1CLFdBQVc7QUFDM0M7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0EsR0FBRztBQUNIO0FBQ0EsQ0FBQyxDQUFDLHdEQUFlOztBQUVqQjtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUSx5REFBaUI7QUFDekI7QUFDQSxRQUFRO0FBQ1I7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsTUFBTSxzREFBYztBQUNwQjtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBLHdCQUF3QixzREFBTTs7QUFFOUIsd0JBQXdCLDhEQUFjO0FBQ3RDLHlCQUF5QiwyREFBVztBQUNwQzs7QUFFQSxnQ0FBZ0MsMkRBQVc7QUFDM0MsZ0NBQWdDLDZEQUFhO0FBQzdDLGdDQUFnQywrREFBZSxLQUFLLDJEQUFXLFdBQVcsMkRBQVc7QUFDckYsZ0NBQWdDLCtEQUFlLEtBQUssK0RBQWU7O0FBRW5FLG1DQUFtQyxnRUFBZ0IsS0FBSywrREFBZTtBQUN2RTtBQUNBLCtCQUErQiw0REFBWSxDQUFDLDREQUFjO0FBQzFELCtCQUErQiw0REFBWTtBQUMzQywrQkFBK0Isa0VBQWtCOztBQUVqRDtBQUNBOztBQUVBLHlCQUF5QixxRUFBcUI7QUFDOUM7O0FBRUE7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBLGFBQWEsMERBQW1CLFdBQVc7QUFDM0M7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0EsR0FBRztBQUNIO0FBQ0EsQ0FBQyxDQUFDLHdEQUFlOztBQUVqQjtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0Esd0JBQXdCLHNEQUFNOztBQUU5Qix3QkFBd0IsOERBQWM7QUFDdEM7QUFDQSx5QkFBeUIsMkRBQVc7QUFDcEMsZ0NBQWdDLDJEQUFXO0FBQzNDLGdDQUFnQyw2REFBYTtBQUM3QyxnQ0FBZ0MsK0RBQWUsS0FBSywyREFBVyxXQUFXLDJEQUFXO0FBQ3JGLGdDQUFnQywrREFBZSxLQUFLLCtEQUFlOztBQUVuRTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxvQ0FBb0MsaUVBQWlCO0FBQ3JELG1DQUFtQyxnRUFBZ0IsS0FBSywrREFBZTtBQUN2RSwrQkFBK0IsNERBQVk7QUFDM0M7QUFDQTtBQUNBLCtCQUErQixrRUFBa0I7QUFDakQ7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QixxRUFBcUI7O0FBRTlDO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0Esd0JBQXdCLE9BQU87QUFDL0I7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7O0FBRUEsTUFBTSxzREFBYztBQUNwQjtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSxhQUFhLDBEQUFtQixXQUFXO0FBQzNDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0EsR0FBRztBQUNIO0FBQ0EsQ0FBQyxDQUFDLHdEQUFlOztBQUVqQjs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTzs7QUFFUCxNQUFNLHNEQUFjO0FBQ3BCO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLFFBQVEseURBQWlCO0FBQ3pCO0FBQ0EsUUFBUTtBQUNSO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBLHdCQUF3QixzREFBTTtBQUM5QjtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLHFFQUFxQjs7QUFFOUM7QUFDQTtBQUNBOztBQUVBO0FBQ0EsOEJBQThCLDZEQUFlO0FBQzdDOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsdUJBQXVCLDZEQUFlO0FBQ3RDOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7O0FBRUEsMEJBQTBCLFlBQVk7QUFDdEM7QUFDQTs7QUFFQSw4Q0FBOEM7QUFDOUM7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSx5Q0FBeUMsOERBQWM7O0FBRXZEO0FBQ0EsMkJBQTJCLDJEQUFXLHNCQUFzQiwyREFBVyx1QkFBdUIsMkRBQVcsWUFBWSwyREFBVzs7QUFFaEksMkNBQTJDLDZEQUFhLGdCQUFnQiw2REFBYTtBQUNyRixrQ0FBa0MsMkRBQVc7QUFDN0M7QUFDQSxrQ0FBa0MsMkRBQVc7QUFDN0Msa0NBQWtDLCtEQUFlLEtBQUssMkRBQVcsWUFBWSwyREFBVzs7QUFFeEYsaUNBQWlDLDREQUFZO0FBQzdDLGlDQUFpQyw0REFBWTtBQUM3QyxpQ0FBaUMsNERBQVk7QUFDN0MsaUNBQWlDLDZEQUFhO0FBQzlDLGlDQUFpQyw4REFBYzs7QUFFL0M7QUFDQSxpQ0FBaUMsZ0VBQWdCLEtBQUssK0RBQWU7QUFDckU7O0FBRUE7QUFDQTtBQUNBLGdEQUFnRDs7QUFFaEQ7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0EsYUFBYSwwREFBbUIsV0FBVztBQUMzQztBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQSxHQUFHO0FBQ0g7QUFDQSxDQUFDLENBQUMsd0RBQWU7O0FBRWpCO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVEseURBQWlCO0FBQ3pCO0FBQ0EsUUFBUTtBQUNSO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLE1BQU0sc0RBQWM7QUFDcEI7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0Esd0JBQXdCLHNEQUFNO0FBQzlCLHdCQUF3Qiw4REFBYztBQUN0Qyx5QkFBeUIsMkRBQVcsc0JBQXNCLDJEQUFXLHVCQUF1QiwyREFBVyxZQUFZLDJEQUFXOztBQUU5SCxnQ0FBZ0MsMkRBQVc7QUFDM0MsZ0NBQWdDLDZEQUFhO0FBQzdDLGdDQUFnQywyREFBVztBQUMzQyxnQ0FBZ0MsK0RBQWUsS0FBSywyREFBVyxZQUFZLDJEQUFXO0FBQ3RGLGdDQUFnQywrREFBZSxLQUFLLGlFQUFpQjs7QUFFckUsK0JBQStCLDREQUFZO0FBQzNDLCtCQUErQiw0REFBWTtBQUMzQztBQUNBLCtCQUErQiw0REFBWTtBQUMzQztBQUNBOztBQUVBLHlCQUF5QixxRUFBcUI7QUFDOUM7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCLCtEQUFlO0FBQzFDLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBLGFBQWEsMERBQW1CLFdBQVc7QUFDM0M7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0EsR0FBRztBQUNIO0FBQ0EsQ0FBQyxDQUFDLHdEQUFlOztBQUVqQjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLDhCQUE4QiwwREFBbUIsVUFBVSxnQ0FBZ0M7QUFDM0YsNkJBQTZCLDBEQUFtQixTQUFTLGdDQUFnQztBQUN6Riw2QkFBNkIsMERBQW1CLFVBQVUsZ0NBQWdDO0FBQzFGLDhCQUE4QiwwREFBbUIsVUFBVSxnQ0FBZ0M7QUFDM0YsOEJBQThCLDBEQUFtQixXQUFXLGdDQUFnQztBQUM1Riw4QkFBOEIsMERBQW1CLFdBQVcsZ0NBQWdDO0FBQzVGLDZCQUE2QiwwREFBbUIsWUFBWSxnQ0FBZ0M7QUFDNUYsOEJBQThCLDBEQUFtQixXQUFXLGdDQUFnQztBQUM1Riw4QkFBOEIsMERBQW1CLFlBQVksZ0NBQWdDO0FBQzdGLDhCQUE4QiwwREFBbUIsYUFBYSxnQ0FBZ0M7QUFDOUY7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQiwwREFBbUIsVUFBVSxnQ0FBZ0M7QUFDbkY7QUFDQTtBQUNBLHNCQUFzQiwwREFBbUIsU0FBUyxnQ0FBZ0M7QUFDbEY7QUFDQTtBQUNBLHNCQUFzQiwwREFBbUIsVUFBVSxnQ0FBZ0M7QUFDbkY7QUFDQTtBQUNBLHNCQUFzQiwwREFBbUIsVUFBVSxnQ0FBZ0M7QUFDbkY7QUFDQTtBQUNBLHNCQUFzQiwwREFBbUIsV0FBVyxnQ0FBZ0M7QUFDcEY7QUFDQTtBQUNBLHNCQUFzQiwwREFBbUIsV0FBVyxnQ0FBZ0M7QUFDcEY7QUFDQTtBQUNBLHNCQUFzQiwwREFBbUIsWUFBWSxnQ0FBZ0M7QUFDckY7QUFDQTtBQUNBLHNCQUFzQiwwREFBbUIsV0FBVyxnQ0FBZ0M7QUFDcEY7QUFDQTtBQUNBLHNCQUFzQiwwREFBbUIsWUFBWSxnQ0FBZ0M7QUFDckY7QUFDQTtBQUNBLHNCQUFzQiwwREFBbUIsYUFBYSxnQ0FBZ0M7QUFDdEY7QUFDQTtBQUNBLHNCQUFzQiwwREFBbUIsWUFBWSx3QkFBd0I7QUFDN0U7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxzQkFBc0IsMERBQW1CLFVBQVUsZ0NBQWdDO0FBQ25GO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxhQUFhLDBEQUFtQjtBQUNoQyxRQUFRLHVEQUFjO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0EsQ0FBQyxDQUFDLDRDQUFTOztBQUVYLGlFQUFlLFdBQVcsRUFBQztBQUMzQiIsInNvdXJjZXMiOlsiL1VzZXJzL2NhcnNvbi9EZXNrdG9wL2NvZGUvcHJvamVjdC9wZXJzb25hbC13ZWJzaXRlL25vZGVfbW9kdWxlcy9wYXJ0aWNsZXMtYmcvZGlzdC9pbmRleC5lcy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QsIHsgQ29tcG9uZW50IH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IFJBRk1hbmFnZXIgZnJvbSAncmFmLW1hbmFnZXInO1xuaW1wb3J0IFByb3RvbiBmcm9tICdwcm90b24tZW5naW5lJztcblxudmFyIF90eXBlb2YgPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA9PT0gXCJzeW1ib2xcIiA/IGZ1bmN0aW9uIChvYmopIHtcbiAgcmV0dXJuIHR5cGVvZiBvYmo7XG59IDogZnVuY3Rpb24gKG9iaikge1xuICByZXR1cm4gb2JqICYmIHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvYmouY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJiBvYmogIT09IFN5bWJvbC5wcm90b3R5cGUgPyBcInN5bWJvbFwiIDogdHlwZW9mIG9iajtcbn07XG5cbnZhciBjbGFzc0NhbGxDaGVjayA9IGZ1bmN0aW9uIChpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHtcbiAgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpO1xuICB9XG59O1xuXG52YXIgY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7XG4gIGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykge1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07XG4gICAgICBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7XG4gICAgICBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7XG4gICAgICBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlO1xuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7XG4gICAgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTtcbiAgICBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTtcbiAgICByZXR1cm4gQ29uc3RydWN0b3I7XG4gIH07XG59KCk7XG5cbnZhciBpbmhlcml0cyA9IGZ1bmN0aW9uIChzdWJDbGFzcywgc3VwZXJDbGFzcykge1xuICBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09IFwiZnVuY3Rpb25cIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIgKyB0eXBlb2Ygc3VwZXJDbGFzcyk7XG4gIH1cblxuICBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHtcbiAgICBjb25zdHJ1Y3Rvcjoge1xuICAgICAgdmFsdWU6IHN1YkNsYXNzLFxuICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH1cbiAgfSk7XG4gIGlmIChzdXBlckNsYXNzKSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3Quc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIDogc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzcztcbn07XG5cbnZhciBwb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuID0gZnVuY3Rpb24gKHNlbGYsIGNhbGwpIHtcbiAgaWYgKCFzZWxmKSB7XG4gICAgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpO1xuICB9XG5cbiAgcmV0dXJuIGNhbGwgJiYgKHR5cGVvZiBjYWxsID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiBjYWxsID09PSBcImZ1bmN0aW9uXCIpID8gY2FsbCA6IHNlbGY7XG59O1xuXG4vLyBDb2RlIHNvdXJjZSBmcm9tIGhlcmUsIHRoYW5rcyBhdXRob3Jcbi8vIGh0dHBzOi8vZ2l0aHViLmNvbS9kcmF3Y2FsbC9Qcm90b24vYmxvYi9naC1wYWdlcy9zb3VyY2Uvc3JjL3V0aWxzL1JhbmQuanNcbnZhciBSYW5kID0gZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIFJhbmQoKSB7XG4gICAgICAgIGNsYXNzQ2FsbENoZWNrKHRoaXMsIFJhbmQpO1xuXG4gICAgICAgIHRoaXMubGlzdCA9IFtdO1xuICAgIH1cblxuICAgIGNyZWF0ZUNsYXNzKFJhbmQsIFt7XG4gICAgICAgIGtleTogXCJzZXRcIixcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHNldCQkMShwcm9iYWJpbGl0eSwgdGFyZ2V0KSB7XG4gICAgICAgICAgICB0aGlzLmxpc3QucHVzaCh7XG4gICAgICAgICAgICAgICAgcHJvYmFiaWxpdHk6IHByb2JhYmlsaXR5LFxuICAgICAgICAgICAgICAgIHRhcmdldDogdGFyZ2V0LFxuICAgICAgICAgICAgICAgIGE6IDAsXG4gICAgICAgICAgICAgICAgYjogMVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHRoaXMuY2FsY3VsYXRpb24oKTtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiBcImNhbGN1bGF0aW9uXCIsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBjYWxjdWxhdGlvbigpIHtcbiAgICAgICAgICAgIHZhciB0b3RhbCA9IDA7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMubGlzdC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIHRvdGFsICs9IHRoaXMubGlzdFtpXS5wcm9iYWJpbGl0eTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IHRoaXMubGlzdC5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgb2JqID0gdGhpcy5saXN0W19pXTtcbiAgICAgICAgICAgICAgICB2YXIgdmFsID0gb2JqLnByb2JhYmlsaXR5IC8gdG90YWw7XG5cbiAgICAgICAgICAgICAgICBvYmouYSA9IF9pID09PSAwID8gMCA6IHRoaXMubGlzdFtfaSAtIDFdLmI7XG4gICAgICAgICAgICAgICAgb2JqLmIgPSBvYmouYSArIHZhbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiBcImdldFJlc3VsdFwiLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0UmVzdWx0KCkge1xuICAgICAgICAgICAgdmFyIHZhbCA9IE1hdGgucmFuZG9tKCk7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMubGlzdC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIHZhciBvYmogPSB0aGlzLmxpc3RbaV07XG5cbiAgICAgICAgICAgICAgICBpZiAodmFsIDw9IG9iai5iICYmIHZhbCA+IG9iai5hKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBvYmoudGFyZ2V0O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIHRoaXMubGlzdFswXS50YXJnZXQ7XG4gICAgICAgIH1cbiAgICB9XSk7XG4gICAgcmV0dXJuIFJhbmQ7XG59KCk7XG5cbnZhciBDYW52YXMgPSBmdW5jdGlvbiAoX1JlYWN0JENvbXBvbmVudCkge1xuICBpbmhlcml0cyhDYW52YXMsIF9SZWFjdCRDb21wb25lbnQpO1xuXG4gIGZ1bmN0aW9uIENhbnZhcyhwcm9wcykge1xuICAgIGNsYXNzQ2FsbENoZWNrKHRoaXMsIENhbnZhcyk7XG5cbiAgICB2YXIgX3RoaXMgPSBwb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIChDYW52YXMuX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihDYW52YXMpKS5jYWxsKHRoaXMsIHByb3BzKSk7XG5cbiAgICBfdGhpcy5faWlkID0gMDtcbiAgICBfdGhpcy5fb2lkID0gMDtcbiAgICBfdGhpcy5zaXplID0geyB3aWR0aDogMCwgaGVpZ2h0OiAwIH07XG4gICAgX3RoaXMuY2FudmFzUmVmID0gUmVhY3QuY3JlYXRlUmVmKCk7XG4gICAgcmV0dXJuIF90aGlzO1xuICB9XG5cbiAgY3JlYXRlQ2xhc3MoQ2FudmFzLCBbe1xuICAgIGtleTogXCJjb21wb25lbnREaWRNb3VudFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBjb21wb25lbnREaWRNb3VudCgpIHtcbiAgICAgIHZhciBfdGhpczIgPSB0aGlzO1xuXG4gICAgICB0aGlzLl9vaWQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgX3RoaXMyLmluaXRDYW52YXMoKTtcbiAgICAgICAgX3RoaXMyLnJlc2l6ZSA9IF90aGlzMi5yZXNpemUuYmluZChfdGhpczIpO1xuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInJlc2l6ZVwiLCBfdGhpczIucmVzaXplKTtcbiAgICAgIH0sIDEwMCk7XG5cbiAgICAgIHZhciBjYW52YXMgPSB0aGlzLmdldENhbnZhcygpO1xuICAgICAgdGhpcy5wcm9wcy5vbkNhbnZhc0RpZE1vdW50ICYmIHRoaXMucHJvcHMub25DYW52YXNEaWRNb3VudChjYW52YXMpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJpbml0Q2FudmFzXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGluaXRDYW52YXMoKSB7XG4gICAgICB2YXIgY2FudmFzID0gdGhpcy5nZXRDYW52YXMoKTtcblxuICAgICAgaWYgKHRoaXMucHJvcHMuZ2xvYmFsQ29tcG9zaXRlT3BlcmF0aW9uKSB7XG4gICAgICAgIHZhciBjb250ZXh0ID0gY2FudmFzLmdldENvbnRleHQoXCIyZFwiKTtcbiAgICAgICAgY29udGV4dC5nbG9iYWxDb21wb3NpdGVPcGVyYXRpb24gPSB0aGlzLnByb3BzLmdsb2JhbENvbXBvc2l0ZU9wZXJhdGlvbjtcbiAgICAgIH1cblxuICAgICAgdmFyIF9zZXRDYW52YXNTaXplID0gdGhpcy5zZXRDYW52YXNTaXplKGNhbnZhcyksXG4gICAgICAgICAgd2lkdGggPSBfc2V0Q2FudmFzU2l6ZS53aWR0aCxcbiAgICAgICAgICBoZWlnaHQgPSBfc2V0Q2FudmFzU2l6ZS5oZWlnaHQ7XG5cbiAgICAgIHRoaXMuaGVhcnRiZWF0RGV0ZWN0aW9uQ2FudmFzU2l6ZShjYW52YXMpO1xuICAgICAgdGhpcy5wcm9wcy5vbkNhbnZhc0luaXRlZChjYW52YXMsIHdpZHRoLCBoZWlnaHQpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJnZXRDYW52YXNcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0Q2FudmFzKCkge1xuICAgICAgdmFyIGNhbnZhcyA9IHRoaXMuY2FudmFzUmVmLmN1cnJlbnQ7XG4gICAgICByZXR1cm4gY2FudmFzO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJoZWFydGJlYXREZXRlY3Rpb25DYW52YXNTaXplXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGhlYXJ0YmVhdERldGVjdGlvbkNhbnZhc1NpemUoY2FudmFzKSB7XG4gICAgICB2YXIgX3RoaXMzID0gdGhpcztcblxuICAgICAgdGhpcy5faWlkID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoX3RoaXMzLmNhbnZhc1JlZi5jdXJyZW50KSB7XG4gICAgICAgICAgdmFyIG5ld0hlaWdodCA9IF90aGlzMy5jYW52YXNSZWYuY3VycmVudC5jbGllbnRIZWlnaHQ7XG4gICAgICAgICAgaWYgKG5ld0hlaWdodCAhPT0gX3RoaXMzLnNpemUuaGVpZ2h0KSB7XG4gICAgICAgICAgICB2YXIgX3NldENhbnZhc1NpemUyID0gX3RoaXMzLnNldENhbnZhc1NpemUoY2FudmFzKSxcbiAgICAgICAgICAgICAgICB3aWR0aCA9IF9zZXRDYW52YXNTaXplMi53aWR0aCxcbiAgICAgICAgICAgICAgICBoZWlnaHQgPSBfc2V0Q2FudmFzU2l6ZTIuaGVpZ2h0O1xuXG4gICAgICAgICAgICBfdGhpczMucHJvcHMub25SZXNpemUgJiYgX3RoaXMzLnByb3BzLm9uUmVzaXplKHdpZHRoLCBoZWlnaHQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSwgMTAwMCAvIDEwKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiY29tcG9uZW50V2lsbFVubW91bnRcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gY29tcG9uZW50V2lsbFVubW91bnQoKSB7XG4gICAgICB0cnkge1xuICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInJlc2l6ZVwiLCB0aGlzLnJlc2l6ZSk7XG4gICAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy5faWlkKTtcbiAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuX29pZCk7XG4gICAgICB9IGNhdGNoIChlKSB7fVxuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJyZXNpemVcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gcmVzaXplKCkge1xuICAgICAgdmFyIGNhbnZhcyA9IHRoaXMuZ2V0Q2FudmFzKCk7XG5cbiAgICAgIHZhciBfc2V0Q2FudmFzU2l6ZTMgPSB0aGlzLnNldENhbnZhc1NpemUoY2FudmFzKSxcbiAgICAgICAgICB3aWR0aCA9IF9zZXRDYW52YXNTaXplMy53aWR0aCxcbiAgICAgICAgICBoZWlnaHQgPSBfc2V0Q2FudmFzU2l6ZTMuaGVpZ2h0O1xuXG4gICAgICB0aGlzLnByb3BzLm9uUmVzaXplICYmIHRoaXMucHJvcHMub25SZXNpemUod2lkdGgsIGhlaWdodCk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcInNldENhbnZhc1NpemVcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gc2V0Q2FudmFzU2l6ZShjYW52YXMpIHtcbiAgICAgIHZhciB3aWR0aCA9IHRoaXMuY2FudmFzUmVmLmN1cnJlbnQuY2xpZW50V2lkdGg7XG4gICAgICB2YXIgaGVpZ2h0ID0gdGhpcy5jYW52YXNSZWYuY3VycmVudC5jbGllbnRIZWlnaHQ7XG5cbiAgICAgIHRoaXMuc2l6ZS53aWR0aCA9IHdpZHRoO1xuICAgICAgdGhpcy5zaXplLmhlaWdodCA9IGhlaWdodDtcbiAgICAgIGNhbnZhcy53aWR0aCA9IHdpZHRoO1xuICAgICAgY2FudmFzLmhlaWdodCA9IGhlaWdodDtcbiAgICAgIHJldHVybiB7IHdpZHRoOiB3aWR0aCwgaGVpZ2h0OiBoZWlnaHQgfTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiaGFuZGxlV2F5cG9pbnRFbnRlclwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBoYW5kbGVXYXlwb2ludEVudGVyKCkge1xuICAgICAgUkFGTWFuYWdlci5zdGFydCgpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJoYW5kbGVXYXlwb2ludExlYXZlXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGhhbmRsZVdheXBvaW50TGVhdmUoKSB7XG4gICAgICBSQUZNYW5hZ2VyLnN0b3AoKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiZ2V0U3R5bGVcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0U3R5bGUoKSB7XG4gICAgICB2YXIgYmcgPSB0aGlzLnByb3BzLmJnO1xuXG4gICAgICB2YXIgc3R5bGUgPSB7IHdpZHRoOiBcIjEwMCVcIiwgaGVpZ2h0OiBcIjEwMCVcIiB9O1xuXG4gICAgICBpZiAoYmcgPT09IHRydWUpIHtcbiAgICAgICAgc3R5bGUgPSBPYmplY3QuYXNzaWduKHN0eWxlLCB7XG4gICAgICAgICAgcG9zaXRpb246IFwiYWJzb2x1dGVcIixcbiAgICAgICAgICB6SW5kZXg6IC0xLFxuICAgICAgICAgIHRvcDogMCxcbiAgICAgICAgICBsZWZ0OiAwXG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIGlmIChiZyAmJiAodHlwZW9mIGJnID09PSBcInVuZGVmaW5lZFwiID8gXCJ1bmRlZmluZWRcIiA6IF90eXBlb2YoYmcpKSA9PT0gXCJvYmplY3RcIikge1xuICAgICAgICBzdHlsZSA9IE9iamVjdC5hc3NpZ24oc3R5bGUsIGJnKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHN0eWxlO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJoYW5kbGVNb3VzZURvd25cIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gaGFuZGxlTW91c2VEb3duKGUpIHtcbiAgICAgIHRoaXMucHJvcHMub25Nb3VzZURvd24gJiYgdGhpcy5wcm9wcy5vbk1vdXNlRG93bihlKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwicmVuZGVyXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlcigpIHtcbiAgICAgIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KFwiY2FudmFzXCIsIHsgY2xhc3NOYW1lOiBcInBhcnRpY2xlcy1iZy1jYW52YXMtc2VsZlwiLFxuICAgICAgICByZWY6IHRoaXMuY2FudmFzUmVmLFxuICAgICAgICBvbk1vdXNlRG93bjogdGhpcy5oYW5kbGVNb3VzZURvd24uYmluZCh0aGlzKSxcbiAgICAgICAgc3R5bGU6IHRoaXMuZ2V0U3R5bGUoKVxuICAgICAgfSk7XG4gICAgfVxuICB9XSk7XG4gIHJldHVybiBDYW52YXM7XG59KFJlYWN0LkNvbXBvbmVudCk7XG5cbmZ1bmN0aW9uIGhleFRvUmdiKGhleCkge1xuICAgIHZhciByZXN1bHQgPSAvXiM/KFthLWZcXGRdezJ9KShbYS1mXFxkXXsyfSkoW2EtZlxcZF17Mn0pJC9pLmV4ZWMoaGV4KTtcbiAgICByZXR1cm4gcmVzdWx0ID8ge1xuICAgICAgICByOiBwYXJzZUludChyZXN1bHRbMV0sIDE2KSxcbiAgICAgICAgZzogcGFyc2VJbnQocmVzdWx0WzJdLCAxNiksXG4gICAgICAgIGI6IHBhcnNlSW50KHJlc3VsdFszXSwgMTYpXG4gICAgfSA6IHt9O1xufVxuXG5mdW5jdGlvbiBnZXRDb2xvcihjb2xvciwgYSkge1xuICAgIHZhciBjID0gdm9pZCAwO1xuICAgIGlmIChjb2xvcikge1xuICAgICAgICBjID0gaGV4VG9SZ2IoY29sb3IpO1xuICAgICAgICByZXR1cm4gXCJyZ2JhKFwiICsgYy5yICsgXCIsXCIgKyBjLmcgKyBcIixcIiArIGMuYiArIFwiLCBcIiArIGEgKyBcIilcIjtcbiAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG59XG5cbnZhciBCYWxsID0gZnVuY3Rpb24gKF9SZWFjdCRDb21wb25lbnQpIHtcbiAgaW5oZXJpdHMoQmFsbCwgX1JlYWN0JENvbXBvbmVudCk7XG5cbiAgZnVuY3Rpb24gQmFsbChwcm9wcykge1xuICAgIGNsYXNzQ2FsbENoZWNrKHRoaXMsIEJhbGwpO1xuXG4gICAgdmFyIF90aGlzID0gcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCAoQmFsbC5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKEJhbGwpKS5jYWxsKHRoaXMsIHByb3BzKSk7XG5cbiAgICBfdGhpcy5yZW5kZXJQcm90b24gPSBfdGhpcy5yZW5kZXJQcm90b24uYmluZChfdGhpcyk7XG4gICAgcmV0dXJuIF90aGlzO1xuICB9XG5cbiAgY3JlYXRlQ2xhc3MoQmFsbCwgW3tcbiAgICBrZXk6IFwib25DYW52YXNJbml0ZWRcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gb25DYW52YXNJbml0ZWQoY2FudmFzLCB3aWR0aCwgaGVpZ2h0KSB7XG4gICAgICB0aGlzLmNyZWF0ZVByb3RvbihjYW52YXMsIHdpZHRoLCBoZWlnaHQpO1xuICAgICAgdGhpcy5jcmVhdGVNaW5pRW1pdHRlcihjYW52YXMpO1xuICAgICAgUkFGTWFuYWdlci5hZGQodGhpcy5yZW5kZXJQcm90b24pO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJjb21wb25lbnRXaWxsVW5tb3VudFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBjb21wb25lbnRXaWxsVW5tb3VudCgpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIFJBRk1hbmFnZXIucmVtb3ZlKHRoaXMucmVuZGVyUHJvdG9uKTtcbiAgICAgICAgdGhpcy5wcm90b24uZGVzdHJveSgpO1xuICAgICAgfSBjYXRjaCAoZSkge31cbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwib25SZXNpemVcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gb25SZXNpemUoKSB7fVxuICB9LCB7XG4gICAga2V5OiBcImNyZWF0ZVByb3RvblwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBjcmVhdGVQcm90b24oY2FudmFzLCB3aWR0aCwgaGVpZ2h0KSB7XG4gICAgICB2YXIgX3RoaXMyID0gdGhpcztcblxuICAgICAgdmFyIGNvbnRleHQgPSBjYW52YXMuZ2V0Q29udGV4dChcIjJkXCIpO1xuICAgICAgdGhpcy5wcm90b24gPSBuZXcgUHJvdG9uKCk7XG5cbiAgICAgIHZhciBlbWl0dGVyID0gbmV3IFByb3Rvbi5FbWl0dGVyKCk7XG4gICAgICBlbWl0dGVyLnJhdGUgPSBuZXcgUHJvdG9uLlJhdGUodGhpcy5wcm9wcy5udW0gPyBuZXcgUHJvdG9uLlNwYW4odGhpcy5wcm9wcy5udW0pIDogbmV3IFByb3Rvbi5TcGFuKDQsIDkpLCBuZXcgUHJvdG9uLlNwYW4oMC44LCAxLjMpKTtcblxuICAgICAgZW1pdHRlci5hZGRJbml0aWFsaXplKG5ldyBQcm90b24uTWFzcygxKSk7XG4gICAgICBlbWl0dGVyLmFkZEluaXRpYWxpemUobmV3IFByb3Rvbi5SYWRpdXMoMSwgNTApKTtcbiAgICAgIGVtaXR0ZXIuYWRkSW5pdGlhbGl6ZShuZXcgUHJvdG9uLkxpZmUoNSwgNikpO1xuICAgICAgZW1pdHRlci5hZGRJbml0aWFsaXplKG5ldyBQcm90b24uVmVsb2NpdHkobmV3IFByb3Rvbi5TcGFuKDUsIDgpLCBuZXcgUHJvdG9uLlNwYW4oMzAsIDcwKSwgXCJwb2xhclwiKSk7XG5cbiAgICAgIGVtaXR0ZXIuYWRkQmVoYXZpb3VyKG5ldyBQcm90b24uQWxwaGEoMSwgMCkpO1xuICAgICAgZW1pdHRlci5hZGRCZWhhdmlvdXIobmV3IFByb3Rvbi5Db2xvcihbXCIjMzZhYWYzXCIsIFwiI2ZkNzY5Y1wiLCBcIiM5NGZmMjJcIiwgXCIjZmZhNTQ1XCIsIFwiI2ZmZmZmZlwiXSkpO1xuICAgICAgZW1pdHRlci5hZGRCZWhhdmlvdXIobmV3IFByb3Rvbi5TY2FsZSgwLjcsIDEpKTtcbiAgICAgIGVtaXR0ZXIuYWRkQmVoYXZpb3VyKG5ldyBQcm90b24uR3Jhdml0eSgzKSk7XG4gICAgICBlbWl0dGVyLmFkZEJlaGF2aW91cihuZXcgUHJvdG9uLkNvbGxpc2lvbihlbWl0dGVyKSk7XG4gICAgICBlbWl0dGVyLmFkZEJlaGF2aW91cih0aGlzLmN1c3RvbURlYWRCZWhhdmlvdXIoY2FudmFzKSk7XG4gICAgICBlbWl0dGVyLmFkZEJlaGF2aW91cihuZXcgUHJvdG9uLkNyb3NzWm9uZShuZXcgUHJvdG9uLlJlY3Rab25lKDAsIDAsIGNhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodCksIFwiYm91bmRcIikpO1xuXG4gICAgICBlbWl0dGVyLnAueCA9IE1hdGgubWluKDUwMCwgTWF0aC5tYXgoY2FudmFzLndpZHRoIC8gMiAtIDQwMCwgNTApKTtcbiAgICAgIGVtaXR0ZXIucC55ID0gY2FudmFzLmhlaWdodCAvIDIgKyA1MDtcbiAgICAgIGVtaXR0ZXIuZW1pdCgpO1xuICAgICAgdGhpcy5wcm90b24uYWRkRW1pdHRlcihlbWl0dGVyKTtcblxuICAgICAgdmFyIHJlbmRlcmVyID0gbmV3IFByb3Rvbi5DYW52YXNSZW5kZXJlcihjYW52YXMpO1xuICAgICAgcmVuZGVyZXIub25Qcm90b25VcGRhdGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGNvbnRleHQuZmlsbFN0eWxlID0gZ2V0Q29sb3IoX3RoaXMyLnByb3BzLmNvbG9yLCAwLjIpIHx8IFwicmdiYSgyNTUsIDI1NSwgMjU1LCAwLjIpXCI7XG4gICAgICAgIGNvbnRleHQuZmlsbFJlY3QoMCwgMCwgY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0KTtcbiAgICAgIH07XG4gICAgICB0aGlzLnByb3Rvbi5hZGRSZW5kZXJlcihyZW5kZXJlcik7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImN1c3RvbURlYWRCZWhhdmlvdXJcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gY3VzdG9tRGVhZEJlaGF2aW91cihjYW52YXMpIHtcbiAgICAgIHZhciBfdGhpczMgPSB0aGlzO1xuXG4gICAgICByZXR1cm4ge1xuICAgICAgICBpbml0aWFsaXplOiBmdW5jdGlvbiBpbml0aWFsaXplKHBhcnRpY2xlKSB7fSxcbiAgICAgICAgYXBwbHlCZWhhdmlvdXI6IGZ1bmN0aW9uIGFwcGx5QmVoYXZpb3VyKHBhcnRpY2xlKSB7XG4gICAgICAgICAgaWYgKHBhcnRpY2xlLnAueSArIHBhcnRpY2xlLnJhZGl1cyA+PSBjYW52YXMuaGVpZ2h0KSB7XG4gICAgICAgICAgICBpZiAocGFydGljbGUucmFkaXVzID4gOSkge1xuICAgICAgICAgICAgICBfdGhpczMubWluaUVtaXR0ZWluZyhwYXJ0aWNsZSk7XG4gICAgICAgICAgICAgIHBhcnRpY2xlLmRlYWQgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiY3JlYXRlTWluaUVtaXR0ZXJcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gY3JlYXRlTWluaUVtaXR0ZXIoY2FudmFzKSB7XG4gICAgICB2YXIgbWluaUVtaXR0ZXIgPSBuZXcgUHJvdG9uLkVtaXR0ZXIoKTtcbiAgICAgIG1pbmlFbWl0dGVyLnJhdGUgPSBuZXcgUHJvdG9uLlJhdGUobmV3IFByb3Rvbi5TcGFuKDMsIDYpLCBuZXcgUHJvdG9uLlNwYW4oMSwgMikpO1xuXG4gICAgICBtaW5pRW1pdHRlci5hZGRJbml0aWFsaXplKG5ldyBQcm90b24uTWFzcygxKSk7XG4gICAgICBtaW5pRW1pdHRlci5yYWRpdXNJbml0aWFsaXplID0gbmV3IFByb3Rvbi5SYWRpdXMoKTtcbiAgICAgIG1pbmlFbWl0dGVyLmFkZEluaXRpYWxpemUobWluaUVtaXR0ZXIucmFkaXVzSW5pdGlhbGl6ZSk7XG4gICAgICBtaW5pRW1pdHRlci5hZGRJbml0aWFsaXplKG5ldyBQcm90b24uTGlmZSgwLjUsIDEpKTtcbiAgICAgIG1pbmlFbWl0dGVyLmFkZEluaXRpYWxpemUobmV3IFByb3Rvbi5WKG5ldyBQcm90b24uU3BhbigxLjUsIDMpLCBuZXcgUHJvdG9uLlNwYW4oMCwgNzAsIHRydWUpLCBcInBvbGFyXCIpKTtcblxuICAgICAgbWluaUVtaXR0ZXIuY29sb3JCZWhhdmlvdXIgPSBuZXcgUHJvdG9uLkNvbG9yKFwiI2ZmZmZmZlwiKTtcbiAgICAgIG1pbmlFbWl0dGVyLmFkZEJlaGF2aW91cihuZXcgUHJvdG9uLkFscGhhKDEsIDApKTtcbiAgICAgIG1pbmlFbWl0dGVyLmFkZEJlaGF2aW91cihtaW5pRW1pdHRlci5jb2xvckJlaGF2aW91cik7XG4gICAgICBtaW5pRW1pdHRlci5hZGRCZWhhdmlvdXIobmV3IFByb3Rvbi5HcmF2aXR5KDQpKTtcbiAgICAgIG1pbmlFbWl0dGVyLmFkZEJlaGF2aW91cihuZXcgUHJvdG9uLkNvbGxpc2lvbihtaW5pRW1pdHRlcikpO1xuICAgICAgbWluaUVtaXR0ZXIuYWRkQmVoYXZpb3VyKG5ldyBQcm90b24uQ3Jvc3Nab25lKG5ldyBQcm90b24uUmVjdFpvbmUoMCwgMCwgY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0KSwgXCJib3VuZFwiKSk7XG4gICAgICB0aGlzLnByb3Rvbi5hZGRFbWl0dGVyKG1pbmlFbWl0dGVyKTtcblxuICAgICAgdGhpcy5taW5pRW1pdHRlciA9IG1pbmlFbWl0dGVyO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJtaW5pRW1pdHRlaW5nXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIG1pbmlFbWl0dGVpbmcocGFydGljbGUpIHtcbiAgICAgIHZhciBtaW5pRW1pdHRlciA9IHRoaXMubWluaUVtaXR0ZXI7XG4gICAgICBtaW5pRW1pdHRlci5yYWRpdXNJbml0aWFsaXplLnJlc2V0KHBhcnRpY2xlLnJhZGl1cyAqIDAuMDUsIHBhcnRpY2xlLnJhZGl1cyAqIDAuMik7XG4gICAgICBtaW5pRW1pdHRlci5jb2xvckJlaGF2aW91ci5yZXNldChwYXJ0aWNsZS5jb2xvcik7XG4gICAgICBtaW5pRW1pdHRlci5wLnggPSBwYXJ0aWNsZS5wLng7XG4gICAgICBtaW5pRW1pdHRlci5wLnkgPSBwYXJ0aWNsZS5wLnk7XG4gICAgICBtaW5pRW1pdHRlci5lbWl0KFwib25jZVwiKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwicmVuZGVyUHJvdG9uXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlclByb3RvbigpIHtcbiAgICAgIHRoaXMucHJvdG9uICYmIHRoaXMucHJvdG9uLnVwZGF0ZSgpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJyZW5kZXJcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyKCkge1xuICAgICAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoQ2FudmFzLCB7IGJnOiB0aGlzLnByb3BzLmJnLFxuICAgICAgICBnbG9iYWxDb21wb3NpdGVPcGVyYXRpb246IFwiZGFya2VyXCIsXG4gICAgICAgIG9uQ2FudmFzSW5pdGVkOiB0aGlzLm9uQ2FudmFzSW5pdGVkLmJpbmQodGhpcyksXG4gICAgICAgIG9uUmVzaXplOiB0aGlzLm9uUmVzaXplLmJpbmQodGhpcylcbiAgICAgIH0pO1xuICAgIH1cbiAgfV0pO1xuICByZXR1cm4gQmFsbDtcbn0oUmVhY3QuQ29tcG9uZW50KTtcblxudmFyIENvbG9yID0gZnVuY3Rpb24gKF9SZWFjdCRDb21wb25lbnQpIHtcbiAgaW5oZXJpdHMoQ29sb3IsIF9SZWFjdCRDb21wb25lbnQpO1xuXG4gIGZ1bmN0aW9uIENvbG9yKHByb3BzKSB7XG4gICAgY2xhc3NDYWxsQ2hlY2sodGhpcywgQ29sb3IpO1xuXG4gICAgdmFyIF90aGlzID0gcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCAoQ29sb3IuX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihDb2xvcikpLmNhbGwodGhpcywgcHJvcHMpKTtcblxuICAgIF90aGlzLmNvbG9ycyA9IFtcIiM1MjlCODhcIiwgXCIjQ0REMTgwXCIsIFwiI0ZGRkEzMlwiLCBcIiNGQjYyNTVcIiwgXCIjRkI0QTUzXCIsIFwiI0ZGNEU1MFwiLCBcIiNGOUQ0MjNcIl07XG4gICAgX3RoaXMucmVuZGVyUHJvdG9uID0gX3RoaXMucmVuZGVyUHJvdG9uLmJpbmQoX3RoaXMpO1xuICAgIHJldHVybiBfdGhpcztcbiAgfVxuXG4gIGNyZWF0ZUNsYXNzKENvbG9yLCBbe1xuICAgIGtleTogXCJjb21wb25lbnRXaWxsVW5tb3VudFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBjb21wb25lbnRXaWxsVW5tb3VudCgpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIFJBRk1hbmFnZXIucmVtb3ZlKHRoaXMucmVuZGVyUHJvdG9uKTtcbiAgICAgICAgdGhpcy5wcm90b24uZGVzdHJveSgpO1xuICAgICAgfSBjYXRjaCAoZSkge31cbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwib25DYW52YXNJbml0ZWRcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gb25DYW52YXNJbml0ZWQoY2FudmFzLCB3aWR0aCwgaGVpZ2h0KSB7XG4gICAgICB0aGlzLmNyZWF0ZVByb3RvbihjYW52YXMsIHdpZHRoLCBoZWlnaHQpO1xuICAgICAgUkFGTWFuYWdlci5hZGQodGhpcy5yZW5kZXJQcm90b24pO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJvblJlc2l6ZVwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBvblJlc2l6ZSgpIHt9XG4gIH0sIHtcbiAgICBrZXk6IFwiY3JlYXRlUHJvdG9uXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGNyZWF0ZVByb3RvbihjYW52YXMsIHdpZHRoLCBoZWlnaHQpIHtcbiAgICAgIHRoaXMucHJvdG9uID0gbmV3IFByb3RvbigpO1xuICAgICAgdmFyIGVtaXR0ZXIgPSBuZXcgUHJvdG9uLkVtaXR0ZXIoKTtcbiAgICAgIGVtaXR0ZXIucmF0ZSA9IG5ldyBQcm90b24uUmF0ZSh0aGlzLnByb3BzLm51bSA/IG5ldyBQcm90b24uU3Bhbih0aGlzLnByb3BzLm51bSkgOiBuZXcgUHJvdG9uLlNwYW4oNSwgOCksIG5ldyBQcm90b24uU3BhbigwLjEsIDAuMjUpKTtcblxuICAgICAgZW1pdHRlci5hZGRJbml0aWFsaXplKG5ldyBQcm90b24uTWFzcygxKSk7XG4gICAgICBlbWl0dGVyLmFkZEluaXRpYWxpemUobmV3IFByb3Rvbi5SYWRpdXMoMjAsIDIwMCkpO1xuICAgICAgZW1pdHRlci5hZGRJbml0aWFsaXplKG5ldyBQcm90b24uTGlmZSgyLCA0KSk7XG4gICAgICBlbWl0dGVyLmFkZEluaXRpYWxpemUobmV3IFByb3Rvbi5Qb3NpdGlvbihuZXcgUHJvdG9uLlJlY3Rab25lKDAsIDAsIHdpZHRoLCBoZWlnaHQpKSk7XG5cbiAgICAgIGVtaXR0ZXIuYWRkQmVoYXZpb3VyKG5ldyBQcm90b24uQWxwaGEoMCwgMSwgSW5maW5pdHksIFByb3Rvbi5lYXNlT3V0Q3ViaWMpKTtcbiAgICAgIGVtaXR0ZXIuYWRkQmVoYXZpb3VyKG5ldyBQcm90b24uU2NhbGUoMSwgMCwgSW5maW5pdHksIFByb3Rvbi5lYXNlT3V0Q3ViaWMpKTtcbiAgICAgIGVtaXR0ZXIuYWRkQmVoYXZpb3VyKG5ldyBQcm90b24uQ29sb3IodGhpcy5jb2xvcnMsIFwicmFuZG9tXCIpKTtcblxuICAgICAgZW1pdHRlci5lbWl0KCk7XG4gICAgICB0aGlzLnByb3Rvbi5hZGRFbWl0dGVyKGVtaXR0ZXIpO1xuXG4gICAgICB2YXIgcmVuZGVyZXIgPSBuZXcgUHJvdG9uLkNhbnZhc1JlbmRlcmVyKGNhbnZhcyk7XG4gICAgICB0aGlzLnByb3Rvbi5hZGRSZW5kZXJlcihyZW5kZXJlcik7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcInJlbmRlclByb3RvblwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXJQcm90b24oKSB7XG4gICAgICB0aGlzLnByb3RvbiAmJiB0aGlzLnByb3Rvbi51cGRhdGUoKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwicmVuZGVyXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlcigpIHtcbiAgICAgIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KENhbnZhcywgeyBiZzogdGhpcy5wcm9wcy5iZyxcbiAgICAgICAgZ2xvYmFsQ29tcG9zaXRlT3BlcmF0aW9uOiBcImRhcmtlclwiLFxuICAgICAgICBvbkNhbnZhc0luaXRlZDogdGhpcy5vbkNhbnZhc0luaXRlZC5iaW5kKHRoaXMpLFxuICAgICAgICBvblJlc2l6ZTogdGhpcy5vblJlc2l6ZS5iaW5kKHRoaXMpXG4gICAgICB9KTtcbiAgICB9XG4gIH1dKTtcbiAgcmV0dXJuIENvbG9yO1xufShSZWFjdC5Db21wb25lbnQpO1xuXG52YXIgQ29sb3IkMSA9IGZ1bmN0aW9uIChfUmVhY3QkQ29tcG9uZW50KSB7XG4gICAgaW5oZXJpdHMoQ29sb3IsIF9SZWFjdCRDb21wb25lbnQpO1xuXG4gICAgZnVuY3Rpb24gQ29sb3IocHJvcHMpIHtcbiAgICAgICAgY2xhc3NDYWxsQ2hlY2sodGhpcywgQ29sb3IpO1xuXG4gICAgICAgIHZhciBfdGhpcyA9IHBvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgKENvbG9yLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoQ29sb3IpKS5jYWxsKHRoaXMsIHByb3BzKSk7XG5cbiAgICAgICAgX3RoaXMuY29sb3JzID0gW1wiIzUyOUI4OFwiLCBcIiNDREQxODBcIiwgXCIjRkZGQTMyXCIsIFwiI0ZCNjI1NVwiLCBcIiNGQjRBNTNcIiwgXCIjRkY0RTUwXCIsIFwiI0Y5RDQyM1wiXTtcbiAgICAgICAgX3RoaXMucmVuZGVyUHJvdG9uID0gX3RoaXMucmVuZGVyUHJvdG9uLmJpbmQoX3RoaXMpO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuXG4gICAgY3JlYXRlQ2xhc3MoQ29sb3IsIFt7XG4gICAgICAgIGtleTogXCJjb21wb25lbnRXaWxsVW5tb3VudFwiLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gY29tcG9uZW50V2lsbFVubW91bnQoKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIFJBRk1hbmFnZXIucmVtb3ZlKHRoaXMucmVuZGVyUHJvdG9uKTtcbiAgICAgICAgICAgICAgICB0aGlzLnByb3Rvbi5kZXN0cm95KCk7XG4gICAgICAgICAgICB9IGNhdGNoIChlKSB7fVxuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6IFwib25DYW52YXNJbml0ZWRcIixcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIG9uQ2FudmFzSW5pdGVkKGNhbnZhcywgd2lkdGgsIGhlaWdodCkge1xuICAgICAgICAgICAgdGhpcy5jcmVhdGVQcm90b24oY2FudmFzLCB3aWR0aCwgaGVpZ2h0KTtcbiAgICAgICAgICAgIFJBRk1hbmFnZXIuYWRkKHRoaXMucmVuZGVyUHJvdG9uKTtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiBcIm9uUmVzaXplXCIsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBvblJlc2l6ZSh3aWR0aCwgaGVpZ2h0KSB7XG4gICAgICAgICAgICB0aGlzLmNyb3NzWm9uZUJlaGF2aW91ci56b25lLndpZHRoID0gd2lkdGg7XG4gICAgICAgICAgICB0aGlzLmNyb3NzWm9uZUJlaGF2aW91ci56b25lLmhlaWdodCA9IGhlaWdodDtcbiAgICAgICAgICAgIHRoaXMucHJvdG9uLnJlbmRlcmVyc1swXS5yZXNpemUod2lkdGgsIGhlaWdodCk7ICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6IFwiZ2V0UHJvcFwiLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0UHJvcChrZXksIGRlZmF1bHRWYWwpIHtcbiAgICAgICAgICAgIHZhciBjb25maWcgPSB0aGlzLnByb3BzLmNvbmZpZyB8fCB7fTtcbiAgICAgICAgICAgIHZhciB2YWwgPSBjb25maWdba2V5XSB8fCBkZWZhdWx0VmFsO1xuICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkodmFsKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgUHJvdG9uLlNwYW4odmFsWzBdLCB2YWxbMV0pO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdmFsO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6IFwiZ2V0QXJyUHJvcFwiLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0QXJyUHJvcChrZXksIGRlZmF1bHRWYWwpIHtcbiAgICAgICAgICAgIHZhciBjb25maWcgPSB0aGlzLnByb3BzLmNvbmZpZyB8fCB7fTtcbiAgICAgICAgICAgIHZhciB2YWwgPSBjb25maWdba2V5XSB8fCBkZWZhdWx0VmFsO1xuICAgICAgICAgICAgaWYgKCF2YWwpIHJldHVybiBudWxsO1xuXG4gICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheSh2YWwpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHZhbDtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFt2YWwsIHZhbF07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogXCJjcmVhdGVQcm90b25cIixcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGNyZWF0ZVByb3RvbihjYW52YXMsIHdpZHRoLCBoZWlnaHQpIHtcbiAgICAgICAgICAgIHZhciBudW0gPSB0aGlzLmdldFByb3AoXCJudW1cIiwgWzUsIDhdKTtcbiAgICAgICAgICAgIHZhciBycHMgPSB0aGlzLmdldFByb3AoXCJycHNcIiwgWzAuMSwgMC4yXSk7XG4gICAgICAgICAgICB2YXIgbWFzcyA9IHRoaXMuZ2V0UHJvcChcIm1hc3NcIiwgMSk7XG4gICAgICAgICAgICB2YXIgcmFkaXVzID0gdGhpcy5nZXRQcm9wKFwicmFkaXVzXCIsIFsxMCwgMzBdKTtcbiAgICAgICAgICAgIHZhciBsaWZlID0gdGhpcy5nZXRQcm9wKFwibGlmZVwiLCBbMiwgM10pO1xuICAgICAgICAgICAgdmFyIGJvZHkgPSB0aGlzLmdldFByb3AoXCJib2R5XCIpO1xuICAgICAgICAgICAgdmFyIHBvc2l0aW9uID0gdGhpcy5nZXRQcm9wKFwicG9zaXRpb25cIik7XG4gICAgICAgICAgICB2YXIgdiA9IHRoaXMuZ2V0UHJvcChcInZcIiwgWzIsIDNdKTtcbiAgICAgICAgICAgIHZhciB0aGEgPSB0aGlzLmdldFByb3AoXCJ0aGFcIiwgWy0xNSwgMTVdKTtcbiAgICAgICAgICAgIHZhciBhbHBoYSA9IHRoaXMuZ2V0QXJyUHJvcChcImFscGhhXCIpO1xuICAgICAgICAgICAgdmFyIHNjYWxlID0gdGhpcy5nZXRBcnJQcm9wKFwic2NhbGVcIik7XG4gICAgICAgICAgICB2YXIgY29sb3IgPSB0aGlzLmdldEFyclByb3AoXCJjb2xvclwiKTtcbiAgICAgICAgICAgIHZhciBjcm9zcyA9IHRoaXMuZ2V0UHJvcChcImNyb3NzXCIsIFwiZGVhZFwiKTtcbiAgICAgICAgICAgIHZhciByYW5kb20gPSB0aGlzLmdldFByb3AoXCJyYW5kb21cIik7XG4gICAgICAgICAgICB2YXIgcm90YXRlID0gdGhpcy5nZXRBcnJQcm9wKFwicm90YXRlXCIpO1xuICAgICAgICAgICAgdmFyIGcgPSB0aGlzLmdldFByb3AoXCJnXCIpO1xuICAgICAgICAgICAgdmFyIGYgPSB0aGlzLmdldEFyclByb3AoXCJmXCIpO1xuICAgICAgICAgICAgdmFyIGVtaXR0ZXJWID0gdGhpcy5nZXRQcm9wKFwiZW1pdHRlclwiKTtcblxuICAgICAgICAgICAgdGhpcy5wcm90b24gPSBuZXcgUHJvdG9uKCk7XG4gICAgICAgICAgICB2YXIgZW1pdHRlciA9IHZvaWQgMDtcbiAgICAgICAgICAgIGlmIChlbWl0dGVyViA9PT0gXCJmb2xsb3dcIikge1xuICAgICAgICAgICAgICAgIGVtaXR0ZXIgPSBuZXcgUHJvdG9uLkZvbGxvd0VtaXR0ZXIoKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgZW1pdHRlciA9IG5ldyBQcm90b24uRW1pdHRlcigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZW1pdHRlci5yYXRlID0gbmV3IFByb3Rvbi5SYXRlKG51bSwgcnBzKTtcblxuICAgICAgICAgICAgZW1pdHRlci5hZGRJbml0aWFsaXplKG5ldyBQcm90b24uTWFzcyhtYXNzKSk7XG4gICAgICAgICAgICBlbWl0dGVyLmFkZEluaXRpYWxpemUobmV3IFByb3Rvbi5SYWRpdXMocmFkaXVzKSk7XG4gICAgICAgICAgICBlbWl0dGVyLmFkZEluaXRpYWxpemUobmV3IFByb3Rvbi5MaWZlKGxpZmUpKTtcbiAgICAgICAgICAgIGVtaXR0ZXIuYWRkSW5pdGlhbGl6ZShuZXcgUHJvdG9uLlZlbG9jaXR5KHYsIHRoYSwgXCJwb2xhclwiKSk7XG4gICAgICAgICAgICBpZiAoYm9keSkgZW1pdHRlci5hZGRJbml0aWFsaXplKG5ldyBQcm90b24uQm9keShib2R5KSk7XG5cbiAgICAgICAgICAgIHZhciBwb3MgPSB2b2lkIDA7XG4gICAgICAgICAgICBpZiAocG9zaXRpb24gPT09IFwiYWxsXCIgfHwgcG9zaXRpb24gPT09IFwic2NyZWVuXCIpIHtcbiAgICAgICAgICAgICAgICBwb3MgPSBuZXcgUHJvdG9uLlBvc2l0aW9uKG5ldyBQcm90b24uUmVjdFpvbmUoMCwgMCwgY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0KSk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKCh0eXBlb2YgcG9zaXRpb24gPT09IFwidW5kZWZpbmVkXCIgPyBcInVuZGVmaW5lZFwiIDogX3R5cGVvZihwb3NpdGlvbikpID09PSBcIm9iamVjdFwiKSB7XG4gICAgICAgICAgICAgICAgcG9zID0gbmV3IFByb3Rvbi5Qb3NpdGlvbihuZXcgUHJvdG9uLlJlY3Rab25lKHBvc2l0aW9uLngsIHBvc2l0aW9uLnksIHBvc2l0aW9uLndpZHRoLCBwb3NpdGlvbi5oZWlnaHQpKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgZW1pdHRlci5wLnggPSBjYW52YXMud2lkdGggLyAyO1xuICAgICAgICAgICAgICAgIGVtaXR0ZXIucC55ID0gY2FudmFzLmhlaWdodCAvIDI7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGVtaXR0ZXIuYWRkSW5pdGlhbGl6ZShwb3MpO1xuXG4gICAgICAgICAgICAvLy8gYmVoYXZpb3VyXG4gICAgICAgICAgICB2YXIgYWxwaGFCID0gYWxwaGEgPyBuZXcgUHJvdG9uLkFscGhhKGFscGhhWzBdLCBhbHBoYVsxXSkgOiBuZXcgUHJvdG9uLkFscGhhKDAsIDEpO1xuICAgICAgICAgICAgdmFyIHNjYWxlQiA9IHNjYWxlID8gbmV3IFByb3Rvbi5TY2FsZShzY2FsZVswXSwgc2NhbGVbMV0pIDogbmV3IFByb3Rvbi5TY2FsZSgxLCAwLjIpO1xuICAgICAgICAgICAgdmFyIGNvbG9yQiA9IGNvbG9yID8gbmV3IFByb3Rvbi5Db2xvcihjb2xvclswXSwgY29sb3JbMV0pIDogbmV3IFByb3Rvbi5Db2xvcih0aGlzLmNvbG9ycyk7XG5cbiAgICAgICAgICAgIGVtaXR0ZXIuYWRkQmVoYXZpb3VyKGFscGhhQik7XG4gICAgICAgICAgICBlbWl0dGVyLmFkZEJlaGF2aW91cihzY2FsZUIpO1xuICAgICAgICAgICAgaWYgKCFib2R5KSBlbWl0dGVyLmFkZEJlaGF2aW91cihjb2xvckIpO1xuXG4gICAgICAgICAgICBpZiAocm90YXRlKSB7XG4gICAgICAgICAgICAgICAgaWYgKHJvdGF0ZVswXSA9PT0gdHJ1ZSB8fCByb3RhdGVbMF0gPT09IFwicm90YXRlXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgZW1pdHRlci5hZGRCZWhhdmlvdXIobmV3IFByb3Rvbi5Sb3RhdGUoKSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZW1pdHRlci5hZGRCZWhhdmlvdXIobmV3IFByb3Rvbi5Sb3RhdGUocm90YXRlWzBdLCByb3RhdGVbMV0pKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHZhciB6b25lID0gbmV3IFByb3Rvbi5SZWN0Wm9uZSgwLCAwLCBjYW52YXMud2lkdGgsIGNhbnZhcy5oZWlnaHQpO1xuICAgICAgICAgICAgdmFyIGNyb3NzWm9uZUJlaGF2aW91ciA9IG5ldyBQcm90b24uQ3Jvc3Nab25lKHpvbmUsIGNyb3NzKTtcbiAgICAgICAgICAgIGVtaXR0ZXIuYWRkQmVoYXZpb3VyKGNyb3NzWm9uZUJlaGF2aW91cik7XG5cbiAgICAgICAgICAgIHJhbmRvbSAmJiBlbWl0dGVyLmFkZEJlaGF2aW91cihuZXcgUHJvdG9uLlJhbmRvbURyaWZ0KHJhbmRvbSwgcmFuZG9tLCAwLjA1KSk7XG4gICAgICAgICAgICBnICYmIGVtaXR0ZXIuYWRkQmVoYXZpb3VyKG5ldyBQcm90b24uRyhnKSk7XG4gICAgICAgICAgICBmICYmIGVtaXR0ZXIuYWRkQmVoYXZpb3VyKG5ldyBQcm90b24uRihmWzBdLCBmWzFdKSk7XG5cbiAgICAgICAgICAgIGVtaXR0ZXIuZW1pdCgpO1xuICAgICAgICAgICAgdGhpcy5wcm90b24uYWRkRW1pdHRlcihlbWl0dGVyKTtcblxuICAgICAgICAgICAgdmFyIHJlbmRlcmVyID0gdGhpcy5jcmVhdGVSZW5kZXJlcihjYW52YXMpO1xuICAgICAgICAgICAgdGhpcy5wcm90b24uYWRkUmVuZGVyZXIocmVuZGVyZXIpO1xuXG4gICAgICAgICAgICB0aGlzLmVtaXR0ZXIgPSBlbWl0dGVyO1xuICAgICAgICAgICAgdGhpcy5jcm9zc1pvbmVCZWhhdmlvdXIgPSBjcm9zc1pvbmVCZWhhdmlvdXI7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogXCJjcmVhdGVSZW5kZXJlclwiLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gY3JlYXRlUmVuZGVyZXIoY2FudmFzKSB7XG4gICAgICAgICAgICB2YXIgd2lkdGggPSBjYW52YXMud2lkdGg7XG4gICAgICAgICAgICB2YXIgaGVpZ2h0ID0gY2FudmFzLmhlaWdodDtcbiAgICAgICAgICAgIHZhciBjb250ZXh0ID0gY2FudmFzLmdldENvbnRleHQoXCIyZFwiKTtcbiAgICAgICAgICAgIHZhciByZW5kZXJlciA9IG5ldyBQcm90b24uQ2FudmFzUmVuZGVyZXIoY2FudmFzKTtcblxuICAgICAgICAgICAgdmFyIG9uVXBkYXRlID0gdGhpcy5nZXRQcm9wKFwib25VcGRhdGVcIik7XG4gICAgICAgICAgICBpZiAob25VcGRhdGUpIHtcbiAgICAgICAgICAgICAgICByZW5kZXJlci5vblByb3RvblVwZGF0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgb25VcGRhdGUoY29udGV4dCwgd2lkdGgsIGhlaWdodCk7XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdmFyIG9uUGFydGljbGVDcmVhdGVkID0gdGhpcy5nZXRQcm9wKFwib25QYXJ0aWNsZUNyZWF0ZWRcIik7XG4gICAgICAgICAgICBpZiAob25QYXJ0aWNsZUNyZWF0ZWQpIHtcbiAgICAgICAgICAgICAgICByZW5kZXJlci5vblBhcnRpY2xlQ3JlYXRlZCA9IGZ1bmN0aW9uIChwYXJ0aWNsZSkge1xuICAgICAgICAgICAgICAgICAgICBvblBhcnRpY2xlQ3JlYXRlZChjb250ZXh0LCBwYXJ0aWNsZSk7XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdmFyIG9uUGFydGljbGVVcGRhdGUgPSB0aGlzLmdldFByb3AoXCJvblBhcnRpY2xlVXBkYXRlXCIpO1xuICAgICAgICAgICAgaWYgKG9uUGFydGljbGVVcGRhdGUpIHtcbiAgICAgICAgICAgICAgICByZW5kZXJlci5vblBhcnRpY2xlVXBkYXRlID0gZnVuY3Rpb24gKHBhcnRpY2xlKSB7XG4gICAgICAgICAgICAgICAgICAgIG9uUGFydGljbGVVcGRhdGUoY29udGV4dCwgcGFydGljbGUpO1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiByZW5kZXJlcjtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiBcInJlbmRlclByb3RvblwiLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyUHJvdG9uKCkge1xuICAgICAgICAgICAgdGhpcy5wcm90b24gJiYgdGhpcy5wcm90b24udXBkYXRlKCk7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogXCJoYW5kbGVNb3VzZURvd25cIixcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGhhbmRsZU1vdXNlRG93bihlKSB7XG4gICAgICAgICAgICB2YXIgb25Nb3VzZURvd24gPSB0aGlzLmdldFByb3AoXCJvbk1vdXNlRG93blwiKTtcbiAgICAgICAgICAgIGlmIChvbk1vdXNlRG93bikge1xuICAgICAgICAgICAgICAgIG9uTW91c2VEb3duKGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6IFwicmVuZGVyXCIsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgICAgICAgICB2YXIgZ2xvYmFsQ29tcG9zaXRlT3BlcmF0aW9uID0gdGhpcy5wcm9wcy5nbG9iYWxDb21wb3NpdGVPcGVyYXRpb24gfHwgdGhpcy5wcm9wcy5vcGVyYXRpb24gfHwgXCJzb3VyY2Utb3ZlclwiO1xuXG4gICAgICAgICAgICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChDYW52YXMsIHtcbiAgICAgICAgICAgICAgICBiZzogdGhpcy5wcm9wcy5iZyxcbiAgICAgICAgICAgICAgICBvbk1vdXNlRG93bjogdGhpcy5oYW5kbGVNb3VzZURvd24uYmluZCh0aGlzKSxcbiAgICAgICAgICAgICAgICBnbG9iYWxDb21wb3NpdGVPcGVyYXRpb246IGdsb2JhbENvbXBvc2l0ZU9wZXJhdGlvbixcbiAgICAgICAgICAgICAgICBvbkNhbnZhc0luaXRlZDogdGhpcy5vbkNhbnZhc0luaXRlZC5iaW5kKHRoaXMpLFxuICAgICAgICAgICAgICAgIG9uUmVzaXplOiB0aGlzLm9uUmVzaXplLmJpbmQodGhpcylcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfV0pO1xuICAgIHJldHVybiBDb2xvcjtcbn0oUmVhY3QuQ29tcG9uZW50KTtcblxudmFyIExpbmVzID0gZnVuY3Rpb24gKF9SZWFjdCRDb21wb25lbnQpIHtcbiAgaW5oZXJpdHMoTGluZXMsIF9SZWFjdCRDb21wb25lbnQpO1xuXG4gIGZ1bmN0aW9uIExpbmVzKHByb3BzKSB7XG4gICAgY2xhc3NDYWxsQ2hlY2sodGhpcywgTGluZXMpO1xuXG4gICAgdmFyIF90aGlzID0gcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCAoTGluZXMuX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihMaW5lcykpLmNhbGwodGhpcywgcHJvcHMpKTtcblxuICAgIF90aGlzLnJlbmRlclByb3RvbiA9IF90aGlzLnJlbmRlclByb3Rvbi5iaW5kKF90aGlzKTtcbiAgICByZXR1cm4gX3RoaXM7XG4gIH1cblxuICBjcmVhdGVDbGFzcyhMaW5lcywgW3tcbiAgICBrZXk6IFwib25DYW52YXNEaWRNb3VudFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBvbkNhbnZhc0RpZE1vdW50KGNhbnZhcykge1xuICAgICAgaWYgKHRoaXMucHJvcHMuY29sb3IpIHtcbiAgICAgICAgY2FudmFzLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IHRoaXMucHJvcHMuY29sb3I7XG4gICAgICB9XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImNvbXBvbmVudFdpbGxVbm1vdW50XCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGNvbXBvbmVudFdpbGxVbm1vdW50KCkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgUkFGTWFuYWdlci5yZW1vdmUodGhpcy5yZW5kZXJQcm90b24pO1xuICAgICAgICB0aGlzLnByb3Rvbi5kZXN0cm95KCk7XG4gICAgICB9IGNhdGNoIChlKSB7fVxuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJvbkNhbnZhc0luaXRlZFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBvbkNhbnZhc0luaXRlZChjYW52YXMsIHdpZHRoLCBoZWlnaHQpIHtcbiAgICAgIHRoaXMuY3JlYXRlUHJvdG9uKGNhbnZhcywgd2lkdGgsIGhlaWdodCk7XG4gICAgICBSQUZNYW5hZ2VyLmFkZCh0aGlzLnJlbmRlclByb3Rvbik7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcIm9uUmVzaXplXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIG9uUmVzaXplKHdpZHRoLCBoZWlnaHQpIHtcbiAgICAgIHRoaXMuY3Jvc3Nab25lQmVoYXZpb3VyLnpvbmUud2lkdGggPSB3aWR0aDtcbiAgICAgIHRoaXMuY3Jvc3Nab25lQmVoYXZpb3VyLnpvbmUuaGVpZ2h0ID0gaGVpZ2h0O1xuICAgICAgdGhpcy5wcm90b24ucmVuZGVyZXJzWzBdLnJlc2l6ZSh3aWR0aCwgaGVpZ2h0KTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiY3JlYXRlUHJvdG9uXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGNyZWF0ZVByb3RvbihjYW52YXMsIHdpZHRoLCBoZWlnaHQpIHtcbiAgICAgIHRoaXMucHJvdG9uID0gbmV3IFByb3RvbigpO1xuXG4gICAgICB2YXIgZW1pdHRlciA9IG5ldyBQcm90b24uRW1pdHRlcigpO1xuICAgICAgZW1pdHRlci5kYW1waW5nID0gMC4wMDg7XG4gICAgICBlbWl0dGVyLnJhdGUgPSBuZXcgUHJvdG9uLlJhdGUodGhpcy5wcm9wcy5udW0gPyB0aGlzLnByb3BzLm51bSA6IDI1MCk7XG4gICAgICBlbWl0dGVyLmFkZEluaXRpYWxpemUobmV3IFByb3Rvbi5NYXNzKDEpKTtcbiAgICAgIGVtaXR0ZXIuYWRkSW5pdGlhbGl6ZShuZXcgUHJvdG9uLlJhZGl1cyg0KSk7XG4gICAgICBlbWl0dGVyLmFkZEluaXRpYWxpemUobmV3IFByb3Rvbi5WZWxvY2l0eShuZXcgUHJvdG9uLlNwYW4oMS41KSwgbmV3IFByb3Rvbi5TcGFuKDAsIDM2MCksIFwicG9sYXJcIikpO1xuICAgICAgdmFyIG1vdXNlT2JqID0ge1xuICAgICAgICB4OiB3aWR0aCAvIDIsXG4gICAgICAgIHk6IGhlaWdodCAvIDJcbiAgICAgIH07XG5cbiAgICAgIHZhciBhdHRyYWN0aW9uQmVoYXZpb3VyID0gbmV3IFByb3Rvbi5BdHRyYWN0aW9uKG1vdXNlT2JqLCAwLCAwKTtcbiAgICAgIHZhciBjcm9zc1pvbmVCZWhhdmlvdXIgPSBuZXcgUHJvdG9uLkNyb3NzWm9uZShuZXcgUHJvdG9uLlJlY3Rab25lKDAsIDAsIGNhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodCksIFwiY3Jvc3NcIik7XG4gICAgICBlbWl0dGVyLmFkZEJlaGF2aW91cihuZXcgUHJvdG9uLkNvbG9yKFwicmFuZG9tXCIpKTtcbiAgICAgIGVtaXR0ZXIuYWRkQmVoYXZpb3VyKGF0dHJhY3Rpb25CZWhhdmlvdXIsIGNyb3NzWm9uZUJlaGF2aW91cik7XG4gICAgICBlbWl0dGVyLmFkZEJlaGF2aW91cihuZXcgUHJvdG9uLlJhbmRvbURyaWZ0KDEwLCAxMCwgMC4wNSkpO1xuICAgICAgZW1pdHRlci5wLnggPSBjYW52YXMud2lkdGggLyAyO1xuICAgICAgZW1pdHRlci5wLnkgPSBjYW52YXMuaGVpZ2h0IC8gMjtcbiAgICAgIGVtaXR0ZXIuZW1pdChcIm9uY2VcIik7XG5cbiAgICAgIHRoaXMucHJvdG9uLmFkZEVtaXR0ZXIoZW1pdHRlcik7XG4gICAgICB0aGlzLnByb3Rvbi5hZGRSZW5kZXJlcih0aGlzLmNyZWF0ZVJlbmRlcmVyKGNhbnZhcykpO1xuICAgICAgdGhpcy5jcm9zc1pvbmVCZWhhdmlvdXIgPSBjcm9zc1pvbmVCZWhhdmlvdXI7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImNyZWF0ZVJlbmRlcmVyXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGNyZWF0ZVJlbmRlcmVyKGNhbnZhcykge1xuICAgICAgdmFyIF90aGlzMiA9IHRoaXM7XG5cbiAgICAgIHZhciBjb250ZXh0ID0gY2FudmFzLmdldENvbnRleHQoXCIyZFwiKTtcbiAgICAgIHZhciByZW5kZXJlciA9IG5ldyBQcm90b24uQ2FudmFzUmVuZGVyZXIoY2FudmFzKTtcbiAgICAgIHJlbmRlcmVyLm9uUHJvdG9uVXBkYXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBjb250ZXh0LmZpbGxTdHlsZSA9IGdldENvbG9yKF90aGlzMi5wcm9wcy5jb2xvciwgMC4wMikgfHwgXCJyZ2JhKDAsIDAsIDAsIDAuMDIpXCI7XG4gICAgICAgIGNvbnRleHQuZmlsbFJlY3QoMCwgMCwgY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0KTtcbiAgICAgIH07XG5cbiAgICAgIHJlbmRlcmVyLm9uUGFydGljbGVVcGRhdGUgPSBmdW5jdGlvbiAocGFydGljbGUpIHtcbiAgICAgICAgY29udGV4dC5iZWdpblBhdGgoKTtcbiAgICAgICAgY29udGV4dC5zdHJva2VTdHlsZSA9IHBhcnRpY2xlLmNvbG9yO1xuICAgICAgICBjb250ZXh0LmxpbmVXaWR0aCA9IDE7XG4gICAgICAgIGNvbnRleHQubW92ZVRvKHBhcnRpY2xlLm9sZC5wLngsIHBhcnRpY2xlLm9sZC5wLnkpO1xuICAgICAgICBjb250ZXh0LmxpbmVUbyhwYXJ0aWNsZS5wLngsIHBhcnRpY2xlLnAueSk7XG4gICAgICAgIGNvbnRleHQuY2xvc2VQYXRoKCk7XG4gICAgICAgIGNvbnRleHQuc3Ryb2tlKCk7XG4gICAgICB9O1xuXG4gICAgICByZXR1cm4gcmVuZGVyZXI7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcInJlbmRlclByb3RvblwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXJQcm90b24oKSB7XG4gICAgICB0aGlzLnByb3RvbiAmJiB0aGlzLnByb3Rvbi51cGRhdGUoKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwicmVuZGVyXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlcigpIHtcbiAgICAgIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KENhbnZhcywgeyBiZzogdGhpcy5wcm9wcy5iZyxcbiAgICAgICAgZ2xvYmFsQ29tcG9zaXRlT3BlcmF0aW9uOiBcImRhcmtlclwiLFxuICAgICAgICBvbkNhbnZhc0RpZE1vdW50OiB0aGlzLm9uQ2FudmFzRGlkTW91bnQuYmluZCh0aGlzKSxcbiAgICAgICAgb25DYW52YXNJbml0ZWQ6IHRoaXMub25DYW52YXNJbml0ZWQuYmluZCh0aGlzKSxcbiAgICAgICAgb25SZXNpemU6IHRoaXMub25SZXNpemUuYmluZCh0aGlzKVxuICAgICAgfSk7XG4gICAgfVxuICB9XSk7XG4gIHJldHVybiBMaW5lcztcbn0oUmVhY3QuQ29tcG9uZW50KTtcblxudmFyIFRoaWNrID0gZnVuY3Rpb24gKF9SZWFjdCRDb21wb25lbnQpIHtcbiAgaW5oZXJpdHMoVGhpY2ssIF9SZWFjdCRDb21wb25lbnQpO1xuXG4gIGZ1bmN0aW9uIFRoaWNrKHByb3BzKSB7XG4gICAgY2xhc3NDYWxsQ2hlY2sodGhpcywgVGhpY2spO1xuXG4gICAgdmFyIF90aGlzID0gcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCAoVGhpY2suX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihUaGljaykpLmNhbGwodGhpcywgcHJvcHMpKTtcblxuICAgIF90aGlzLmh1ZSA9IDA7XG4gICAgX3RoaXMuaW5kZXggPSAwO1xuICAgIF90aGlzLmNvbG9yVGVtcGxhdGUgPSBcImhzbGEoaHVlLDgwJSw1MCUsIDAuNzUpXCI7XG4gICAgX3RoaXMucmVuZGVyUHJvdG9uID0gX3RoaXMucmVuZGVyUHJvdG9uLmJpbmQoX3RoaXMpO1xuICAgIHJldHVybiBfdGhpcztcbiAgfVxuXG4gIGNyZWF0ZUNsYXNzKFRoaWNrLCBbe1xuICAgIGtleTogXCJvbkNhbnZhc0RpZE1vdW50XCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIG9uQ2FudmFzRGlkTW91bnQoY2FudmFzKSB7XG4gICAgICBpZiAodGhpcy5wcm9wcy5jb2xvcikge1xuICAgICAgICBjYW52YXMuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gdGhpcy5wcm9wcy5jb2xvcjtcbiAgICAgIH1cbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwib25DYW52YXNJbml0ZWRcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gb25DYW52YXNJbml0ZWQoY2FudmFzLCB3aWR0aCwgaGVpZ2h0KSB7XG4gICAgICB0aGlzLmNhbnZhcyA9IGNhbnZhcztcbiAgICAgIHRoaXMuY3JlYXRlUHJvdG9uKGNhbnZhcywgd2lkdGgsIGhlaWdodCk7XG4gICAgICBSQUZNYW5hZ2VyLmFkZCh0aGlzLnJlbmRlclByb3Rvbik7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcIm9uUmVzaXplXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIG9uUmVzaXplKHdpZHRoLCBoZWlnaHQpIHtcbiAgICAgIHRoaXMuY3Jvc3Nab25lQmVoYXZpb3VyLnpvbmUud2lkdGggPSB3aWR0aDtcbiAgICAgIHRoaXMuY3Jvc3Nab25lQmVoYXZpb3VyLnpvbmUuaGVpZ2h0ID0gaGVpZ2h0O1xuICAgICAgdGhpcy5wcm90b24ucmVuZGVyZXJzWzBdLnJlc2l6ZSh3aWR0aCwgaGVpZ2h0KTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiY3JlYXRlUHJvdG9uXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGNyZWF0ZVByb3RvbihjYW52YXMsIHdpZHRoLCBoZWlnaHQpIHtcbiAgICAgIHRoaXMucHJvdG9uID0gbmV3IFByb3RvbigpO1xuXG4gICAgICB2YXIgZW1pdHRlciA9IG5ldyBQcm90b24uRW1pdHRlcigpO1xuICAgICAgZW1pdHRlci5kYW1waW5nID0gMC4wMDg7XG4gICAgICBlbWl0dGVyLnJhdGUgPSBuZXcgUHJvdG9uLlJhdGUodGhpcy5wcm9wcy5udW0gPyB0aGlzLnByb3BzLm51bSA6IDE1MCk7XG5cbiAgICAgIC8vIEluaXRpYWxpemVcbiAgICAgIGVtaXR0ZXIuYWRkSW5pdGlhbGl6ZShuZXcgUHJvdG9uLk1hc3MoMSkpO1xuICAgICAgZW1pdHRlci5hZGRJbml0aWFsaXplKG5ldyBQcm90b24uUmFkaXVzKDgpKTtcbiAgICAgIGVtaXR0ZXIuYWRkSW5pdGlhbGl6ZShuZXcgUHJvdG9uLlYobmV3IFByb3Rvbi5TcGFuKDAuMSwgMC41KSwgbmV3IFByb3Rvbi5TcGFuKDAsIDM2MCksIFwicG9sYXJcIikpO1xuICAgICAgZW1pdHRlci5hZGRJbml0aWFsaXplKG5ldyBQcm90b24uUG9zaXRpb24obmV3IFByb3Rvbi5DaXJjbGVab25lKGNhbnZhcy53aWR0aCAvIDIsIGNhbnZhcy5oZWlnaHQgLyAyLCAxMDApKSk7XG5cbiAgICAgIC8vIEJlaGF2aW91clxuICAgICAgdmFyIGNyb3NzWm9uZUJlaGF2aW91ciA9IG5ldyBQcm90b24uQ3Jvc3Nab25lKG5ldyBQcm90b24uUmVjdFpvbmUoMCwgMCwgY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0KSwgXCJjcm9zc1wiKTtcbiAgICAgIGVtaXR0ZXIuYWRkQmVoYXZpb3VyKGNyb3NzWm9uZUJlaGF2aW91cik7XG4gICAgICB0aGlzLnJlcHVsc2lvbiA9IG5ldyBQcm90b24uUmVwdWxzaW9uKHtcbiAgICAgICAgeDogY2FudmFzLndpZHRoIC8gMixcbiAgICAgICAgeTogY2FudmFzLmhlaWdodCAvIDIgLSAxMDBcbiAgICAgIH0sIDMsIDMwMCk7XG5cbiAgICAgIHRoaXMuYXR0cmFjdGlvbiA9IG5ldyBQcm90b24uQXR0cmFjdGlvbih7XG4gICAgICAgIHg6IGNhbnZhcy53aWR0aCAvIDIsXG4gICAgICAgIHk6IGNhbnZhcy5oZWlnaHQgLyAyXG4gICAgICB9LCAzLCAyMDApO1xuICAgICAgZW1pdHRlci5hZGRCZWhhdmlvdXIodGhpcy5hdHRyYWN0aW9uLCB0aGlzLnJlcHVsc2lvbik7XG4gICAgICBlbWl0dGVyLmFkZEJlaGF2aW91cihuZXcgUHJvdG9uLkNvbG9yKFwicmFuZG9tXCIpKTtcbiAgICAgIGVtaXR0ZXIuYWRkQmVoYXZpb3VyKG5ldyBQcm90b24uUmFuZG9tRHJpZnQoMjAsIDE1LCAwLjE1KSk7XG5cbiAgICAgIGVtaXR0ZXIuZW1pdChcIm9uY2VcIik7XG4gICAgICB0aGlzLnByb3Rvbi5hZGRFbWl0dGVyKGVtaXR0ZXIpO1xuICAgICAgdGhpcy5wcm90b24uYWRkUmVuZGVyZXIodGhpcy5jcmVhdGVSZW5kZXJlcihjYW52YXMpKTtcbiAgICAgIHRoaXMuY3Jvc3Nab25lQmVoYXZpb3VyID0gY3Jvc3Nab25lQmVoYXZpb3VyO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJjcmVhdGVSZW5kZXJlclwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBjcmVhdGVSZW5kZXJlcihjYW52YXMpIHtcbiAgICAgIHZhciBfdGhpczIgPSB0aGlzO1xuXG4gICAgICB2YXIgY29udGV4dCA9IGNhbnZhcy5nZXRDb250ZXh0KFwiMmRcIik7XG4gICAgICB2YXIgcmVuZGVyZXIgPSBuZXcgUHJvdG9uLkNhbnZhc1JlbmRlcmVyKGNhbnZhcyk7XG5cbiAgICAgIHJlbmRlcmVyLm9uUHJvdG9uVXBkYXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBfdGhpczIuaHVlICs9IDE7XG4gICAgICAgIGNvbnRleHQuZmlsbFN0eWxlID0gZ2V0Q29sb3IoX3RoaXMyLnByb3BzLmNvbG9yLCAwLjAyKSB8fCBcInJnYmEoMCwgMCwgMCwgMC4wMilcIjtcbiAgICAgICAgY29udGV4dC5maWxsUmVjdCgwLCAwLCBjYW52YXMud2lkdGgsIGNhbnZhcy5oZWlnaHQpO1xuICAgICAgfTtcblxuICAgICAgcmVuZGVyZXIub25QYXJ0aWNsZUNyZWF0ZWQgPSBmdW5jdGlvbiAocGFydGljbGUpIHtcbiAgICAgICAgcGFydGljbGUuZGF0YS5iZWdpbiA9IFByb3Rvbi5NYXRoVXRpbC5yYW5kb21BVG9CKDEsIDEyMCk7XG4gICAgICAgIHBhcnRpY2xlLmRhdGEudGhhID0gUHJvdG9uLk1hdGhVdGlsLnJhbmRvbUFUb0IoMCwgTWF0aC5QSSAqIDIpO1xuICAgICAgfTtcblxuICAgICAgcmVuZGVyZXIub25QYXJ0aWNsZVVwZGF0ZSA9IGZ1bmN0aW9uIChwYXJ0aWNsZSkge1xuICAgICAgICB2YXIgaHVlID0gcGFydGljbGUuZGF0YS5iZWdpbiArIF90aGlzMi5odWU7XG4gICAgICAgIHBhcnRpY2xlLmNvbG9yID0gX3RoaXMyLmNvbG9yVGVtcGxhdGUucmVwbGFjZShcImh1ZVwiLCBodWUgJSAzNjApO1xuXG4gICAgICAgIHZhciByYXRpbyA9IDMgLyA0O1xuICAgICAgICB2YXIgcmFkaXVzID0gcGFydGljbGUucmFkaXVzICogKDEgLSByYXRpbykgKiBNYXRoLmNvcyhwYXJ0aWNsZS5kYXRhLnRoYSArPSAwLjAxKSArIHBhcnRpY2xlLnJhZGl1cyAqIHJhdGlvO1xuXG4gICAgICAgIGNvbnRleHQuYmVnaW5QYXRoKCk7XG4gICAgICAgIGNvbnRleHQuZmlsbFN0eWxlID0gcGFydGljbGUuY29sb3I7XG4gICAgICAgIGNvbnRleHQuYXJjKHBhcnRpY2xlLnAueCwgcGFydGljbGUucC55LCByYWRpdXMsIDAsIE1hdGguUEkgKiAyLCB0cnVlKTtcbiAgICAgICAgY29udGV4dC5jbG9zZVBhdGgoKTtcbiAgICAgICAgY29udGV4dC5maWxsKCk7XG4gICAgICB9O1xuXG4gICAgICByZXR1cm4gcmVuZGVyZXI7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImNvbXBvbmVudFdpbGxVbm1vdW50XCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGNvbXBvbmVudFdpbGxVbm1vdW50KCkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgUkFGTWFuYWdlci5yZW1vdmUodGhpcy5yZW5kZXJQcm90b24pO1xuICAgICAgICB0aGlzLnByb3Rvbi5kZXN0cm95KCk7XG4gICAgICB9IGNhdGNoIChlKSB7fVxuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJyZW5kZXJQcm90b25cIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyUHJvdG9uKCkge1xuICAgICAgdmFyIGNhbnZhcyA9IHRoaXMuY2FudmFzO1xuICAgICAgdGhpcy5wcm90b24udXBkYXRlKCk7XG4gICAgICBpZiAodGhpcy5pbmRleCAlIDIwMCA9PT0gMCkge1xuICAgICAgICB0aGlzLmF0dHJhY3Rpb24udGFyZ2V0UG9zaXRpb24ueCA9IE1hdGgucmFuZG9tKCkgKiBjYW52YXMud2lkdGg7XG4gICAgICAgIHRoaXMuYXR0cmFjdGlvbi50YXJnZXRQb3NpdGlvbi55ID0gTWF0aC5yYW5kb20oKSAqIGNhbnZhcy5oZWlnaHQ7XG5cbiAgICAgICAgdGhpcy5yZXB1bHNpb24udGFyZ2V0UG9zaXRpb24ueCA9IE1hdGgucmFuZG9tKCkgKiBjYW52YXMud2lkdGg7XG4gICAgICAgIHRoaXMucmVwdWxzaW9uLnRhcmdldFBvc2l0aW9uLnkgPSBNYXRoLnJhbmRvbSgpICogY2FudmFzLmhlaWdodDtcbiAgICAgIH1cblxuICAgICAgdGhpcy5pbmRleCsrO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJyZW5kZXJcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyKCkge1xuICAgICAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoQ2FudmFzLCB7IGJnOiB0aGlzLnByb3BzLmJnLFxuICAgICAgICBvbkNhbnZhc0RpZE1vdW50OiB0aGlzLm9uQ2FudmFzRGlkTW91bnQuYmluZCh0aGlzKSxcbiAgICAgICAgb25DYW52YXNJbml0ZWQ6IHRoaXMub25DYW52YXNJbml0ZWQuYmluZCh0aGlzKSxcbiAgICAgICAgb25SZXNpemU6IHRoaXMub25SZXNpemUuYmluZCh0aGlzKVxuICAgICAgfSk7XG4gICAgfVxuICB9XSk7XG4gIHJldHVybiBUaGljaztcbn0oUmVhY3QuQ29tcG9uZW50KTtcblxudmFyIFNxdWFyZSA9IGZ1bmN0aW9uIChfUmVhY3QkQ29tcG9uZW50KSB7XG4gIGluaGVyaXRzKFNxdWFyZSwgX1JlYWN0JENvbXBvbmVudCk7XG5cbiAgZnVuY3Rpb24gU3F1YXJlKHByb3BzKSB7XG4gICAgY2xhc3NDYWxsQ2hlY2sodGhpcywgU3F1YXJlKTtcblxuICAgIHZhciBfdGhpcyA9IHBvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgKFNxdWFyZS5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKFNxdWFyZSkpLmNhbGwodGhpcywgcHJvcHMpKTtcblxuICAgIF90aGlzLmNvbG9ycyA9IFtcIiNmYWQzOTBcIiwgXCIjODFlY2VjXCIsIFwiI2ZmZmZmZlwiLCBcIiNiYWRjNThcIiwgXCIjZjljYTI0XCIsIFwiI0ZFQTQ3RlwiXTtcbiAgICBfdGhpcy5yZW5kZXJQcm90b24gPSBfdGhpcy5yZW5kZXJQcm90b24uYmluZChfdGhpcyk7XG4gICAgcmV0dXJuIF90aGlzO1xuICB9XG5cbiAgY3JlYXRlQ2xhc3MoU3F1YXJlLCBbe1xuICAgIGtleTogXCJjb21wb25lbnRXaWxsVW5tb3VudFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBjb21wb25lbnRXaWxsVW5tb3VudCgpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIFJBRk1hbmFnZXIucmVtb3ZlKHRoaXMucmVuZGVyUHJvdG9uKTtcbiAgICAgICAgdGhpcy5wcm90b24uZGVzdHJveSgpO1xuICAgICAgfSBjYXRjaCAoZSkge31cbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwib25DYW52YXNEaWRNb3VudFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBvbkNhbnZhc0RpZE1vdW50KGNhbnZhcykge31cbiAgfSwge1xuICAgIGtleTogXCJvbkNhbnZhc0luaXRlZFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBvbkNhbnZhc0luaXRlZChjYW52YXMsIHdpZHRoLCBoZWlnaHQpIHtcbiAgICAgIHRoaXMuY3JlYXRlUHJvdG9uKGNhbnZhcywgd2lkdGgsIGhlaWdodCk7XG4gICAgICBSQUZNYW5hZ2VyLmFkZCh0aGlzLnJlbmRlclByb3Rvbik7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcIm9uUmVzaXplXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIG9uUmVzaXplKHdpZHRoLCBoZWlnaHQpIHtcbiAgICAgIHZhciBkaXMgPSAxNTA7XG4gICAgICB0aGlzLmNyb3NzWm9uZUJlaGF2aW91ci56b25lLndpZHRoID0gd2lkdGggKyAyICogZGlzO1xuICAgICAgdGhpcy5jcm9zc1pvbmVCZWhhdmlvdXIuem9uZS5oZWlnaHQgPSBoZWlnaHQgKyAyICogZGlzO1xuICAgICAgdGhpcy5wcm90b24ucmVuZGVyZXJzWzBdLnJlc2l6ZSh3aWR0aCwgaGVpZ2h0KTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiY3JlYXRlUHJvdG9uXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGNyZWF0ZVByb3RvbihjYW52YXMsIHdpZHRoLCBoZWlnaHQpIHtcbiAgICAgIHRoaXMucHJvdG9uID0gbmV3IFByb3RvbigpO1xuICAgICAgdmFyIGVtaXR0ZXIgPSBuZXcgUHJvdG9uLkVtaXR0ZXIoKTtcbiAgICAgIGVtaXR0ZXIucmF0ZSA9IG5ldyBQcm90b24uUmF0ZSh0aGlzLnByb3BzLm51bSA/IHRoaXMucHJvcHMubnVtIDogNTApO1xuICAgICAgZW1pdHRlci5kYW1waW5nID0gMDtcblxuICAgICAgZW1pdHRlci5hZGRJbml0aWFsaXplKG5ldyBQcm90b24uTWFzcygxKSk7XG4gICAgICBlbWl0dGVyLmFkZEluaXRpYWxpemUobmV3IFByb3Rvbi5SYWRpdXMoNCwgNzApKTtcbiAgICAgIGVtaXR0ZXIuYWRkSW5pdGlhbGl6ZShuZXcgUHJvdG9uLlZlbG9jaXR5KG5ldyBQcm90b24uU3BhbigyLCAxMCksIG5ldyBQcm90b24uU3BhbigwKSwgXCJwb2xhclwiKSk7XG4gICAgICBlbWl0dGVyLmFkZEluaXRpYWxpemUobmV3IFByb3Rvbi5Qb3NpdGlvbihuZXcgUHJvdG9uLkxpbmVab25lKDAsIGNhbnZhcy5oZWlnaHQsIGNhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodCkpKTtcblxuICAgICAgdmFyIGRpcyA9IDE1MDtcbiAgICAgIHZhciBjcm9zc1pvbmVCZWhhdmlvdXIgPSBuZXcgUHJvdG9uLkNyb3NzWm9uZShuZXcgUHJvdG9uLlJlY3Rab25lKDAgLSBkaXMsIDAgLSBkaXMsIGNhbnZhcy53aWR0aCArIDIgKiBkaXMsIGNhbnZhcy5oZWlnaHQgKyAyICogZGlzKSwgXCJjcm9zc1wiKTtcbiAgICAgIGVtaXR0ZXIuYWRkQmVoYXZpb3VyKGNyb3NzWm9uZUJlaGF2aW91cik7XG4gICAgICBlbWl0dGVyLmFkZEJlaGF2aW91cihuZXcgUHJvdG9uLkFscGhhKFByb3Rvbi5nZXRTcGFuKDAuMSwgMC41NSkpKTtcbiAgICAgIGVtaXR0ZXIuYWRkQmVoYXZpb3VyKG5ldyBQcm90b24uQ29sb3IodGhpcy5jb2xvcnMpKTtcblxuICAgICAgZW1pdHRlci5lbWl0KFwib25jZVwiKTtcbiAgICAgIHRoaXMucHJvdG9uLmFkZEVtaXR0ZXIoZW1pdHRlcik7XG4gICAgICB2YXIgcmVuZGVyZXIgPSB0aGlzLmNyZWF0ZVJlbmRlcmVyKGNhbnZhcyk7XG4gICAgICB0aGlzLnByb3Rvbi5hZGRSZW5kZXJlcihyZW5kZXJlcik7XG5cbiAgICAgIHRoaXMuY3Jvc3Nab25lQmVoYXZpb3VyID0gY3Jvc3Nab25lQmVoYXZpb3VyO1xuICAgICAgZW1pdHRlci5wcmVFbWl0KDIpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJjcmVhdGVSZW5kZXJlclwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBjcmVhdGVSZW5kZXJlcihjYW52YXMpIHtcbiAgICAgIHZhciBjb250ZXh0ID0gY2FudmFzLmdldENvbnRleHQoXCIyZFwiKTtcbiAgICAgIHZhciByZW5kZXJlciA9IG5ldyBQcm90b24uQ3VzdG9tUmVuZGVyZXIoKTtcblxuICAgICAgcmVuZGVyZXIub25Qcm90b25VcGRhdGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGNvbnRleHQuY2xlYXJSZWN0KDAsIDAsIGNhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodCk7XG4gICAgICB9O1xuXG4gICAgICByZW5kZXJlci5vblBhcnRpY2xlQ3JlYXRlZCA9IGZ1bmN0aW9uIChwYXJ0aWNsZSkge1xuICAgICAgICB2YXIgdyA9IHBhcnRpY2xlLnJhZGl1cyB8fCA2MDtcbiAgICAgICAgdmFyIGggPSBQcm90b24uTWF0aFV0aWwucmFuZG9tQVRvQigxMDAsIDIwMCwgXCJpbnRcIik7XG4gICAgICAgIHBhcnRpY2xlLmRhdGEudyA9IHc7XG4gICAgICAgIHBhcnRpY2xlLmRhdGEuaCA9IGg7XG4gICAgICB9O1xuXG4gICAgICByZW5kZXJlci5vblBhcnRpY2xlVXBkYXRlID0gZnVuY3Rpb24gKHBhcnRpY2xlKSB7XG4gICAgICAgIHZhciB3ID0gcGFydGljbGUuZGF0YS53O1xuICAgICAgICB2YXIgaCA9IHBhcnRpY2xlLmRhdGEuaDtcbiAgICAgICAgY29udGV4dC5zYXZlKCk7XG4gICAgICAgIGNvbnRleHQuZ2xvYmFsQWxwaGEgPSBwYXJ0aWNsZS5hbHBoYTtcbiAgICAgICAgY29udGV4dC5maWxsU3R5bGUgPSBwYXJ0aWNsZS5jb2xvcjtcblxuICAgICAgICBjb250ZXh0LnRyYW5zbGF0ZShwYXJ0aWNsZS5wLngsIHBhcnRpY2xlLnAueSk7XG4gICAgICAgIGNvbnRleHQucm90YXRlKFByb3Rvbi5NYXRoVXRpbC5kZWdyZWVUcmFuc2Zvcm0ocGFydGljbGUucm90YXRpb24pKTtcbiAgICAgICAgY29udGV4dC50cmFuc2xhdGUoLXBhcnRpY2xlLnAueCwgLXBhcnRpY2xlLnAueSk7XG5cbiAgICAgICAgY29udGV4dC5iZWdpblBhdGgoKTtcbiAgICAgICAgY29udGV4dC5yZWN0KHBhcnRpY2xlLnAueCAtIHcgLyAyLCBwYXJ0aWNsZS5wLnkgLSBoIC8gMiwgdywgaCk7XG5cbiAgICAgICAgY29udGV4dC5jbG9zZVBhdGgoKTtcbiAgICAgICAgY29udGV4dC5maWxsKCk7XG4gICAgICAgIGNvbnRleHQuZ2xvYmFsQWxwaGEgPSAxO1xuICAgICAgICBjb250ZXh0LnJlc3RvcmUoKTtcbiAgICAgIH07XG5cbiAgICAgIHJldHVybiByZW5kZXJlcjtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwicmVuZGVyUHJvdG9uXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlclByb3RvbigpIHtcbiAgICAgIHRoaXMucHJvdG9uICYmIHRoaXMucHJvdG9uLnVwZGF0ZSgpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJyZW5kZXJcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyKCkge1xuICAgICAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoQ2FudmFzLCB7IGJnOiB0aGlzLnByb3BzLmJnLFxuICAgICAgICBnbG9iYWxDb21wb3NpdGVPcGVyYXRpb246IFwibGlnaHRlclwiLFxuICAgICAgICBvbkNhbnZhc0RpZE1vdW50OiB0aGlzLm9uQ2FudmFzRGlkTW91bnQuYmluZCh0aGlzKSxcbiAgICAgICAgb25DYW52YXNJbml0ZWQ6IHRoaXMub25DYW52YXNJbml0ZWQuYmluZCh0aGlzKSxcbiAgICAgICAgb25SZXNpemU6IHRoaXMub25SZXNpemUuYmluZCh0aGlzKVxuICAgICAgfSk7XG4gICAgfVxuICB9XSk7XG4gIHJldHVybiBTcXVhcmU7XG59KFJlYWN0LkNvbXBvbmVudCk7XG5cbnZhciBDb2J3ZWIgPSBmdW5jdGlvbiAoX1JlYWN0JENvbXBvbmVudCkge1xuICBpbmhlcml0cyhDb2J3ZWIsIF9SZWFjdCRDb21wb25lbnQpO1xuXG4gIGZ1bmN0aW9uIENvYndlYihwcm9wcykge1xuICAgIGNsYXNzQ2FsbENoZWNrKHRoaXMsIENvYndlYik7XG5cbiAgICB2YXIgX3RoaXMgPSBwb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIChDb2J3ZWIuX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihDb2J3ZWIpKS5jYWxsKHRoaXMsIHByb3BzKSk7XG5cbiAgICBfdGhpcy5yZW5kZXJQcm90b24gPSBfdGhpcy5yZW5kZXJQcm90b24uYmluZChfdGhpcyk7XG4gICAgcmV0dXJuIF90aGlzO1xuICB9XG5cbiAgY3JlYXRlQ2xhc3MoQ29id2ViLCBbe1xuICAgIGtleTogXCJvbkNhbnZhc0luaXRlZFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBvbkNhbnZhc0luaXRlZChjYW52YXMsIHdpZHRoLCBoZWlnaHQpIHtcbiAgICAgIHRoaXMuY3JlYXRlUHJvdG9uKGNhbnZhcywgd2lkdGgsIGhlaWdodCk7XG4gICAgICBSQUZNYW5hZ2VyLmFkZCh0aGlzLnJlbmRlclByb3Rvbik7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImNvbXBvbmVudFdpbGxVbm1vdW50XCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGNvbXBvbmVudFdpbGxVbm1vdW50KCkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgUkFGTWFuYWdlci5yZW1vdmUodGhpcy5yZW5kZXJQcm90b24pO1xuICAgICAgICB0aGlzLnByb3Rvbi5kZXN0cm95KCk7XG4gICAgICB9IGNhdGNoIChlKSB7fVxuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJvblJlc2l6ZVwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBvblJlc2l6ZSh3aWR0aCwgaGVpZ2h0KSB7XG4gICAgICB0aGlzLmNyb3NzWm9uZUJlaGF2aW91ci56b25lLndpZHRoID0gd2lkdGg7XG4gICAgICB0aGlzLmNyb3NzWm9uZUJlaGF2aW91ci56b25lLmhlaWdodCA9IGhlaWdodDtcbiAgICAgIHRoaXMucHJvdG9uLnJlbmRlcmVyc1swXS5yZXNpemUod2lkdGgsIGhlaWdodCk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImNyZWF0ZVByb3RvblwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBjcmVhdGVQcm90b24oY2FudmFzLCB3aWR0aCwgaGVpZ2h0KSB7XG4gICAgICB0aGlzLnByb3RvbiA9IG5ldyBQcm90b24oKTtcblxuICAgICAgdmFyIGVtaXR0ZXIgPSBuZXcgUHJvdG9uLkVtaXR0ZXIoKTtcbiAgICAgIGVtaXR0ZXIucmF0ZSA9IG5ldyBQcm90b24uUmF0ZSh0aGlzLnByb3BzLm51bSA/IG5ldyBQcm90b24uU3Bhbih0aGlzLnByb3BzLm51bSkgOiBuZXcgUHJvdG9uLlNwYW4oMTAwKSwgbmV3IFByb3Rvbi5TcGFuKDAuMDUsIDAuMikpO1xuXG4gICAgICBlbWl0dGVyLmFkZEluaXRpYWxpemUobmV3IFByb3Rvbi5NYXNzKDEpKTtcbiAgICAgIGVtaXR0ZXIuYWRkSW5pdGlhbGl6ZShuZXcgUHJvdG9uLlJhZGl1cygxLCA0KSk7XG4gICAgICBlbWl0dGVyLmFkZEluaXRpYWxpemUobmV3IFByb3Rvbi5MaWZlKEluZmluaXR5KSk7XG5cbiAgICAgIHZhciBwb2ludFpvbmUgPSBuZXcgUHJvdG9uLlBvc2l0aW9uKG5ldyBQcm90b24uUmVjdFpvbmUoMCwgMCwgd2lkdGgsIGhlaWdodCkpO1xuICAgICAgZW1pdHRlci5hZGRJbml0aWFsaXplKHBvaW50Wm9uZSk7XG4gICAgICBlbWl0dGVyLmFkZEluaXRpYWxpemUobmV3IFByb3Rvbi5WZWxvY2l0eShuZXcgUHJvdG9uLlNwYW4oMC4zLCAwLjYpLCBuZXcgUHJvdG9uLlNwYW4oMCwgMzYwKSwgXCJwb2xhclwiKSk7XG5cbiAgICAgIGVtaXR0ZXIuYWRkQmVoYXZpb3VyKG5ldyBQcm90b24uQWxwaGEoUHJvdG9uLmdldFNwYW4oMC4yLCAwLjkpKSk7XG4gICAgICBlbWl0dGVyLmFkZEJlaGF2aW91cihuZXcgUHJvdG9uLkNvbG9yKHRoaXMucHJvcHMuY29sb3IgfHwgXCIjMzMzXCIpKTtcbiAgICAgIHRoaXMuY3Jvc3Nab25lQmVoYXZpb3VyID0gbmV3IFByb3Rvbi5Dcm9zc1pvbmUobmV3IFByb3Rvbi5SZWN0Wm9uZSgwLCAwLCB3aWR0aCwgaGVpZ2h0KSwgXCJjcm9zc1wiKTtcbiAgICAgIGVtaXR0ZXIuYWRkQmVoYXZpb3VyKHRoaXMuY3Jvc3Nab25lQmVoYXZpb3VyKTtcblxuICAgICAgZW1pdHRlci5lbWl0KFwib25jZVwiKTtcbiAgICAgIGVtaXR0ZXIuZGFtcGluZyA9IDA7XG4gICAgICB0aGlzLnByb3Rvbi5hZGRFbWl0dGVyKGVtaXR0ZXIpO1xuICAgICAgdGhpcy5wcm90b24uYWRkUmVuZGVyZXIodGhpcy5jcmVhdGVSZW5kZXJlcihjYW52YXMsIGVtaXR0ZXIpKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiY3JlYXRlUmVuZGVyZXJcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gY3JlYXRlUmVuZGVyZXIoY2FudmFzLCBlbWl0dGVyKSB7XG4gICAgICB2YXIgX3RoaXMyID0gdGhpcztcblxuICAgICAgdmFyIGNvbnRleHQgPSBjYW52YXMuZ2V0Q29udGV4dChcIjJkXCIpO1xuICAgICAgdmFyIHJlbmRlcmVyID0gbmV3IFByb3Rvbi5DYW52YXNSZW5kZXJlcihjYW52YXMpO1xuICAgICAgdmFyIFIgPSAxNDA7XG5cbiAgICAgIHJlbmRlcmVyLm9uUHJvdG9uVXBkYXRlQWZ0ZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBwYXJ0aWNsZXMgPSBlbWl0dGVyLnBhcnRpY2xlcztcblxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHBhcnRpY2xlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIGZvciAodmFyIGogPSBpICsgMTsgaiA8IHBhcnRpY2xlcy5sZW5ndGg7IGorKykge1xuICAgICAgICAgICAgdmFyIHBBID0gcGFydGljbGVzW2ldO1xuICAgICAgICAgICAgdmFyIHBCID0gcGFydGljbGVzW2pdO1xuICAgICAgICAgICAgdmFyIGRpcyA9IHBBLnAuZGlzdGFuY2VUbyhwQi5wKTtcblxuICAgICAgICAgICAgaWYgKGRpcyA8IFIpIHtcbiAgICAgICAgICAgICAgdmFyIGFscGhhID0gKDEgLSBkaXMgLyBSKSAqIDAuNTtcbiAgICAgICAgICAgICAgY29udGV4dC5zdHJva2VTdHlsZSA9IGdldENvbG9yKF90aGlzMi5wcm9wcy5jb2xvciwgYWxwaGEpIHx8IFwicmdiYSgzLCAzLCAzLCBcIiArIGFscGhhICsgXCIpXCI7XG4gICAgICAgICAgICAgIGNvbnRleHQuYmVnaW5QYXRoKCk7XG4gICAgICAgICAgICAgIGNvbnRleHQubW92ZVRvKHBBLnAueCwgcEEucC55KTtcbiAgICAgICAgICAgICAgY29udGV4dC5saW5lVG8ocEIucC54LCBwQi5wLnkpO1xuICAgICAgICAgICAgICBjb250ZXh0LmNsb3NlUGF0aCgpO1xuICAgICAgICAgICAgICBjb250ZXh0LnN0cm9rZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfTtcblxuICAgICAgcmV0dXJuIHJlbmRlcmVyO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJyZW5kZXJQcm90b25cIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyUHJvdG9uKCkge1xuICAgICAgdGhpcy5wcm90b24gJiYgdGhpcy5wcm90b24udXBkYXRlKCk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcInJlbmRlclwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChDYW52YXMsIHsgYmc6IHRoaXMucHJvcHMuYmcsXG4gICAgICAgIGdsb2JhbENvbXBvc2l0ZU9wZXJhdGlvbjogXCJkYXJrZXJcIixcbiAgICAgICAgb25DYW52YXNJbml0ZWQ6IHRoaXMub25DYW52YXNJbml0ZWQuYmluZCh0aGlzKSxcbiAgICAgICAgb25SZXNpemU6IHRoaXMub25SZXNpemUuYmluZCh0aGlzKVxuICAgICAgfSk7XG4gICAgfVxuICB9XSk7XG4gIHJldHVybiBDb2J3ZWI7XG59KFJlYWN0LkNvbXBvbmVudCk7XG5cbnZhciBDaXJjbGUgPSBmdW5jdGlvbiAoX1JlYWN0JENvbXBvbmVudCkge1xuICBpbmhlcml0cyhDaXJjbGUsIF9SZWFjdCRDb21wb25lbnQpO1xuXG4gIGZ1bmN0aW9uIENpcmNsZShwcm9wcykge1xuICAgIGNsYXNzQ2FsbENoZWNrKHRoaXMsIENpcmNsZSk7XG5cbiAgICB2YXIgX3RoaXMgPSBwb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIChDaXJjbGUuX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihDaXJjbGUpKS5jYWxsKHRoaXMsIHByb3BzKSk7XG5cbiAgICBfdGhpcy5jb2xvcnMgPSBbXCIjNzRiOWZmXCIsIFwiI2U4NDM5M1wiLCBcIiM2YzVjZTdcIiwgXCIjMDBiODk0XCIsIFwiI2ZkY2I2ZVwiLCBcIiMwMDYyNjZcIiwgXCIjMUIxNDY0XCJdO1xuXG4gICAgX3RoaXMucmVuZGVyUHJvdG9uID0gX3RoaXMucmVuZGVyUHJvdG9uLmJpbmQoX3RoaXMpO1xuICAgIHJldHVybiBfdGhpcztcbiAgfVxuXG4gIGNyZWF0ZUNsYXNzKENpcmNsZSwgW3tcbiAgICBrZXk6IFwiY29tcG9uZW50V2lsbFVubW91bnRcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gY29tcG9uZW50V2lsbFVubW91bnQoKSB7XG4gICAgICB0cnkge1xuICAgICAgICBSQUZNYW5hZ2VyLnJlbW92ZSh0aGlzLnJlbmRlclByb3Rvbik7XG4gICAgICAgIHRoaXMucHJvdG9uLmRlc3Ryb3koKTtcbiAgICAgIH0gY2F0Y2ggKGUpIHt9XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcIm9uQ2FudmFzSW5pdGVkXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIG9uQ2FudmFzSW5pdGVkKGNhbnZhcywgd2lkdGgsIGhlaWdodCkge1xuICAgICAgdGhpcy5jcmVhdGVQcm90b24oY2FudmFzLCB3aWR0aCwgaGVpZ2h0KTtcbiAgICAgIFJBRk1hbmFnZXIuYWRkKHRoaXMucmVuZGVyUHJvdG9uKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwib25SZXNpemVcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gb25SZXNpemUod2lkdGgsIGhlaWdodCkge1xuICAgICAgdGhpcy5jcm9zc1pvbmVCZWhhdmlvdXIuem9uZS53aWR0aCA9IHdpZHRoO1xuICAgICAgdGhpcy5jcm9zc1pvbmVCZWhhdmlvdXIuem9uZS5oZWlnaHQgPSBoZWlnaHQ7XG4gICAgICB0aGlzLnByb3Rvbi5yZW5kZXJlcnNbMF0ucmVzaXplKHdpZHRoLCBoZWlnaHQpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJjcmVhdGVQcm90b25cIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gY3JlYXRlUHJvdG9uKGNhbnZhcywgd2lkdGgsIGhlaWdodCkge1xuICAgICAgdGhpcy5wcm90b24gPSBuZXcgUHJvdG9uKCk7XG5cbiAgICAgIHZhciBlbWl0dGVyID0gbmV3IFByb3Rvbi5FbWl0dGVyKCk7XG4gICAgICBlbWl0dGVyLnJhdGUgPSBuZXcgUHJvdG9uLlJhdGUodGhpcy5wcm9wcy5udW0gfHwgMjApO1xuICAgICAgZW1pdHRlci5kYW1waW5nID0gMC4wMDg7XG5cbiAgICAgIGVtaXR0ZXIuYWRkSW5pdGlhbGl6ZShuZXcgUHJvdG9uLk1hc3MoMSkpO1xuICAgICAgZW1pdHRlci5hZGRJbml0aWFsaXplKG5ldyBQcm90b24uUmFkaXVzKDMwLCA2MDApKTtcbiAgICAgIGVtaXR0ZXIuYWRkSW5pdGlhbGl6ZShuZXcgUHJvdG9uLlZlbG9jaXR5KG5ldyBQcm90b24uU3BhbigwLjUpLCBuZXcgUHJvdG9uLlNwYW4oMCwgMzYwKSwgXCJwb2xhclwiKSk7XG4gICAgICBlbWl0dGVyLmFkZEluaXRpYWxpemUobmV3IFByb3Rvbi5Qb3NpdGlvbihuZXcgUHJvdG9uLlJlY3Rab25lKDAsIDAsIGNhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodCkpKTtcblxuICAgICAgdmFyIGNyb3NzWm9uZUJlaGF2aW91ciA9IG5ldyBQcm90b24uQ3Jvc3Nab25lKG5ldyBQcm90b24uUmVjdFpvbmUoMCwgMCwgY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0KSwgXCJjcm9zc1wiKTtcbiAgICAgIGVtaXR0ZXIuYWRkQmVoYXZpb3VyKGNyb3NzWm9uZUJlaGF2aW91cik7XG4gICAgICBlbWl0dGVyLmFkZEJlaGF2aW91cihuZXcgUHJvdG9uLkFscGhhKFByb3Rvbi5nZXRTcGFuKDAuMzUsIDAuNTUpKSk7XG4gICAgICBlbWl0dGVyLmFkZEJlaGF2aW91cihuZXcgUHJvdG9uLkNvbG9yKHRoaXMuZ2V0Q29sb3IoKSkpO1xuICAgICAgZW1pdHRlci5hZGRCZWhhdmlvdXIobmV3IFByb3Rvbi5SYW5kb21EcmlmdCg1MCwgNTAsIDAuNSkpO1xuXG4gICAgICBlbWl0dGVyLmVtaXQoXCJvbmNlXCIpO1xuICAgICAgdGhpcy5wcm90b24uYWRkRW1pdHRlcihlbWl0dGVyKTtcblxuICAgICAgdmFyIHJlbmRlcmVyID0gbmV3IFByb3Rvbi5DYW52YXNSZW5kZXJlcihjYW52YXMpO1xuICAgICAgdGhpcy5wcm90b24uYWRkUmVuZGVyZXIocmVuZGVyZXIpO1xuXG4gICAgICB0aGlzLmNyb3NzWm9uZUJlaGF2aW91ciA9IGNyb3NzWm9uZUJlaGF2aW91cjtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiZ2V0Q29sb3JcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0Q29sb3IoKSB7XG4gICAgICB2YXIgYyA9IHRoaXMuY29sb3JzO1xuICAgICAgaWYgKHRoaXMucHJvcHMuY29sb3IpIHtcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkodGhpcy5wcm9wcy5jb2xvcikpIHtcbiAgICAgICAgICBjID0gdGhpcy5wcm9wcy5jb2xvcjtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjID0gW3RoaXMucHJvcHMuY29sb3JdO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBjO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJyZW5kZXJQcm90b25cIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyUHJvdG9uKCkge1xuICAgICAgdGhpcy5wcm90b24gJiYgdGhpcy5wcm90b24udXBkYXRlKCk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcInJlbmRlclwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChDYW52YXMsIHsgYmc6IHRoaXMucHJvcHMuYmcsXG4gICAgICAgIGdsb2JhbENvbXBvc2l0ZU9wZXJhdGlvbjogXCJkYXJrZW5cIixcbiAgICAgICAgb25DYW52YXNJbml0ZWQ6IHRoaXMub25DYW52YXNJbml0ZWQuYmluZCh0aGlzKSxcbiAgICAgICAgb25SZXNpemU6IHRoaXMub25SZXNpemUuYmluZCh0aGlzKVxuICAgICAgfSk7XG4gICAgfVxuICB9XSk7XG4gIHJldHVybiBDaXJjbGU7XG59KFJlYWN0LkNvbXBvbmVudCk7XG5cbnZhciBUYWRwb2xlID0gZnVuY3Rpb24gKF9SZWFjdCRDb21wb25lbnQpIHtcbiAgaW5oZXJpdHMoVGFkcG9sZSwgX1JlYWN0JENvbXBvbmVudCk7XG5cbiAgZnVuY3Rpb24gVGFkcG9sZShwcm9wcykge1xuICAgIGNsYXNzQ2FsbENoZWNrKHRoaXMsIFRhZHBvbGUpO1xuXG4gICAgdmFyIF90aGlzID0gcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCAoVGFkcG9sZS5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKFRhZHBvbGUpKS5jYWxsKHRoaXMsIHByb3BzKSk7XG5cbiAgICBfdGhpcy5yZW5kZXJQcm90b24gPSBfdGhpcy5yZW5kZXJQcm90b24uYmluZChfdGhpcyk7XG4gICAgcmV0dXJuIF90aGlzO1xuICB9XG5cbiAgY3JlYXRlQ2xhc3MoVGFkcG9sZSwgW3tcbiAgICBrZXk6IFwib25DYW52YXNEaWRNb3VudFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBvbkNhbnZhc0RpZE1vdW50KGNhbnZhcykge31cbiAgfSwge1xuICAgIGtleTogXCJvbkNhbnZhc0luaXRlZFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBvbkNhbnZhc0luaXRlZChjYW52YXMsIHdpZHRoLCBoZWlnaHQpIHtcbiAgICAgIHRoaXMuY3JlYXRlUHJvdG9uKGNhbnZhcywgd2lkdGgsIGhlaWdodCk7XG4gICAgICB0aGlzLnJlbmRlclByb3RvbigpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJvblJlc2l6ZVwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBvblJlc2l6ZSh3aWR0aCwgaGVpZ2h0KSB7XG4gICAgICB0aGlzLmNyb3NzWm9uZUJlaGF2aW91ci56b25lLndpZHRoID0gd2lkdGg7XG4gICAgICB0aGlzLmNyb3NzWm9uZUJlaGF2aW91ci56b25lLmhlaWdodCA9IGhlaWdodDtcbiAgICAgIHRoaXMucHJvdG9uLnJlbmRlcmVyc1swXS5yZXNpemUod2lkdGgsIGhlaWdodCk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImNyZWF0ZVByb3RvblwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBjcmVhdGVQcm90b24oY2FudmFzLCB3aWR0aCwgaGVpZ2h0KSB7XG4gICAgICB0aGlzLnByb3RvbiA9IG5ldyBQcm90b24oKTtcblxuICAgICAgdmFyIGVtaXR0ZXIgPSBuZXcgUHJvdG9uLkVtaXR0ZXIoKTtcbiAgICAgIGVtaXR0ZXIuZGFtcGluZyA9IDAuMDA4O1xuICAgICAgZW1pdHRlci5yYXRlID0gbmV3IFByb3Rvbi5SYXRlKHRoaXMucHJvcHMubnVtID8gdGhpcy5wcm9wcy5udW0gOiA1MCk7XG4gICAgICBlbWl0dGVyLmFkZEluaXRpYWxpemUobmV3IFByb3Rvbi5NYXNzKDEpKTtcbiAgICAgIGVtaXR0ZXIuYWRkSW5pdGlhbGl6ZShuZXcgUHJvdG9uLlJhZGl1cyg1LCA5KSk7XG4gICAgICBlbWl0dGVyLmFkZEluaXRpYWxpemUobmV3IFByb3Rvbi5WZWxvY2l0eShuZXcgUHJvdG9uLlNwYW4oMS41KSwgbmV3IFByb3Rvbi5TcGFuKDAsIDM2MCksIFwicG9sYXJcIikpO1xuICAgICAgZW1pdHRlci5hZGRJbml0aWFsaXplKG5ldyBQcm90b24uUG9zaXRpb24obmV3IFByb3Rvbi5SZWN0Wm9uZSgwLCAwLCB3aWR0aCwgaGVpZ2h0KSkpO1xuXG4gICAgICB2YXIgbW91c2VJbmZvID0ge1xuICAgICAgICB4OiB3aWR0aCAvIDIsXG4gICAgICAgIHk6IGhlaWdodCAvIDJcbiAgICAgIH07XG5cbiAgICAgIHZhciBhdHRyYWN0aW9uQmVoYXZpb3VyID0gbmV3IFByb3Rvbi5BdHRyYWN0aW9uKG1vdXNlSW5mbywgMCwgMCk7XG4gICAgICB2YXIgY3Jvc3Nab25lQmVoYXZpb3VyID0gbmV3IFByb3Rvbi5Dcm9zc1pvbmUobmV3IFByb3Rvbi5SZWN0Wm9uZSgwLCAwLCBjYW52YXMud2lkdGgsIGNhbnZhcy5oZWlnaHQpLCBcImJvdW5kXCIpO1xuICAgICAgZW1pdHRlci5hZGRCZWhhdmlvdXIobmV3IFByb3Rvbi5Db2xvcih0aGlzLnByb3BzLmNvbG9yIHx8IFwiI2JiYlwiKSk7XG4gICAgICAvL2VtaXR0ZXIuYWRkQmVoYXZpb3VyKG5ldyBQcm90b24uQWxwaGEobmV3IFByb3Rvbi5TcGFuKDAuNSwgMSkpKTtcbiAgICAgIGVtaXR0ZXIuYWRkQmVoYXZpb3VyKGF0dHJhY3Rpb25CZWhhdmlvdXIsIGNyb3NzWm9uZUJlaGF2aW91cik7XG4gICAgICBlbWl0dGVyLmFkZEJlaGF2aW91cihuZXcgUHJvdG9uLlJhbmRvbURyaWZ0KDE1LCAxNSwgMC4wNSkpO1xuICAgICAgZW1pdHRlci5lbWl0KFwib25jZVwiKTtcblxuICAgICAgdGhpcy5wcm90b24uYWRkRW1pdHRlcihlbWl0dGVyKTtcbiAgICAgIHRoaXMucHJvdG9uLmFkZFJlbmRlcmVyKHRoaXMuY3JlYXRlUmVuZGVyZXIoY2FudmFzKSk7XG4gICAgICB0aGlzLmNyb3NzWm9uZUJlaGF2aW91ciA9IGNyb3NzWm9uZUJlaGF2aW91cjtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiY3JlYXRlUmVuZGVyZXJcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gY3JlYXRlUmVuZGVyZXIoY2FudmFzKSB7XG4gICAgICB2YXIgam9pbnRDb3VudCA9IDEwO1xuICAgICAgdmFyIGRlbGF5VGltZSA9IDg7XG4gICAgICB2YXIgY29udGV4dCA9IGNhbnZhcy5nZXRDb250ZXh0KFwiMmRcIik7XG4gICAgICB2YXIgcmVuZGVyZXIgPSBuZXcgUHJvdG9uLkNhbnZhc1JlbmRlcmVyKGNhbnZhcyk7XG5cbiAgICAgIHJlbmRlcmVyLm9uUHJvdG9uVXBkYXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBjb250ZXh0LmNsZWFyUmVjdCgwLCAwLCBjYW52YXMud2lkdGgsIGNhbnZhcy5oZWlnaHQpO1xuICAgICAgfTtcblxuICAgICAgcmVuZGVyZXIub25QYXJ0aWNsZUNyZWF0ZWQgPSBmdW5jdGlvbiAocGFydGljbGUpIHtcbiAgICAgICAgcGFydGljbGUuZGF0YS5wb2ludHMgPSBbXTtcbiAgICAgICAgcGFydGljbGUuZGF0YS5pbmRleCA9IDA7XG4gICAgICB9O1xuXG4gICAgICByZW5kZXJlci5vblBhcnRpY2xlVXBkYXRlID0gZnVuY3Rpb24gKHBhcnRpY2xlKSB7XG4gICAgICAgIGRyYXdUYWRwb2xlVGFpbChwYXJ0aWNsZSk7XG4gICAgICAgIGlmIChwYXJ0aWNsZS5kYXRhLmluZGV4ICUgZGVsYXlUaW1lID09PSAwKSBmaWxsUG9pbnRzRGF0YShwYXJ0aWNsZSk7XG4gICAgICAgIGRyYXdUYWRwb2xlSGVhZChwYXJ0aWNsZSk7XG4gICAgICAgIHBhcnRpY2xlLmRhdGEuaW5kZXgrKztcbiAgICAgIH07XG5cbiAgICAgIHZhciBmaWxsUG9pbnRzRGF0YSA9IGZ1bmN0aW9uIGZpbGxQb2ludHNEYXRhKHBhcnRpY2xlKSB7XG4gICAgICAgIHBhcnRpY2xlLmRhdGEucG9pbnRzLnVuc2hpZnQocGFydGljbGUucC55KTtcbiAgICAgICAgcGFydGljbGUuZGF0YS5wb2ludHMudW5zaGlmdChwYXJ0aWNsZS5wLngpO1xuXG4gICAgICAgIGlmIChwYXJ0aWNsZS5kYXRhLnBvaW50cy5sZW5ndGggPiBqb2ludENvdW50KSB7XG4gICAgICAgICAgcGFydGljbGUuZGF0YS5wb2ludHMucG9wKCk7XG4gICAgICAgICAgcGFydGljbGUuZGF0YS5wb2ludHMucG9wKCk7XG4gICAgICAgIH1cbiAgICAgIH07XG5cbiAgICAgIHZhciBkcmF3VGFkcG9sZUhlYWQgPSBmdW5jdGlvbiBkcmF3VGFkcG9sZUhlYWQocGFydGljbGUpIHtcbiAgICAgICAgY29udGV4dC5maWxsU3R5bGUgPSBwYXJ0aWNsZS5jb2xvcjtcbiAgICAgICAgY29udGV4dC5iZWdpblBhdGgoKTtcbiAgICAgICAgY29udGV4dC5hcmMocGFydGljbGUucC54LCBwYXJ0aWNsZS5wLnksIHBhcnRpY2xlLnJhZGl1cywgMCwgTWF0aC5QSSAqIDIsIHRydWUpO1xuICAgICAgICBjb250ZXh0LmNsb3NlUGF0aCgpO1xuICAgICAgICBjb250ZXh0LmZpbGwoKTtcbiAgICAgIH07XG5cbiAgICAgIHZhciBkcmF3VGFkcG9sZVRhaWwgPSBmdW5jdGlvbiBkcmF3VGFkcG9sZVRhaWwocGFydGljbGUpIHtcbiAgICAgICAgY29udGV4dC5iZWdpblBhdGgoKTtcbiAgICAgICAgY29udGV4dC5zdHJva2VTdHlsZSA9IHBhcnRpY2xlLmNvbG9yO1xuXG4gICAgICAgIGNvbnRleHQubW92ZVRvKHBhcnRpY2xlLnAueCwgcGFydGljbGUucC55KTtcblxuICAgICAgICB2YXIgbCA9IHBhcnRpY2xlLmRhdGEucG9pbnRzLmxlbmd0aDtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsOyBpICs9IDIpIHtcbiAgICAgICAgICB2YXIgeCA9IHBhcnRpY2xlLmRhdGEucG9pbnRzW2ldO1xuICAgICAgICAgIHZhciB5ID0gcGFydGljbGUuZGF0YS5wb2ludHNbaSArIDFdO1xuXG4gICAgICAgICAgY29udGV4dC5saW5lV2lkdGggPSBsaW5lYXJFdmFsdWF0aW9uKGksIGwpO1xuICAgICAgICAgIGNvbnRleHQubGluZVRvKHgsIHkpO1xuICAgICAgICAgIGNvbnRleHQuc3Ryb2tlKCk7XG4gICAgICAgIH1cbiAgICAgIH07XG5cbiAgICAgIHZhciBsaW5lYXJFdmFsdWF0aW9uID0gZnVuY3Rpb24gbGluZWFyRXZhbHVhdGlvbihpLCBsKSB7XG4gICAgICAgIGlmIChsIDw9IDIpIHJldHVybiAxO1xuXG4gICAgICAgIHZhciBtYXggPSA2O1xuICAgICAgICB2YXIgQSA9IChtYXggLSAxKSAvICgyIC8gbCAtIDEpO1xuICAgICAgICB2YXIgQiA9IDEgLSBBO1xuICAgICAgICB2YXIgWCA9IChpICsgMikgLyBsO1xuICAgICAgICB2YXIgdmFsID0gQSAqIFggKyBCO1xuICAgICAgICB2YWwgPSB2YWwgPj4gMDtcblxuICAgICAgICByZXR1cm4gdmFsO1xuICAgICAgfTtcblxuICAgICAgcmV0dXJuIHJlbmRlcmVyO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJyZW5kZXJQcm90b25cIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyUHJvdG9uKCkge1xuICAgICAgdmFyIF90aGlzMiA9IHRoaXM7XG5cbiAgICAgIFJBRk1hbmFnZXIuYWRkKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgX3RoaXMyLnByb3Rvbi51cGRhdGUoKTtcbiAgICAgICAgLy90aGlzLnByb3Rvbi5zdGF0cy51cGRhdGUoKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJyZW5kZXJcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyKCkge1xuICAgICAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoQ2FudmFzLCB7IGJnOiB0aGlzLnByb3BzLmJnLFxuICAgICAgICBnbG9iYWxDb21wb3NpdGVPcGVyYXRpb246IFwiZGFya2VyXCIsXG4gICAgICAgIG9uQ2FudmFzRGlkTW91bnQ6IHRoaXMub25DYW52YXNEaWRNb3VudC5iaW5kKHRoaXMpLFxuICAgICAgICBvbkNhbnZhc0luaXRlZDogdGhpcy5vbkNhbnZhc0luaXRlZC5iaW5kKHRoaXMpLFxuICAgICAgICBvblJlc2l6ZTogdGhpcy5vblJlc2l6ZS5iaW5kKHRoaXMpXG4gICAgICB9KTtcbiAgICB9XG4gIH1dKTtcbiAgcmV0dXJuIFRhZHBvbGU7XG59KFJlYWN0LkNvbXBvbmVudCk7XG5cbnZhciBDT0xPUiA9IFtcIiNmNmI5M2JcIiwgXCIjMThkY2ZmXCIsIFwiI2NkODRmMVwiLCBcIiNFRDRDNjdcIiwgXCIjZmZmZmZmXCIsIFwiI2I3MTU0MFwiLCBcIiMzMmZmN2VcIiwgXCIjZmYzODM4XCJdO1xuXG52YXIgUG9seWdvbiA9IGZ1bmN0aW9uIChfUmVhY3QkQ29tcG9uZW50KSB7XG4gIGluaGVyaXRzKFBvbHlnb24sIF9SZWFjdCRDb21wb25lbnQpO1xuXG4gIGZ1bmN0aW9uIFBvbHlnb24ocHJvcHMpIHtcbiAgICBjbGFzc0NhbGxDaGVjayh0aGlzLCBQb2x5Z29uKTtcblxuICAgIHZhciBfdGhpcyA9IHBvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgKFBvbHlnb24uX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihQb2x5Z29uKSkuY2FsbCh0aGlzLCBwcm9wcykpO1xuXG4gICAgX3RoaXMucmVuZGVyUHJvdG9uID0gX3RoaXMucmVuZGVyUHJvdG9uLmJpbmQoX3RoaXMpO1xuICAgIHJldHVybiBfdGhpcztcbiAgfVxuXG4gIGNyZWF0ZUNsYXNzKFBvbHlnb24sIFt7XG4gICAga2V5OiBcIm9uQ2FudmFzSW5pdGVkXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIG9uQ2FudmFzSW5pdGVkKGNhbnZhcywgd2lkdGgsIGhlaWdodCkge1xuICAgICAgdGhpcy5jcmVhdGVQcm90b24oY2FudmFzKTtcbiAgICAgIHRoaXMuY3JlYXRlRW1pdHRlcih7XG4gICAgICAgIGNhbnZhczogY2FudmFzLFxuICAgICAgICB4OiB3aWR0aCAvIDIsXG4gICAgICAgIHk6IGhlaWdodCAvIDIsXG4gICAgICAgIG1haW5FbWl0dGVyOiB0cnVlLFxuICAgICAgICB6b25lOiBcImJvdW5kXCJcbiAgICAgIH0pO1xuXG4gICAgICBSQUZNYW5hZ2VyLmFkZCh0aGlzLnJlbmRlclByb3Rvbik7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImNvbXBvbmVudFdpbGxVbm1vdW50XCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGNvbXBvbmVudFdpbGxVbm1vdW50KCkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgUkFGTWFuYWdlci5yZW1vdmUodGhpcy5yZW5kZXJQcm90b24pO1xuICAgICAgICB0aGlzLnByb3Rvbi5kZXN0cm95KCk7XG4gICAgICB9IGNhdGNoIChlKSB7fVxuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJvblJlc2l6ZVwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBvblJlc2l6ZSgpIHt9XG4gIH0sIHtcbiAgICBrZXk6IFwiY3JlYXRlUHJvdG9uXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGNyZWF0ZVByb3RvbihjYW52YXMpIHtcbiAgICAgIHRoaXMucHJvdG9uID0gbmV3IFByb3RvbigpO1xuICAgICAgdmFyIHJlbmRlcmVyID0gdGhpcy5jcmVhdGVSZW5kZXJlcihjYW52YXMpO1xuICAgICAgdGhpcy5wcm90b24uYWRkUmVuZGVyZXIocmVuZGVyZXIpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJjcmVhdGVSZW5kZXJlclwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBjcmVhdGVSZW5kZXJlcihjYW52YXMpIHtcbiAgICAgIHZhciBjb250ZXh0ID0gY2FudmFzLmdldENvbnRleHQoXCIyZFwiKTtcbiAgICAgIHZhciByZW5kZXJlciA9IG5ldyBQcm90b24uQ3VzdG9tUmVuZGVyZXIoKTtcblxuICAgICAgcmVuZGVyZXIub25Qcm90b25VcGRhdGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGNvbnRleHQuY2xlYXJSZWN0KDAsIDAsIGNhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodCk7XG4gICAgICB9O1xuXG4gICAgICByZW5kZXJlci5vblBhcnRpY2xlQ3JlYXRlZCA9IGZ1bmN0aW9uIChwYXJ0aWNsZSkge1xuICAgICAgICBwYXJ0aWNsZS5kYXRhLmNvdW50ID0gUHJvdG9uLk1hdGhVdGlsLnJhbmRvbUFUb0IoMywgMTAsIHRydWUpO1xuICAgICAgfTtcblxuICAgICAgcmVuZGVyZXIub25QYXJ0aWNsZVVwZGF0ZSA9IGZ1bmN0aW9uIChwYXJ0aWNsZSkge1xuICAgICAgICBjb250ZXh0LnNhdmUoKTtcbiAgICAgICAgY29udGV4dC5nbG9iYWxBbHBoYSA9IHBhcnRpY2xlLmFscGhhO1xuICAgICAgICBjb250ZXh0LmZpbGxTdHlsZSA9IHBhcnRpY2xlLmNvbG9yO1xuXG4gICAgICAgIGNvbnRleHQudHJhbnNsYXRlKHBhcnRpY2xlLnAueCwgcGFydGljbGUucC55KTtcbiAgICAgICAgY29udGV4dC5yb3RhdGUoUHJvdG9uLk1hdGhVdGlsLmRlZ3JlZVRyYW5zZm9ybShwYXJ0aWNsZS5yb3RhdGlvbikpO1xuICAgICAgICBjb250ZXh0LnRyYW5zbGF0ZSgtcGFydGljbGUucC54LCAtcGFydGljbGUucC55KTtcblxuICAgICAgICBjb250ZXh0LmJlZ2luUGF0aCgpO1xuICAgICAgICBkcmF3UG9seWdvbihwYXJ0aWNsZSwgcGFydGljbGUuZGF0YS5jb3VudCk7XG5cbiAgICAgICAgY29udGV4dC5jbG9zZVBhdGgoKTtcbiAgICAgICAgY29udGV4dC5maWxsKCk7XG4gICAgICAgIGNvbnRleHQuZ2xvYmFsQWxwaGEgPSAxO1xuICAgICAgICBjb250ZXh0LnJlc3RvcmUoKTtcbiAgICAgIH07XG5cbiAgICAgIHJlbmRlcmVyLm9uUGFydGljbGVEZWFkID0gZnVuY3Rpb24gKHBhcnRpY2xlKSB7fTtcblxuICAgICAgdmFyIGRyYXdQb2x5Z29uID0gZnVuY3Rpb24gZHJhd1BvbHlnb24ocGFydGljbGUsIGNvdW50KSB7XG4gICAgICAgIGlmIChjb3VudCA+PSA3KSB7XG4gICAgICAgICAgY29udGV4dC5hcmMocGFydGljbGUucC54LCBwYXJ0aWNsZS5wLnksIHBhcnRpY2xlLnJhZGl1cywgMCwgTWF0aC5QSSAqIDIsIHRydWUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHZhciByYWRpdXMgPSBwYXJ0aWNsZS5yYWRpdXM7XG5cbiAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8PSBjb3VudDsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgeCA9IHBhcnRpY2xlLnAueCArIHJhZGl1cyAqIE1hdGguY29zKE1hdGguUEkgLyAxODAgKiAzNjAgLyBjb3VudCAqIGkpO1xuICAgICAgICAgICAgdmFyIHkgPSBwYXJ0aWNsZS5wLnkgKyByYWRpdXMgKiBNYXRoLnNpbihNYXRoLlBJIC8gMTgwICogMzYwIC8gY291bnQgKiBpKTtcblxuICAgICAgICAgICAgaWYgKGkgPT09IDApIGNvbnRleHQubW92ZVRvKHgsIHkpO2Vsc2UgY29udGV4dC5saW5lVG8oeCwgeSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgICByZXR1cm4gcmVuZGVyZXI7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImNyZWF0ZUVtaXR0ZXJcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gY3JlYXRlRW1pdHRlcihfcmVmKSB7XG4gICAgICB2YXIgbWFpbkVtaXR0ZXIgPSBfcmVmLm1haW5FbWl0dGVyLFxuICAgICAgICAgIGNhbnZhcyA9IF9yZWYuY2FudmFzLFxuICAgICAgICAgIHggPSBfcmVmLngsXG4gICAgICAgICAgeSA9IF9yZWYueSxcbiAgICAgICAgICByYWRpdXMgPSBfcmVmLnJhZGl1cyxcbiAgICAgICAgICBfcmVmJGNvbG9yID0gX3JlZi5jb2xvcixcbiAgICAgICAgICBjb2xvciA9IF9yZWYkY29sb3IgPT09IHVuZGVmaW5lZCA/IENPTE9SIDogX3JlZiRjb2xvcixcbiAgICAgICAgICBfcmVmJHpvbmUgPSBfcmVmLnpvbmUsXG4gICAgICAgICAgem9uZSA9IF9yZWYkem9uZSA9PT0gdW5kZWZpbmVkID8gXCJkZWFkXCIgOiBfcmVmJHpvbmUsXG4gICAgICAgICAgX3JlZiRvbmNlID0gX3JlZi5vbmNlLFxuICAgICAgICAgIG9uY2UgPSBfcmVmJG9uY2UgPT09IHVuZGVmaW5lZCA/IFwiYWxsXCIgOiBfcmVmJG9uY2UsXG4gICAgICAgICAgX3JlZiRhbHBoYSA9IF9yZWYuYWxwaGEsXG4gICAgICAgICAgYWxwaGEgPSBfcmVmJGFscGhhID09PSB1bmRlZmluZWQgPyAwLjg1IDogX3JlZiRhbHBoYSxcbiAgICAgICAgICBfcmVmJGdyYXZpdHkgPSBfcmVmLmdyYXZpdHksXG4gICAgICAgICAgZ3Jhdml0eSA9IF9yZWYkZ3Jhdml0eSA9PT0gdW5kZWZpbmVkID8gMy41IDogX3JlZiRncmF2aXR5O1xuXG4gICAgICB2YXIgZW1pdHRlciA9IHRoaXMucHJvdG9uLnBvb2wuZ2V0KFByb3Rvbi5FbWl0dGVyKTtcblxuICAgICAgaWYgKCFlbWl0dGVyLmNvbXBsZXRlZCkge1xuICAgICAgICBlbWl0dGVyLnJhdGUgPSBuZXcgUHJvdG9uLlJhdGUodGhpcy5wcm9wcy5udW0gPyBuZXcgUHJvdG9uLlNwYW4odGhpcy5wcm9wcy5udW0pIDogbmV3IFByb3Rvbi5TcGFuKDQsIDkpLCBuZXcgUHJvdG9uLlNwYW4oMS42LCAyLjIpKTtcblxuICAgICAgICB2YXIgcmFkaXVzSW5pdCA9IG1haW5FbWl0dGVyID8gbmV3IFByb3Rvbi5SYWRpdXMoMTAsIDExMCkgOiBuZXcgUHJvdG9uLlJhZGl1cygzLCByYWRpdXMpO1xuICAgICAgICBlbWl0dGVyLmFkZEluaXRpYWxpemUobmV3IFByb3Rvbi5NYXNzKDEpKTtcbiAgICAgICAgZW1pdHRlci5hZGRJbml0aWFsaXplKHJhZGl1c0luaXQpO1xuICAgICAgICBlbWl0dGVyLmFkZEluaXRpYWxpemUobmV3IFByb3Rvbi5MaWZlKDMsIDYpKTtcbiAgICAgICAgZW1pdHRlci5hZGRJbml0aWFsaXplKG5ldyBQcm90b24uVmVsb2NpdHkobmV3IFByb3Rvbi5TcGFuKDQsIDYpLCBuZXcgUHJvdG9uLlNwYW4oLTkwLCA5MCksIFwicG9sYXJcIikpO1xuXG4gICAgICAgIGVtaXR0ZXIuYWRkQmVoYXZpb3VyKG5ldyBQcm90b24uQWxwaGEoYWxwaGEsIDAuMikpO1xuICAgICAgICBlbWl0dGVyLmFkZEJlaGF2aW91cihuZXcgUHJvdG9uLkNvbG9yKGNvbG9yKSk7XG4gICAgICAgIGVtaXR0ZXIuYWRkQmVoYXZpb3VyKG5ldyBQcm90b24uU2NhbGUoMSwgMC4zKSk7XG4gICAgICAgIGVtaXR0ZXIuYWRkQmVoYXZpb3VyKG5ldyBQcm90b24uUm90YXRlKCkpO1xuICAgICAgICBlbWl0dGVyLmFkZEJlaGF2aW91cihuZXcgUHJvdG9uLkdyYXZpdHkoZ3Jhdml0eSkpO1xuXG4gICAgICAgIGVtaXR0ZXIuYWRkQmVoYXZpb3VyKHRoaXMuY3VzdG9tRGVhZEJlaGF2aW91cihjYW52YXMpKTtcbiAgICAgICAgZW1pdHRlci5hZGRCZWhhdmlvdXIobmV3IFByb3Rvbi5Dcm9zc1pvbmUobmV3IFByb3Rvbi5SZWN0Wm9uZSgwLCAwLCBjYW52YXMud2lkdGgsIGNhbnZhcy5oZWlnaHQpLCB6b25lKSk7XG4gICAgICB9XG5cbiAgICAgIGVtaXR0ZXIucC54ID0geDtcbiAgICAgIGVtaXR0ZXIucC55ID0geTtcbiAgICAgIGlmIChvbmNlID09PSBcIm9uY2VcIikgZW1pdHRlci5lbWl0KFwib25jZVwiKTtlbHNlIGVtaXR0ZXIuZW1pdCgpO1xuXG4gICAgICB0aGlzLnByb3Rvbi5hZGRFbWl0dGVyKGVtaXR0ZXIpO1xuICAgICAgLy90aGlzLmV4cGlyZUVtaXR0ZXIoZW1pdHRlcik7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImV4cGlyZUVtaXR0ZXJcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gZXhwaXJlRW1pdHRlcihlbWl0dGVyKSB7XG4gICAgICB2YXIgX3RoaXMyID0gdGhpcztcblxuICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGVtaXR0ZXIuY29tcGxldGVkID0gdHJ1ZTtcbiAgICAgICAgX3RoaXMyLnByb3Rvbi5wb29sLmV4cGlyZShlbWl0dGVyKTtcbiAgICAgICAgX3RoaXMyLnByb3Rvbi5yZW1vdmVFbWl0dGVyKGVtaXR0ZXIpO1xuICAgICAgfSwgNTAwKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiY3VzdG9tRGVhZEJlaGF2aW91clwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBjdXN0b21EZWFkQmVoYXZpb3VyKGNhbnZhcykge1xuICAgICAgdmFyIF90aGlzMyA9IHRoaXM7XG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIGluaXRpYWxpemU6IGZ1bmN0aW9uIGluaXRpYWxpemUocGFydGljbGUpIHtcbiAgICAgICAgICBwYXJ0aWNsZS5kYXRhID0gcGFydGljbGUuZGF0YSB8fCB7fTtcbiAgICAgICAgICBwYXJ0aWNsZS5kYXRhLm9sZFJhZGl1cyA9IHBhcnRpY2xlLnJhZGl1cztcbiAgICAgICAgICBwYXJ0aWNsZS5kYXRhLmVtaXR0ZXJDb3VudCA9IDA7XG4gICAgICAgIH0sXG4gICAgICAgIGFwcGx5QmVoYXZpb3VyOiBmdW5jdGlvbiBhcHBseUJlaGF2aW91cihwYXJ0aWNsZSkge1xuICAgICAgICAgIGlmIChwYXJ0aWNsZS5yYWRpdXMgPCA1KSByZXR1cm47XG4gICAgICAgICAgaWYgKHBhcnRpY2xlLmRhdGEuZW1pdHRlckNvdW50ID49IDIpIHJldHVybjtcblxuICAgICAgICAgIGlmIChwYXJ0aWNsZS5yYWRpdXMgPD0gMSAvIDMgKiBwYXJ0aWNsZS5kYXRhLm9sZFJhZGl1cykge1xuICAgICAgICAgICAgcGFydGljbGUuZGF0YS5lbWl0dGVyQ291bnQrKztcbiAgICAgICAgICAgIF90aGlzMy5jcmVhdGVFbWl0dGVyKHtcbiAgICAgICAgICAgICAgY2FudmFzOiBjYW52YXMsXG4gICAgICAgICAgICAgIHg6IHBhcnRpY2xlLnAueCxcbiAgICAgICAgICAgICAgeTogcGFydGljbGUucC55LFxuICAgICAgICAgICAgICByYWRpdXM6IHBhcnRpY2xlLnJhZGl1cyAqICgxIC8gMiksXG4gICAgICAgICAgICAgIGFscGhhOiAwLjUsXG4gICAgICAgICAgICAgIGdyYXZpdHk6IDUsXG4gICAgICAgICAgICAgIGNvbG9yOiBwYXJ0aWNsZS5jb2xvcixcbiAgICAgICAgICAgICAgb25jZTogXCJvbmNlXCJcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwicmVuZGVyUHJvdG9uXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlclByb3RvbigpIHtcbiAgICAgIHRoaXMucHJvdG9uICYmIHRoaXMucHJvdG9uLnVwZGF0ZSgpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJyZW5kZXJcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyKCkge1xuICAgICAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoQ2FudmFzLCB7IGJnOiB0aGlzLnByb3BzLmJnLFxuICAgICAgICBnbG9iYWxDb21wb3NpdGVPcGVyYXRpb246IFwiZGFya2VyXCIsXG4gICAgICAgIG9uQ2FudmFzSW5pdGVkOiB0aGlzLm9uQ2FudmFzSW5pdGVkLmJpbmQodGhpcyksXG4gICAgICAgIG9uUmVzaXplOiB0aGlzLm9uUmVzaXplLmJpbmQodGhpcylcbiAgICAgIH0pO1xuICAgIH1cbiAgfV0pO1xuICByZXR1cm4gUG9seWdvbjtcbn0oUmVhY3QuQ29tcG9uZW50KTtcblxudmFyIEZvdW50YWluID0gZnVuY3Rpb24gKF9SZWFjdCRDb21wb25lbnQpIHtcbiAgaW5oZXJpdHMoRm91bnRhaW4sIF9SZWFjdCRDb21wb25lbnQpO1xuXG4gIGZ1bmN0aW9uIEZvdW50YWluKHByb3BzKSB7XG4gICAgY2xhc3NDYWxsQ2hlY2sodGhpcywgRm91bnRhaW4pO1xuXG4gICAgdmFyIF90aGlzID0gcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCAoRm91bnRhaW4uX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihGb3VudGFpbikpLmNhbGwodGhpcywgcHJvcHMpKTtcblxuICAgIF90aGlzLmNvbG9ycyA9IFtcIiM1MjlCODhcIiwgXCIjQ0REMTgwXCIsIFwiI0ZGRkEzMlwiLCBcIiNGQjYyNTVcIiwgXCIjRkI0QTUzXCIsIFwiI0ZGNEU1MFwiLCBcIiNGOUQ0MjNcIl07XG4gICAgX3RoaXMucmVuZGVyUHJvdG9uID0gX3RoaXMucmVuZGVyUHJvdG9uLmJpbmQoX3RoaXMpO1xuICAgIHJldHVybiBfdGhpcztcbiAgfVxuXG4gIGNyZWF0ZUNsYXNzKEZvdW50YWluLCBbe1xuICAgIGtleTogXCJjb21wb25lbnRXaWxsVW5tb3VudFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBjb21wb25lbnRXaWxsVW5tb3VudCgpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIFJBRk1hbmFnZXIucmVtb3ZlKHRoaXMucmVuZGVyUHJvdG9uKTtcbiAgICAgICAgdGhpcy5wcm90b24uZGVzdHJveSgpO1xuICAgICAgfSBjYXRjaCAoZSkge31cbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwib25DYW52YXNJbml0ZWRcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gb25DYW52YXNJbml0ZWQoY2FudmFzLCB3aWR0aCwgaGVpZ2h0KSB7XG4gICAgICB0aGlzLmNyZWF0ZVByb3RvbihjYW52YXMsIHdpZHRoLCBoZWlnaHQpO1xuICAgICAgUkFGTWFuYWdlci5hZGQodGhpcy5yZW5kZXJQcm90b24pO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJvblJlc2l6ZVwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBvblJlc2l6ZSgpIHt9XG4gIH0sIHtcbiAgICBrZXk6IFwiY3JlYXRlUHJvdG9uXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGNyZWF0ZVByb3RvbihjYW52YXMsIHdpZHRoLCBoZWlnaHQpIHtcbiAgICAgIHRoaXMucHJvdG9uID0gbmV3IFByb3RvbigpO1xuICAgICAgdmFyIGVtaXR0ZXIgPSBuZXcgUHJvdG9uLkVtaXR0ZXIoKTtcbiAgICAgIGVtaXR0ZXIucmF0ZSA9IG5ldyBQcm90b24uUmF0ZSh0aGlzLnByb3BzLm51bSA/IG5ldyBQcm90b24uU3Bhbih0aGlzLnByb3BzLm51bSkgOiBuZXcgUHJvdG9uLlNwYW4oNCwgOCksIG5ldyBQcm90b24uU3BhbigwLjEsIDAuMjUpKTtcblxuICAgICAgZW1pdHRlci5hZGRJbml0aWFsaXplKG5ldyBQcm90b24uTWFzcygxKSk7XG4gICAgICBlbWl0dGVyLmFkZEluaXRpYWxpemUobmV3IFByb3Rvbi5SYWRpdXMoMjAsIDIwMCkpO1xuICAgICAgZW1pdHRlci5hZGRJbml0aWFsaXplKG5ldyBQcm90b24uTGlmZSgyLCA0KSk7XG4gICAgICBlbWl0dGVyLmFkZEluaXRpYWxpemUobmV3IFByb3Rvbi5WZWxvY2l0eShuZXcgUHJvdG9uLlNwYW4oNCwgNyksIG5ldyBQcm90b24uU3BhbigwLCAzNjApLCBcInBvbGFyXCIpKTtcbiAgICAgIGVtaXR0ZXIuYWRkSW5pdGlhbGl6ZShuZXcgUHJvdG9uLlBvc2l0aW9uKG5ldyBQcm90b24uQ2lyY2xlWm9uZSh3aWR0aCAvIDIsIGhlaWdodCAvIDIsIDEwMCkpKTtcblxuICAgICAgZW1pdHRlci5hZGRCZWhhdmlvdXIobmV3IFByb3Rvbi5BbHBoYSgxLCAwKSk7XG4gICAgICBlbWl0dGVyLmFkZEJlaGF2aW91cihuZXcgUHJvdG9uLlNjYWxlKDAuMiwgMSkpO1xuICAgICAgZW1pdHRlci5hZGRCZWhhdmlvdXIodGhpcy5jcmVhdGVDdXN0b21CZWhhdmlvdXIoKSk7XG4gICAgICBlbWl0dGVyLmFkZEJlaGF2aW91cihuZXcgUHJvdG9uLkNvbG9yKHRoaXMuY29sb3JzLCBcInJhbmRvbVwiKSk7XG4gICAgICBlbWl0dGVyLmVtaXQoKTtcbiAgICAgIHRoaXMucHJvdG9uLmFkZEVtaXR0ZXIoZW1pdHRlcik7XG5cbiAgICAgIHZhciByZW5kZXJlciA9IG5ldyBQcm90b24uQ2FudmFzUmVuZGVyZXIoY2FudmFzKTtcbiAgICAgIHRoaXMucHJvdG9uLmFkZFJlbmRlcmVyKHJlbmRlcmVyKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiY3JlYXRlQ3VzdG9tQmVoYXZpb3VyXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGNyZWF0ZUN1c3RvbUJlaGF2aW91cigpIHtcbiAgICAgIHZhciBmID0gMTAgKiAxMDA7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBpbml0aWFsaXplOiBmdW5jdGlvbiBpbml0aWFsaXplKHBhcnRpY2xlKSB7XG4gICAgICAgICAgcGFydGljbGUuZiA9IG5ldyBQcm90b24uVmVjdG9yMkQoMCwgMCk7XG4gICAgICAgIH0sXG4gICAgICAgIGFwcGx5QmVoYXZpb3VyOiBmdW5jdGlvbiBhcHBseUJlaGF2aW91cihwYXJ0aWNsZSkge1xuICAgICAgICAgIHZhciBsZW5ndGggPSBwYXJ0aWNsZS52Lmxlbmd0aCgpIC8gMTAwMDtcbiAgICAgICAgICB2YXIgZ3JhZGllbnQgPSBwYXJ0aWNsZS52LmdldEdyYWRpZW50KCk7XG4gICAgICAgICAgZ3JhZGllbnQgKz0gMy4xNCAvIDI7XG5cbiAgICAgICAgICBwYXJ0aWNsZS5mLnggPSBmICogbGVuZ3RoICogTWF0aC5jb3MoZ3JhZGllbnQpO1xuICAgICAgICAgIHBhcnRpY2xlLmYueSA9IGYgKiBsZW5ndGggKiBNYXRoLnNpbihncmFkaWVudCk7XG4gICAgICAgICAgcGFydGljbGUuYS5hZGQocGFydGljbGUuZik7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcInJlbmRlclByb3RvblwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXJQcm90b24oKSB7XG4gICAgICB0aGlzLnByb3RvbiAmJiB0aGlzLnByb3Rvbi51cGRhdGUoKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwicmVuZGVyXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlcigpIHtcbiAgICAgIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KENhbnZhcywgeyBiZzogdGhpcy5wcm9wcy5iZyxcbiAgICAgICAgZ2xvYmFsQ29tcG9zaXRlT3BlcmF0aW9uOiBcInhvclwiLFxuICAgICAgICBvbkNhbnZhc0luaXRlZDogdGhpcy5vbkNhbnZhc0luaXRlZC5iaW5kKHRoaXMpLFxuICAgICAgICBvblJlc2l6ZTogdGhpcy5vblJlc2l6ZS5iaW5kKHRoaXMpXG4gICAgICB9KTtcbiAgICB9XG4gIH1dKTtcbiAgcmV0dXJuIEZvdW50YWluO1xufShSZWFjdC5Db21wb25lbnQpO1xuXG52YXIgUGFydGljbGVzQmcgPSBmdW5jdGlvbiAoX0NvbXBvbmVudCkge1xuICBpbmhlcml0cyhQYXJ0aWNsZXNCZywgX0NvbXBvbmVudCk7XG5cbiAgZnVuY3Rpb24gUGFydGljbGVzQmcocHJvcHMpIHtcbiAgICBjbGFzc0NhbGxDaGVjayh0aGlzLCBQYXJ0aWNsZXNCZyk7XG4gICAgcmV0dXJuIHBvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgKFBhcnRpY2xlc0JnLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoUGFydGljbGVzQmcpKS5jYWxsKHRoaXMsIHByb3BzKSk7XG4gIH1cblxuICBjcmVhdGVDbGFzcyhQYXJ0aWNsZXNCZywgW3tcbiAgICBrZXk6IFwiZ2V0UmFuZG9tXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGdldFJhbmRvbSgpIHtcbiAgICAgIHZhciBfcHJvcHMgPSB0aGlzLnByb3BzLFxuICAgICAgICAgIG51bSA9IF9wcm9wcy5udW0sXG4gICAgICAgICAgYmcgPSBfcHJvcHMuYmcsXG4gICAgICAgICAgY29sb3IgPSBfcHJvcHMuY29sb3I7XG5cbiAgICAgIC8vIENvZGUgc291cmNlIGZyb20gaGVyZSwgdGhhbmtzIGF1dGhvclxuICAgICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL2RyYXdjYWxsL1Byb3Rvbi9ibG9iL2doLXBhZ2VzL3NvdXJjZS9zcmMvdXRpbHMvUmFuZC5qc1xuXG4gICAgICBpZiAoIXRoaXMucmFuZG9tKSB7XG4gICAgICAgIHRoaXMucmFuZG9tID0gbmV3IFJhbmQoKTtcbiAgICAgICAgdGhpcy5yYW5kb20uc2V0KDAuMjUsIFJlYWN0LmNyZWF0ZUVsZW1lbnQoQ29sb3IsIHsgbnVtOiBudW0sIGJnOiBiZywgY29sb3I6IGNvbG9yIH0pKTtcbiAgICAgICAgdGhpcy5yYW5kb20uc2V0KDAuMiwgUmVhY3QuY3JlYXRlRWxlbWVudChCYWxsLCB7IG51bTogbnVtLCBiZzogYmcsIGNvbG9yOiBjb2xvciB9KSk7XG4gICAgICAgIHRoaXMucmFuZG9tLnNldCgwLjIsIFJlYWN0LmNyZWF0ZUVsZW1lbnQoTGluZXMsIHsgbnVtOiBudW0sIGJnOiBiZywgY29sb3I6IGNvbG9yIH0pKTtcbiAgICAgICAgdGhpcy5yYW5kb20uc2V0KDAuMTYsIFJlYWN0LmNyZWF0ZUVsZW1lbnQoVGhpY2ssIHsgbnVtOiBudW0sIGJnOiBiZywgY29sb3I6IGNvbG9yIH0pKTtcbiAgICAgICAgdGhpcy5yYW5kb20uc2V0KDAuMTgsIFJlYWN0LmNyZWF0ZUVsZW1lbnQoQ2lyY2xlLCB7IG51bTogbnVtLCBiZzogYmcsIGNvbG9yOiBjb2xvciB9KSk7XG4gICAgICAgIHRoaXMucmFuZG9tLnNldCgwLjA0LCBSZWFjdC5jcmVhdGVFbGVtZW50KENvYndlYiwgeyBudW06IG51bSwgYmc6IGJnLCBjb2xvcjogY29sb3IgfSkpO1xuICAgICAgICB0aGlzLnJhbmRvbS5zZXQoMC4xLCBSZWFjdC5jcmVhdGVFbGVtZW50KFBvbHlnb24sIHsgbnVtOiBudW0sIGJnOiBiZywgY29sb3I6IGNvbG9yIH0pKTtcbiAgICAgICAgdGhpcy5yYW5kb20uc2V0KDAuMDgsIFJlYWN0LmNyZWF0ZUVsZW1lbnQoU3F1YXJlLCB7IG51bTogbnVtLCBiZzogYmcsIGNvbG9yOiBjb2xvciB9KSk7XG4gICAgICAgIHRoaXMucmFuZG9tLnNldCgwLjE4LCBSZWFjdC5jcmVhdGVFbGVtZW50KFRhZHBvbGUsIHsgbnVtOiBudW0sIGJnOiBiZywgY29sb3I6IGNvbG9yIH0pKTtcbiAgICAgICAgdGhpcy5yYW5kb20uc2V0KDAuMTUsIFJlYWN0LmNyZWF0ZUVsZW1lbnQoRm91bnRhaW4sIHsgbnVtOiBudW0sIGJnOiBiZywgY29sb3I6IGNvbG9yIH0pKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0aGlzLnJhbmRvbS5nZXRSZXN1bHQoKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiZ2V0QmdQYXJ0aWNsZXNcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0QmdQYXJ0aWNsZXMoKSB7XG4gICAgICB2YXIgX3Byb3BzMiA9IHRoaXMucHJvcHMsXG4gICAgICAgICAgdHlwZSA9IF9wcm9wczIudHlwZSxcbiAgICAgICAgICBudW0gPSBfcHJvcHMyLm51bSxcbiAgICAgICAgICBiZyA9IF9wcm9wczIuYmcsXG4gICAgICAgICAgY29sb3IgPSBfcHJvcHMyLmNvbG9yLFxuICAgICAgICAgIGNvbmZpZyA9IF9wcm9wczIuY29uZmlnO1xuXG5cbiAgICAgIHZhciBwYXJ0aWNsZXMgPSB2b2lkIDA7XG4gICAgICBzd2l0Y2ggKFN0cmluZyh0eXBlKS50b0xvd2VyQ2FzZSgpKSB7XG4gICAgICAgIGNhc2UgXCJjb2xvclwiOlxuICAgICAgICAgIHBhcnRpY2xlcyA9IFJlYWN0LmNyZWF0ZUVsZW1lbnQoQ29sb3IsIHsgbnVtOiBudW0sIGJnOiBiZywgY29sb3I6IGNvbG9yIH0pO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwiYmFsbFwiOlxuICAgICAgICAgIHBhcnRpY2xlcyA9IFJlYWN0LmNyZWF0ZUVsZW1lbnQoQmFsbCwgeyBudW06IG51bSwgYmc6IGJnLCBjb2xvcjogY29sb3IgfSk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgXCJsaW5lc1wiOlxuICAgICAgICAgIHBhcnRpY2xlcyA9IFJlYWN0LmNyZWF0ZUVsZW1lbnQoTGluZXMsIHsgbnVtOiBudW0sIGJnOiBiZywgY29sb3I6IGNvbG9yIH0pO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwidGhpY2tcIjpcbiAgICAgICAgICBwYXJ0aWNsZXMgPSBSZWFjdC5jcmVhdGVFbGVtZW50KFRoaWNrLCB7IG51bTogbnVtLCBiZzogYmcsIGNvbG9yOiBjb2xvciB9KTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcImNpcmNsZVwiOlxuICAgICAgICAgIHBhcnRpY2xlcyA9IFJlYWN0LmNyZWF0ZUVsZW1lbnQoQ2lyY2xlLCB7IG51bTogbnVtLCBiZzogYmcsIGNvbG9yOiBjb2xvciB9KTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcImNvYndlYlwiOlxuICAgICAgICAgIHBhcnRpY2xlcyA9IFJlYWN0LmNyZWF0ZUVsZW1lbnQoQ29id2ViLCB7IG51bTogbnVtLCBiZzogYmcsIGNvbG9yOiBjb2xvciB9KTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcInBvbHlnb25cIjpcbiAgICAgICAgICBwYXJ0aWNsZXMgPSBSZWFjdC5jcmVhdGVFbGVtZW50KFBvbHlnb24sIHsgbnVtOiBudW0sIGJnOiBiZywgY29sb3I6IGNvbG9yIH0pO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwic3F1YXJlXCI6XG4gICAgICAgICAgcGFydGljbGVzID0gUmVhY3QuY3JlYXRlRWxlbWVudChTcXVhcmUsIHsgbnVtOiBudW0sIGJnOiBiZywgY29sb3I6IGNvbG9yIH0pO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwidGFkcG9sZVwiOlxuICAgICAgICAgIHBhcnRpY2xlcyA9IFJlYWN0LmNyZWF0ZUVsZW1lbnQoVGFkcG9sZSwgeyBudW06IG51bSwgYmc6IGJnLCBjb2xvcjogY29sb3IgfSk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgXCJmb3VudGFpblwiOlxuICAgICAgICAgIHBhcnRpY2xlcyA9IFJlYWN0LmNyZWF0ZUVsZW1lbnQoRm91bnRhaW4sIHsgbnVtOiBudW0sIGJnOiBiZywgY29sb3I6IGNvbG9yIH0pO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwiY3VzdG9tXCI6XG4gICAgICAgICAgcGFydGljbGVzID0gUmVhY3QuY3JlYXRlRWxlbWVudChDb2xvciQxLCB7IGJnOiBiZywgY29uZmlnOiBjb25maWcgfSk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgXCJyYW5kb21cIjpcbiAgICAgICAgICBwYXJ0aWNsZXMgPSB0aGlzLmdldFJhbmRvbShudW0pO1xuICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgcGFydGljbGVzID0gUmVhY3QuY3JlYXRlRWxlbWVudChDb2xvciwgeyBudW06IG51bSwgYmc6IGJnLCBjb2xvcjogY29sb3IgfSk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBwYXJ0aWNsZXM7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcInJlbmRlclwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgICB2YXIgcGFydGljbGVzID0gdGhpcy5nZXRCZ1BhcnRpY2xlcygpO1xuICAgICAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgIFJlYWN0LkZyYWdtZW50LFxuICAgICAgICBudWxsLFxuICAgICAgICBwYXJ0aWNsZXNcbiAgICAgICk7XG4gICAgfVxuICB9XSk7XG4gIHJldHVybiBQYXJ0aWNsZXNCZztcbn0oQ29tcG9uZW50KTtcblxuZXhwb3J0IGRlZmF1bHQgUGFydGljbGVzQmc7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5lcy5qcy5tYXBcbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/particles-bg/dist/index.es.js\n");

/***/ })

};
;